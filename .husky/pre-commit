`#!/usr/bin/env bash`

. "$(dirname "$0")/_/husky.sh"
if ! command -v brew -v &> /dev/null
then
    /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
fi

if ! command -v gitleaks -h &> /dev/null
then
    brew install gitleaks
fi

BRANCH=$(git branch --show-current)

gitleaks --repo-url=.git -v --additional-config=".husky/gitleaks-rules.toml" --branch=$BRANCH --unstaged || true
