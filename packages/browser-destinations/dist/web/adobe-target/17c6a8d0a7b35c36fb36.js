!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["adobe-targetDestination"]=t():e["adobe-targetDestination"]=t()}(self,(function(){return(()=>{"use strict";var e,t,r={},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={exports:{}};return r[e](i,i.exports,a),i.exports}a.m=r,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,r)=>(a.f[r](e,t),t)),[])),a.u=e=>e+"/cccb3a7f892b924f927b.js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="[name]Destination:",a.l=(r,o,i,n)=>{if(e[r])e[r].push(o);else{var s,d;if(void 0!==i)for(var l=document.getElementsByTagName("script"),p=0;p<l.length;p++){var u=l[p];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+i){s=u;break}}s||(d=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[o];var c=(t,o)=>{s.onerror=s.onload=null,clearTimeout(m);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((e=>e(o))),t)return t(o)},m=setTimeout(c.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=c.bind(null,s.onerror),s.onload=c.bind(null,s.onload),d&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e+"../"})(),(()=>{var e={745:0};a.f.j=(t,r)=>{var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise(((r,a)=>o=e[t]=[r,a]));r.push(o[2]=i);var n=a.p+a.u(t),s=new Error;a.l(n,(r=>{if(a.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+n+")",s.name="ChunkLoadError",s.type=i,s.request=n,o[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var o,i,[n,s,d]=r,l=0;if(n.some((t=>0!==e[t]))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(d)d(a)}for(t&&t(r);l<n.length;l++)i=n[l],a.o(e,i)&&e[i]&&e[i][0](),e[n[l]]=0},r=self.webpackChunk_name_Destination=self.webpackChunk_name_Destination||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var i={};function n(e){return window.pageParams={...window.pageParams,...e}}function s(e){n({mbox3rdPartyId:e})}function d(e){if(void 0===e)return{};const t={};for(const r in e)t[r]=e[r],Array.isArray(e[r])&&(t[r]=JSON.stringify(e[r]));return t}function l(e){window.pageParams={},window.targetGlobalSettings={cookieDomain:e.cookie_domain,enabled:!0},window.targetPageParams=function(){return window.pageParams}}a.d(i,{default:()=>p});const p=(u={name:"Adobe Target Web",slug:"actions-adobe-target-web",mode:"device",settings:{client_code:{label:"Client Code",description:"Your Adobe Target client code. To find your client code in Adobe Target, navigate to **Administration > Implementation**. The client code is shown at the top under Account Details.",required:!0,type:"string"},admin_number:{label:"Admin number",description:"Your Adobe Target admin number. To find your admin number, please follow the instructions in [Adobe Docs](https://experienceleague.adobe.com/docs/target/using/implement-target/client-side/at-js-implementation/deploy-at-js/implementing-target-without-a-tag-manager.html).",required:!0,type:"string"},version:{label:"ATJS Version",description:"The version of ATJS to use. Defaults to 2.8.0.",type:"string",choices:[{value:"2.8.0",label:"2.8.0"}],default:"2.8.0",required:!0},mbox_name:{label:"Mbox Name",description:"The name of the Adobe Target mbox to use. Defaults to `target-global-mbox`.",type:"string",required:!0,default:"target-global-mbox"},cookie_domain:{label:"Cookie Domain",description:"The domain from which you serve the mbox. Adobe Target recommends setting this value to your company's top-level domain.",type:"string",required:!0}},initialize:async({settings:e},t)=>{l(e);const r=`https://admin${e.admin_number}.testandtarget.omniture.com/admin/rest/v1/libraries/atjs/download?client=${e.client_code}&version=${e.version}`;return await t.loadScript(r),await t.resolveWhen((()=>Object.prototype.hasOwnProperty.call(window,"adobe")),100),window.adobe},actions:{upsertProfile:{title:"Upsert Profile",description:"Create or update a user profile in Adobe Target.",platform:"web",defaultSubscription:'type = "identify"',fields:{userId:{type:"string",description:"A user’s unique visitor ID. Setting an Mbox 3rd Party ID allows for updates via the Adobe Target Cloud Mode Destination. For more information, please see our Adobe Target Destination documentation.",label:"Mbox 3rd Party ID",default:{"@if":{exists:{"@path":"$.userId"},then:{"@path":"$.userId"},else:{"@path":"$.anonymousId"}}}},traits:{type:"object",description:"Profile parameters specific to a user. Please note, Adobe recommends that PII is hashed prior to sending to Adobe.",label:"Profile Attributes",defaultObjectUI:"keyvalue"}},perform:(e,t)=>{s(t.payload.userId),n({profile:{...t.payload.traits}});const r={mbox:t.settings.mbox_name,params:{event_name:"profile_update"}};e.target.trackEvent(r)}},triggerView:{title:"Trigger View",defaultSubscription:'type = "page"',description:"Send page-level data to Adobe Target.",platform:"web",fields:{viewName:{type:"string",description:"Name of the view or page.",label:"View Name",default:{"@path":"$.name"},required:!0},pageParameters:{type:"object",description:"Parameters specific to the view or page.",label:"Page Parameters",default:{"@path":"$.properties"}},sendNotification:{type:"boolean",description:"By default, notifications are sent to the Adobe Target backend for incrementing impression count.  If false, notifications are not sent for incrementing impression count. ",label:"Send Notifications to Adobe Target.",default:!0},userId:{type:"string",description:"A user’s unique visitor ID. Setting an Mbox 3rd Party ID allows for updates via the Adobe Target Cloud Mode Destination. For more information, please see our Adobe Target Destination documentation.",label:"Mbox 3rd Party ID",default:{"@if":{exists:{"@path":"$.userId"},then:{"@path":"$.userId"},else:{"@path":"$.anonymousId"}}}}},perform:(e,t)=>{const r=t.payload.sendNotification,o=t.payload.pageParameters;s(t.payload.userId),n({page:{...o}}),e.target.triggerView(t.payload.viewName,{page:r})}},trackEvent:{title:"Track Event",description:"Send user actions, such as clicks and conversions, to Adobe Target.",platform:"web",defaultSubscription:'type = "track"',fields:{type:{label:"Event Type",description:"The event type. Please ensure the type entered here is registered and available.",type:"string",default:"click"},eventName:{label:"Event Name",description:'This will be sent to Adobe Target as an event parameter called "event_name".',type:"string",default:{"@path":"$.event"}},properties:{label:"Event Parameters",description:"Parameters specific to the event.",type:"object",default:{"@path":"$.properties"}},userId:{type:"string",description:"A user’s unique visitor ID. Setting an Mbox 3rd Party ID allows for updates via the Adobe Target Cloud Mode Destination. For more information, please see our Adobe Target Destination documentation.",label:"Mbox 3rd Party ID",default:{"@if":{exists:{"@path":"$.userId"},then:{"@path":"$.userId"},else:{"@path":"$.anonymousId"}}}}},perform:(e,t)=>{const r=t.payload;s(r.userId);const o={...d(r.properties),event_name:r.eventName},a={mbox:t.settings.mbox_name,preventDefault:!0,params:o,type:r.type};e.target.trackEvent(a)}}}},async e=>(await a.e(688).then(a.bind(a,8688))).generatePlugins(u,e,e.subscriptions||[]));var u;return i=i.default})()}));
//# sourceMappingURL=17c6a8d0a7b35c36fb36.js.map