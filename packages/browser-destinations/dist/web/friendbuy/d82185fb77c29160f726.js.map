{"version":3,"file":"friendbuy/d82185fb77c29160f726.js","mappings":"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","sources":["webpack://[name]Destination/webpack/universalModuleDefinition","webpack://[name]Destination/webpack/runtime/load script","webpack://[name]Destination/../../node_modules/@lukeed/uuid/dist/index.js","webpack://[name]Destination/../../node_modules/@segment/fql-ts/dist/esm/constants.js","webpack://[name]Destination/../../node_modules/@segment/fql-ts/dist/esm/ast.js","webpack://[name]Destination/../../node_modules/@segment/fql-ts/dist/esm/unlexer.js","webpack://[name]Destination/../../node_modules/@segment/fql-ts/dist/esm/reader.js","webpack://[name]Destination/../../node_modules/@segment/fql-ts/dist/esm/lexer.js","webpack://[name]Destination/../../node_modules/@segment/fql-ts/dist/esm/strings.js","webpack://[name]Destination/../../node_modules/@segment/fql-ts/dist/esm/token.js","webpack://[name]Destination/../../node_modules/abort-controller/browser.js","webpack://[name]Destination/../../node_modules/aggregate-error/index.js","webpack://[name]Destination/../../node_modules/aggregate-error/node_modules/clean-stack/index.js","webpack://[name]Destination/../../node_modules/btoa-lite/btoa-browser.js","webpack://[name]Destination/../../node_modules/cross-fetch/dist/browser-ponyfill.js","webpack://[name]Destination/../../node_modules/dayjs/dayjs.min.js","webpack://[name]Destination/../../node_modules/events/events.js","webpack://[name]Destination/../../node_modules/fast-deep-equal/index.js","webpack://[name]Destination/../../node_modules/indent-string/index.js","webpack://[name]Destination/../../node_modules/uri-js/dist/es5/uri.all.js","webpack://[name]Destination/../actions-shared/dist/friendbuy/commonFields.js","webpack://[name]Destination/../actions-shared/dist/friendbuy/contextFields.js","webpack://[name]Destination/../actions-shared/dist/friendbuy/mapEvent.js","webpack://[name]Destination/../actions-shared/dist/friendbuy/sharedCustomEvent.js","webpack://[name]Destination/../actions-shared/dist/friendbuy/sharedCustomer.js","webpack://[name]Destination/../actions-shared/dist/friendbuy/sharedPurchase.js","webpack://[name]Destination/../actions-shared/dist/friendbuy/sharedSignUp.js","webpack://[name]Destination/../actions-shared/dist/friendbuy/util.js","webpack://[name]Destination/../actions-shared/dist/index.js","webpack://[name]Destination/../ajv-human-errors/dist/esm/aggregate-ajv-error.js","webpack://[name]Destination/../ajv-human-errors/dist/esm/formatting.js","webpack://[name]Destination/../ajv-human-errors/dist/esm/util.js","webpack://[name]Destination/../core/dist/cjs/arrify.js","webpack://[name]Destination/../core/dist/cjs/create-request-client.js","webpack://[name]Destination/../core/dist/cjs/create-test-event.js","webpack://[name]Destination/../core/dist/cjs/create-test-integration.js","webpack://[name]Destination/../core/dist/cjs/defaults.js","webpack://[name]Destination/../core/dist/cjs/destination-kit/action.js","webpack://[name]Destination/../core/dist/cjs/destination-kit/fields-to-jsonschema.js","webpack://[name]Destination/../core/dist/cjs/destination-kit/index.js","webpack://[name]Destination/../core/dist/cjs/destination-kit/parse-settings.js","webpack://[name]Destination/../core/dist/cjs/errors.js","webpack://[name]Destination/../core/dist/cjs/fetch.js","webpack://[name]Destination/../core/dist/cjs/get.js","webpack://[name]Destination/../core/dist/cjs/index.js","webpack://[name]Destination/../core/dist/cjs/map-values.js","webpack://[name]Destination/../core/dist/cjs/mapping-kit/index.js","webpack://[name]Destination/../core/dist/cjs/mapping-kit/is-directive.js","webpack://[name]Destination/../core/dist/cjs/mapping-kit/placeholders.js","webpack://[name]Destination/../core/dist/cjs/mapping-kit/validate.js","webpack://[name]Destination/../core/dist/cjs/middleware/after-response/prepare-headers.js","webpack://[name]Destination/../core/dist/cjs/middleware/after-response/prepare-response.js","webpack://[name]Destination/../core/dist/cjs/middleware/before-request/add-basic-auth-header.js","webpack://[name]Destination/../core/dist/cjs/omit.js","webpack://[name]Destination/../core/dist/cjs/real-type-of.js","webpack://[name]Destination/../core/dist/cjs/remove-empty-values.js","webpack://[name]Destination/../core/dist/cjs/remove-undefined.js","webpack://[name]Destination/../core/dist/cjs/request-client.js","webpack://[name]Destination/../core/dist/cjs/retry.js","webpack://[name]Destination/../core/dist/cjs/schema-validation.js","webpack://[name]Destination/../core/dist/cjs/time.js","webpack://[name]Destination/../core/dist/esm/get.js","webpack://[name]Destination/../core/dist/esm/mapping-kit/is-directive.js","webpack://[name]Destination/../core/dist/esm/mapping-kit/placeholders.js","webpack://[name]Destination/../core/dist/esm/remove-undefined.js","webpack://[name]Destination/../core/dist/esm/mapping-kit/validate.js","webpack://[name]Destination/../core/dist/esm/arrify.js","webpack://[name]Destination/../core/dist/esm/mapping-kit/index.js","webpack://[name]Destination/../core/dist/esm/real-type-of.js","webpack://[name]Destination/../core/node_modules/ajv-formats/dist/formats.js","webpack://[name]Destination/../core/node_modules/ajv-formats/dist/index.js","webpack://[name]Destination/../core/node_modules/ajv-formats/dist/limit.js","webpack://[name]Destination/../core/node_modules/ajv/dist/ajv.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/codegen/code.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/codegen/index.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/codegen/scope.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/errors.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/index.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/names.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/ref_error.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/resolve.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/rules.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/util.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/validate/applicability.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/validate/boolSchema.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/validate/dataType.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/validate/defaults.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/validate/index.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/validate/keyword.js","webpack://[name]Destination/../core/node_modules/ajv/dist/compile/validate/subschema.js","webpack://[name]Destination/../core/node_modules/ajv/dist/core.js","webpack://[name]Destination/../core/node_modules/ajv/dist/runtime/equal.js","webpack://[name]Destination/../core/node_modules/ajv/dist/runtime/ucs2length.js","webpack://[name]Destination/../core/node_modules/ajv/dist/runtime/validation_error.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/additionalItems.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/additionalProperties.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/allOf.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/anyOf.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/contains.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/dependencies.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/if.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/index.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/items.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/items2020.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/not.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/oneOf.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/patternProperties.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/prefixItems.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/properties.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/propertyNames.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/applicator/thenElse.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/code.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/core/id.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/core/index.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/core/ref.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/discriminator/index.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/discriminator/types.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/draft7.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/format/format.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/format/index.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/metadata.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/validation/const.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/validation/enum.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/validation/index.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/validation/limitItems.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/validation/limitLength.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/validation/limitNumber.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/validation/limitProperties.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/validation/multipleOf.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/validation/pattern.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/validation/required.js","webpack://[name]Destination/../core/node_modules/ajv/dist/vocabularies/validation/uniqueItems.js","webpack://[name]Destination/../core/node_modules/json-schema-traverse/index.js","webpack://[name]Destination/../destination-subscriptions/dist/cjs/generate-fql.js","webpack://[name]Destination/../destination-subscriptions/dist/cjs/get.js","webpack://[name]Destination/../destination-subscriptions/dist/cjs/index.js","webpack://[name]Destination/../destination-subscriptions/dist/cjs/parse-fql.js","webpack://[name]Destination/../destination-subscriptions/dist/cjs/types.js","webpack://[name]Destination/../destination-subscriptions/dist/cjs/validate.js","webpack://[name]Destination/../../node_modules/ts-custom-error/dist/custom-error.mjs","webpack://[name]Destination/webpack/bootstrap","webpack://[name]Destination/webpack/runtime/compat get default export","webpack://[name]Destination/webpack/runtime/define property getters","webpack://[name]Destination/webpack/runtime/ensure chunk","webpack://[name]Destination/webpack/runtime/get javascript chunk filename","webpack://[name]Destination/webpack/runtime/global","webpack://[name]Destination/webpack/runtime/hasOwnProperty shorthand","webpack://[name]Destination/webpack/runtime/make namespace object","webpack://[name]Destination/webpack/runtime/publicPath","webpack://[name]Destination/webpack/runtime/jsonp chunk loading","webpack://[name]Destination/../core/dist/esm/middleware/before-request/add-basic-auth-header.js","webpack://[name]Destination/../core/dist/esm/middleware/after-response/prepare-headers.js","webpack://[name]Destination/../core/dist/esm/middleware/after-response/prepare-response.js","webpack://[name]Destination/../core/dist/esm/fetch.js","webpack://[name]Destination/../core/dist/esm/request-client.js","webpack://[name]Destination/../core/dist/esm/create-request-client.js","webpack://[name]Destination/../core/dist/esm/schema-validation.js","webpack://[name]Destination/../../node_modules/@lukeed/uuid/dist/index.mjs","webpack://[name]Destination/../core/dist/esm/defaults.js","webpack://[name]Destination/./src/destinations/friendbuy/trackCustomer/index.ts","webpack://[name]Destination/./src/destinations/friendbuy/trackPurchase/index.ts","webpack://[name]Destination/./src/destinations/friendbuy/trackSignUp/index.ts","webpack://[name]Destination/./src/destinations/friendbuy/trackPage/index.ts","webpack://[name]Destination/./src/destinations/friendbuy/trackCustomEvent/index.ts","webpack://[name]Destination/./src/destinations/friendbuy/index.ts","webpack://[name]Destination/./src/runtime/shim.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"friendbuyDestination\"] = factory();\n\telse\n\t\troot[\"friendbuyDestination\"] = factory();\n})(self, function() {\nreturn ","var inProgress = {};\nvar dataWebpackPrefix = \"[name]Destination:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","var IDX=256, HEX=[], BUFFER;\nwhile (IDX--) HEX[IDX] = (IDX + 256).toString(16).substring(1);\n\nfunction v4() {\n\tvar i=0, num, out='';\n\n\tif (!BUFFER || ((IDX + 16) > 256)) {\n\t\tBUFFER = Array(i=256);\n\t\twhile (i--) BUFFER[i] = 256 * Math.random() | 0;\n\t\ti = IDX = 0;\n\t}\n\n\tfor (; i < 16; i++) {\n\t\tnum = BUFFER[IDX + i];\n\t\tif (i==6) out += HEX[num & 15 | 64];\n\t\telse if (i==8) out += HEX[num & 63 | 128];\n\t\telse out += HEX[num];\n\n\t\tif (i & 1 && i > 1 && i < 11) out += '-';\n\t}\n\n\tIDX++;\n\treturn out;\n}\n\nexports.v4 = v4;","export const EOS_FLAG = '-1';\n//# sourceMappingURL=constants.js.map","import { t, TokenType, isToken } from './token';\nexport var AbstractSyntaxType;\n(function (AbstractSyntaxType) {\n    AbstractSyntaxType[\"ROOT\"] = \"root\";\n    AbstractSyntaxType[\"EXPR\"] = \"expr\";\n    AbstractSyntaxType[\"PATH\"] = \"path\";\n    AbstractSyntaxType[\"FUNC\"] = \"func\";\n    AbstractSyntaxType[\"ERR\"] = \"err\";\n    AbstractSyntaxType[\"OPERATOR\"] = \"operator\";\n    AbstractSyntaxType[\"CONDITIONAL\"] = \"conditional\";\n    AbstractSyntaxType[\"STATEMENT\"] = \"statement\";\n})(AbstractSyntaxType || (AbstractSyntaxType = {}));\nexport function isASTree(arg) {\n    return isASTNode(arg) || isToken(arg);\n}\nexport function isASTNode(arg) {\n    return arg.children !== undefined;\n}\nfunction newNode(type) {\n    return { children: [], type };\n}\nexport class ParserError extends Error {\n    constructor(message) {\n        super(message);\n        this.message = message;\n        this.name = 'LexerError';\n        this.stack = new Error().stack;\n    }\n}\nexport default function ast(tokens) {\n    try {\n        // we .slice() here to avoid destroying the array\n        return { node: new Parser(tokens.slice()).parse() };\n    }\n    catch (error) {\n        return {\n            node: newNode(AbstractSyntaxType.ERR),\n            error\n        };\n    }\n}\nexport function astToTokens(node) {\n    const tokens = traverseAstForTokens(node);\n    // AST doesn't record the EOS, so we add it back\n    tokens.push(t.EOS());\n    return tokens;\n}\nfunction formatToken(token) {\n    switch (token.type) {\n        case TokenType.EOS:\n            return ''; // don't show EOS tokens\n        case TokenType.Conditional:\n            // 'or' and 'and' needs spaces to avoid converting things to:\n            // `ortype = \"hello\"` instead of `or type = \"hello\"`\n            return ' ' + token.value + ' ';\n        case TokenType.Operator:\n            // Operators are formatted with spaces for easier reading\n            // prefer `type = \"hello\"` to `type=\"hello\"`\n            return ' ' + token.value + ' ';\n        default:\n            return token.value;\n    }\n}\nexport function astToString(node) {\n    return astToTokens(node)\n        .map(formatToken)\n        .join('');\n}\nfunction interleave(array, thing) {\n    return [].concat(...array.map(obj => [obj, thing])).slice(0, -1);\n}\n// AST strips away parentheses and commas,\n// add them back for token representation.\nfunction traverseFunctionNodeForTokens(func) {\n    const [functionIdentifier, ...operands] = func.children;\n    let operandTokens = operands.map(operand => {\n        if ('children' in operand) {\n            return traverseAstForTokens(operand);\n        }\n        return operand;\n    });\n    operandTokens = interleave(operandTokens, t.Comma());\n    const flattenedOperandTokens = [].concat(...operandTokens);\n    return [\n        functionIdentifier,\n        t.ParenLeft(),\n        ...flattenedOperandTokens,\n        t.ParenRight()\n    ];\n}\nfunction traverseAstForTokens(tree) {\n    let tokens = [];\n    for (const child of tree.children) {\n        if (isASTNode(child)) {\n            if (child.type === 'func') {\n                const moreTokens = traverseFunctionNodeForTokens(child);\n                tokens = tokens.concat(moreTokens);\n            }\n            else {\n                const moreTokens = traverseAstForTokens(child);\n                tokens = tokens.concat(moreTokens);\n            }\n        }\n        else if (isToken(child)) {\n            tokens.push(child);\n        }\n    }\n    return tokens;\n}\nexport class Parser {\n    constructor(tokens) {\n        this.queue = tokens;\n    }\n    parse() {\n        const node = newNode(AbstractSyntaxType.ROOT);\n        node.children.push(this.statement());\n        while (this.peek().type === TokenType.Conditional || this.peek().type === TokenType.EOS) {\n            if (this.peek().type === TokenType.EOS) {\n                return node;\n            }\n            node.children.push(this.conditional());\n            node.children.push(this.statement());\n        }\n        // Future versions could get better error handling here\n        // by passing in the AST up to this point, converting it\n        // back to tokens, unlexing those tokens, and then using\n        // where it stopped to signal to the user where the bug is\n        throw new ParserError(`Unexpected token of type '${this.peek().type}' and value '${this.peek().value}'.`);\n    }\n    statement() {\n        const node = newNode(AbstractSyntaxType.STATEMENT);\n        const expr = this.expr();\n        node.children.push(expr);\n        if (this.peek().type === TokenType.EOS) {\n            return node;\n        }\n        if (this.peek().type === TokenType.Operator) {\n            node.children.push(this.operator());\n            node.children.push(this.expr());\n            return node;\n        }\n        const [firstChild] = expr.children;\n        const exprIsFunc = firstChild && firstChild.type === AbstractSyntaxType.FUNC;\n        if (exprIsFunc && this.peek().type === TokenType.Conditional) {\n            return node;\n        }\n        throw new ParserError(`Unexpected token in statement: '${this.peek()}'`);\n    }\n    // Wrapped in a leaf so we get a clear ordering\n    // when parsing\n    conditional() {\n        const node = newNode(AbstractSyntaxType.CONDITIONAL);\n        node.children.push(this.next());\n        return node;\n    }\n    // We wrap the operator in a node instead\n    // of a leaf so we get clear ordering\n    operator() {\n        const node = newNode(AbstractSyntaxType.OPERATOR);\n        node.children.push(this.next());\n        return node;\n    }\n    expr() {\n        const node = newNode(AbstractSyntaxType.EXPR);\n        const upcoming = this.peek();\n        // Strings\n        if (upcoming.type === TokenType.String) {\n            node.children.push(this.next());\n            return node;\n        }\n        // Numbers\n        if (upcoming.type === TokenType.Number) {\n            node.children.push(this.next());\n            return node;\n        }\n        // Null\n        if (upcoming.type === TokenType.Null) {\n            node.children.push(this.next());\n            return node;\n        }\n        // Paths or functions\n        if (upcoming.type === TokenType.Ident) {\n            node.children.push(this.pathOrFunc(this.next()));\n            return node;\n        }\n        // Lists\n        if (upcoming.type === TokenType.BrackLeft) {\n            node.children.push(this.list());\n            return node;\n        }\n        // Unrecognized tokens\n        throw new ParserError(`Unsupported or unrecognized token: ${upcoming}`);\n    }\n    // things like `message.event` or `contains(...)`\n    pathOrFunc(previous) {\n        const nextToken = this.peek();\n        if (nextToken.type === TokenType.ParenLeft) {\n            return this.func(previous);\n        }\n        return this.path(previous);\n    }\n    path(previous) {\n        const node = newNode(AbstractSyntaxType.PATH);\n        node.children.push(previous);\n        while (this.peek().type === TokenType.Ident || this.peek().type === TokenType.Dot) {\n            node.children.push(this.next());\n        }\n        return node;\n    }\n    func(previous) {\n        const supportedFuncs = ['contains', 'match'];\n        if (!(previous.type === 'ident' && supportedFuncs.indexOf(previous.value) !== -1)) {\n            throw new Error(`Function not supported: ${previous.value}`);\n        }\n        const node = newNode(AbstractSyntaxType.FUNC);\n        node.children.push(previous);\n        const leftParens = this.next();\n        if (leftParens.type !== TokenType.ParenLeft) {\n            throw new Error(`Unexpected token in function: \"${leftParens.value}\"`);\n        }\n        // Left operand can be a string or path.\n        const leftOperand = newNode(AbstractSyntaxType.EXPR);\n        const upcoming = this.peek();\n        if (upcoming.type === TokenType.String) {\n            leftOperand.children.push(this.next());\n        }\n        else if (upcoming.type === TokenType.Ident) {\n            leftOperand.children.push(this.path(this.next()));\n        }\n        else {\n            throw new Error(`Unexpected token in function: \"${upcoming.value}\"`);\n        }\n        node.children.push(leftOperand);\n        const comma = this.next();\n        if (comma.type !== TokenType.Comma) {\n            throw new Error(`Unexpected token in function: \"${comma.value}\"`);\n        }\n        const substring = this.next();\n        if (substring.type !== TokenType.String) {\n            throw new Error(`Unexpected token in function: \"${substring.value}\"`);\n        }\n        const substringNode = newNode(AbstractSyntaxType.EXPR);\n        substringNode.children.push(substring);\n        node.children.push(substringNode);\n        const rightParens = this.next();\n        if (rightParens.type !== TokenType.ParenRight) {\n            throw new Error(`Unexpected token in function: ${rightParens.value}`);\n        }\n        return node;\n    }\n    list() {\n        throw new ParserError(` list Not yet supported`);\n    }\n    peek() {\n        if (this.queue.length > 0) {\n            return this.queue[0];\n        }\n        return t.EOS();\n    }\n    next() {\n        const upcoming = this.peek();\n        if (upcoming.type !== TokenType.EOS) {\n            return this.queue.shift();\n        }\n        return t.EOS();\n    }\n}\n//# sourceMappingURL=ast.js.map","import { TokenType } from './token';\nimport { isIdent } from './strings';\nexport class UnlexerError extends Error {\n    constructor(message) {\n        super(message);\n        this.message = message;\n        this.name = 'UnlexerError';\n        this.stack = new Error().stack;\n    }\n}\nexport default function unlex(tokens) {\n    let str = '';\n    for (let i = 0; i < tokens.length; i++) {\n        const token = tokens[i];\n        // Break if we hit an EOS\n        if (token.type === TokenType.EOS) {\n            break;\n        }\n        if (token.type === TokenType.Err) {\n            return {\n                code: str,\n                error: new UnlexerError(`Unlexing hit an error with message: \"${token.value}\"`)\n            };\n        }\n        // Don't add unecessary spaces to dots\n        if (token.type === TokenType.Dot) {\n            str += token.value;\n            continue;\n        }\n        // Add a space, but not after dots\n        if (i > 0 && tokens[i - 1].type !== TokenType.Dot) {\n            str += ' ';\n        }\n        if (token.type === TokenType.Ident) {\n            str += escape(token.value);\n        }\n        else {\n            str += token.value;\n        }\n    }\n    return { code: str.trim() };\n}\nfunction escape(str) {\n    let escaped = '';\n    for (const c of str) {\n        if (!isIdent(c) || c === '\\\\') {\n            escaped += '\\\\';\n        }\n        escaped += c;\n    }\n    return escaped;\n}\n//# sourceMappingURL=unlexer.js.map","export default class Reader {\n    constructor(code) {\n        this.code = code;\n        this.position = 0;\n    }\n    forward() {\n        if (this.code.length === this.position) {\n            return { char: '', isEOS: true };\n        }\n        const char = this.code.charAt(this.position);\n        this.position += 1;\n        return {\n            char,\n            isEOS: false\n        };\n    }\n    backward() {\n        if (this.position === 0) {\n            throw new RangeError();\n        }\n        const char = this.code.charAt(this.position);\n        this.position -= 1;\n        return {\n            char,\n            isEOS: false\n        };\n    }\n    getPosition() {\n        return this.position;\n    }\n}\n//# sourceMappingURL=reader.js.map","import Reader from './reader';\nimport { t } from './token';\nimport { EOS_FLAG } from './constants';\nimport { isNewLine, isAlpha, isTerminator, isIdent, isWhitespace, isNumber } from './strings';\nconst MAXIMUM_INDENT_LENGTH = 100000; // bug catcher\nconst MAXIMUM_NUMBER_LENGTH = 100000;\nconst MAXIMUM_STRING_LENGTH = 100000;\nexport class LexerError extends Error {\n    constructor(message, cursor) {\n        super(message);\n        this.message = message;\n        this.name = 'LexerError';\n        this.stack = new Error().stack;\n        this.cursor = cursor;\n    }\n}\n/**\n * Converts FQL code into tokens.\n * @param code the FQL code to convert\n * @throws LexerError if something goes wrong\n */\nexport default function lex(code) {\n    try {\n        const lexer = new Lexer(code);\n        return { tokens: lexer.lex() };\n    }\n    catch (error) {\n        return { tokens: [], error };\n    }\n}\nexport class Lexer {\n    constructor(code) {\n        this.reader = new Reader(code);\n        this.cursor = {\n            line: 0,\n            column: 0\n        };\n    }\n    lex() {\n        const tokens = [];\n        while (true) {\n            const { char, isEOS } = this.next();\n            if (isEOS) {\n                tokens.push(t.EOS());\n                return tokens;\n            }\n            if (isWhitespace(char)) {\n                continue;\n            }\n            if (char === '!') {\n                const nextChar = this.peek();\n                if (isAlpha(nextChar) || nextChar === '(') {\n                    tokens.push(t.Operator('!'));\n                    continue;\n                }\n            }\n            if (isAlpha(char) || char === '!' || char === '=' || char === '>' || char === '<' || char === '\\\\' || char === '_') {\n                tokens.push(this.lexOperatorOrConditional(char));\n                continue;\n            }\n            if (isNumber(char) || char === '-' || char === '+') {\n                tokens.push(this.lexNumber(char));\n                continue;\n            }\n            if (char === '\"' || char === '\\'') {\n                tokens.push(this.lexString(char));\n                continue;\n            }\n            if (char === '.') {\n                tokens.push(t.Dot());\n                continue;\n            }\n            if (char === '[') {\n                tokens.push(t.BrackLeft());\n                continue;\n            }\n            if (char === ']') {\n                tokens.push(t.BrackRight());\n                continue;\n            }\n            if (char === ',') {\n                tokens.push(t.Comma());\n                continue;\n            }\n            if (char === '(') {\n                tokens.push(t.ParenLeft());\n                continue;\n            }\n            if (char === ')') {\n                tokens.push(t.ParenRight());\n                continue;\n            }\n            throw new LexerError(`invalid character \"${char}\"`, this.cursor);\n        }\n    }\n    lexString(openQuote) {\n        let str = '';\n        // Looking for closing string of same type of quote (single or double)\n        while (this.peek() !== openQuote) {\n            const { char, isEOS } = this.next();\n            str += char;\n            if (isEOS) {\n                throw new LexerError('unterminated string', this.cursor);\n            }\n            if (str.length >= MAXIMUM_STRING_LENGTH) {\n                throw new LexerError('unreasonable string length', this.cursor);\n            }\n        }\n        this.accept(openQuote); // Eat the last quote\n        return t.String(`${openQuote}${str}${openQuote}`);\n    }\n    lexNumber(previous) {\n        let str = '';\n        let comingUp = this.peek();\n        let isDecimal = false;\n        while (isNumber(comingUp) || comingUp === '.') {\n            const { char } = this.next();\n            str += char;\n            // Prevent multiple decimal points and stray decimal points\n            if (comingUp === '.') {\n                if (isTerminator(this.peek())) {\n                    throw new LexerError('unexpected terminator after decimal point', this.cursor);\n                }\n                if (isDecimal) {\n                    throw new LexerError('multiple decimal points in one number', this.cursor);\n                }\n                isDecimal = true;\n            }\n            // Prevent infinite loops\n            if (str.length >= MAXIMUM_NUMBER_LENGTH) {\n                throw new LexerError('unreasonable number length', this.cursor);\n            }\n            comingUp = this.peek();\n        }\n        return t.Number(previous + str);\n    }\n    lexOperatorOrConditional(previous) {\n        // =\n        if (previous === '=') {\n            return t.Operator('=');\n        }\n        // !=\n        if (previous === '!') {\n            if (this.accept('=')) {\n                return t.Operator('!=');\n            }\n            throw new LexerError(`expected '=' after '!', got '${this.peek()}'`, this.cursor);\n        }\n        // and\n        if (previous === 'a') {\n            if (this.accept('nd')) {\n                return t.Conditional('and');\n            }\n            return this.lexIdent(previous);\n        }\n        // or\n        if (previous === 'o') {\n            if (this.accept('r')) {\n                return t.Conditional('or');\n            }\n            return this.lexIdent(previous);\n        }\n        // null\n        if (previous === 'n') {\n            if (this.accept('ull')) {\n                return t.Null();\n            }\n            return this.lexIdent(previous);\n        }\n        // <=, >=, <, >\n        if (previous === '<' || previous === '>') {\n            if (this.accept('=')) {\n                return t.Operator(previous + '=');\n            }\n            return t.Operator(previous);\n        }\n        // all other idents\n        return this.lexIdent(previous);\n    }\n    lexIdent(previous) {\n        /* this function differs from the go implementation in that the go impl\n         hasn't yet advanced the character so will do a peek/next loop.  here we\n         have already done a next() so need to check to see if the first char is\n         an escape sequence */\n        let str = '';\n        let char = previous;\n        while (true) {\n            // Allow escaping of any character except EOS\n            if (char === '\\\\') {\n                if (this.peek() === EOS_FLAG) {\n                    throw new LexerError('expected character after escape character, got EOS', this.cursor);\n                }\n                char = this.next().char;\n            }\n            str += char;\n            if (str.length >= MAXIMUM_INDENT_LENGTH) {\n                throw new LexerError('unreasonable literal length', this.cursor);\n            }\n            if (!isIdent(this.peek())) {\n                break;\n            }\n            char = this.next().char;\n        }\n        const comingUp = this.peek();\n        if (!(comingUp === EOS_FLAG ||\n            isTerminator(comingUp) ||\n            comingUp === '.' ||\n            comingUp === '(' ||\n            comingUp === '=' ||\n            comingUp === '!')) {\n            throw new LexerError(`expected termination character after identifier, got ${comingUp}`, this.cursor);\n        }\n        return t.Ident(str);\n    }\n    /**\n     * Helpers\n     */\n    // Attempts to advance the string, rolls back and returns false if it can't.\n    accept(str) {\n        let chars = '';\n        for (const _ of str) {\n            const { char, isEOS } = this.next();\n            chars += char;\n            if (isEOS) {\n                return false;\n            }\n            if (isTerminator(char)) {\n                break;\n            }\n        }\n        if (str === chars && isTerminator(this.peek())) {\n            return true;\n        }\n        this.backup(chars.length);\n        return false;\n    }\n    next() {\n        const { char, isEOS } = this.reader.forward();\n        if (isNewLine(char)) {\n            this.cursor.line += 1;\n            this.cursor.column = 0;\n        }\n        else {\n            this.cursor.column += 1;\n        }\n        const c = isEOS ? EOS_FLAG : char;\n        return { char: c, isEOS };\n    }\n    // Looks at the next character and then goes back\n    peek() {\n        const { char, isEOS } = this.next();\n        if (!isEOS) {\n            this.backup(1);\n        }\n        return char;\n    }\n    backup(count) {\n        for (let n = count; n > 0; n--) {\n            let char;\n            try {\n                char = this.reader.backward().char;\n            }\n            catch (err) {\n                return;\n            }\n            if (isNewLine(char)) {\n                this.cursor.line -= 1;\n                this.cursor.column = 0;\n            }\n            else {\n                this.cursor.column -= 1;\n            }\n        }\n    }\n}\n//# sourceMappingURL=lexer.js.map","import { EOS_FLAG } from './constants';\nexport function isNewLine(c) {\n    return c === '\\r' || c === '\\n';\n}\nexport function isWhitespace(c) {\n    return c === ' ' || c === '\\t' || c === '\\n';\n}\nexport function isAlpha(c) {\n    return !!c.match(/[a-z]/i);\n}\nexport function isNumber(c) {\n    if (c === EOS_FLAG) {\n        return false;\n    }\n    return !isNaN(parseFloat(c)) && isFinite(parseInt(c, 10));\n}\nexport function isIdent(c) {\n    if (c === EOS_FLAG) {\n        return false;\n    }\n    return isAlpha(c) || isNumber(c) || c === '_' || c === '-' || c === '\\\\';\n}\nexport function isTerminator(c) {\n    return c === EOS_FLAG || isWhitespace(c) || c === ',' || c === ']' || c === ')';\n}\n//# sourceMappingURL=strings.js.map","// Loosely checks if something is a token type at runtime\nexport function isToken(arg) {\n    return arg.type !== undefined && typeof arg.value === 'string';\n}\n// All available tokens forms\nexport var TokenType;\n(function (TokenType) {\n    TokenType[\"Err\"] = \"err\";\n    TokenType[\"Ident\"] = \"ident\";\n    TokenType[\"Dot\"] = \"dot\";\n    TokenType[\"Operator\"] = \"operator\";\n    TokenType[\"Conditional\"] = \"conditional\";\n    TokenType[\"String\"] = \"string\";\n    TokenType[\"Number\"] = \"number\";\n    TokenType[\"Null\"] = \"null\";\n    TokenType[\"BrackLeft\"] = \"brackleft\";\n    TokenType[\"BrackRight\"] = \"brackright\";\n    TokenType[\"ParenLeft\"] = \"parenleft\";\n    TokenType[\"ParenRight\"] = \"parenright\";\n    TokenType[\"Comma\"] = \"comma\";\n    TokenType[\"EOS\"] = \"eos\";\n})(TokenType || (TokenType = {}));\n// Helper functions for creating typed Tokens\nexport const t = {\n    Err: () => {\n        return { type: TokenType.Err, value: 'err' };\n    },\n    Ident: (value) => {\n        return { type: TokenType.Ident, value };\n    },\n    Dot: () => {\n        return { type: TokenType.Dot, value: '.' };\n    },\n    Operator: (value) => {\n        return { type: TokenType.Operator, value };\n    },\n    Conditional: (value) => {\n        return { type: TokenType.Conditional, value };\n    },\n    String: (value) => {\n        return { type: TokenType.String, value };\n    },\n    Number: (value) => {\n        return { type: TokenType.Number, value };\n    },\n    Null: () => {\n        return { type: TokenType.Null, value: 'null' };\n    },\n    BrackLeft: () => {\n        return { type: TokenType.BrackLeft, value: '[' };\n    },\n    BrackRight: () => {\n        return { type: TokenType.BrackRight, value: ']' };\n    },\n    ParenLeft: () => {\n        return { type: TokenType.ParenLeft, value: '(' };\n    },\n    ParenRight: () => {\n        return { type: TokenType.ParenRight, value: ')' };\n    },\n    Comma: () => {\n        return { type: TokenType.Comma, value: ',' };\n    },\n    EOS: () => {\n        return { type: TokenType.EOS, value: 'eos' };\n    }\n};\n//# sourceMappingURL=token.js.map","/*globals self, window */\n\"use strict\"\n\n/*eslint-disable @mysticatea/prettier */\nconst { AbortController, AbortSignal } =\n    typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    /* otherwise */ undefined\n/*eslint-enable @mysticatea/prettier */\n\nmodule.exports = AbortController\nmodule.exports.AbortSignal = AbortSignal\nmodule.exports.default = AbortController\n","'use strict';\nconst indentString = require('indent-string');\nconst cleanStack = require('clean-stack');\n\nconst cleanInternalStack = stack => stack.replace(/\\s+at .*aggregate-error\\/index.js:\\d+:\\d+\\)?/g, '');\n\nclass AggregateError extends Error {\n\tconstructor(errors) {\n\t\tif (!Array.isArray(errors)) {\n\t\t\tthrow new TypeError(`Expected input to be an Array, got ${typeof errors}`);\n\t\t}\n\n\t\terrors = [...errors].map(error => {\n\t\t\tif (error instanceof Error) {\n\t\t\t\treturn error;\n\t\t\t}\n\n\t\t\tif (error !== null && typeof error === 'object') {\n\t\t\t\t// Handle plain error objects with message property and/or possibly other metadata\n\t\t\t\treturn Object.assign(new Error(error.message), error);\n\t\t\t}\n\n\t\t\treturn new Error(error);\n\t\t});\n\n\t\tlet message = errors\n\t\t\t.map(error => {\n\t\t\t\t// The `stack` property is not standardized, so we can't assume it exists\n\t\t\t\treturn typeof error.stack === 'string' ? cleanInternalStack(cleanStack(error.stack)) : String(error);\n\t\t\t})\n\t\t\t.join('\\n');\n\t\tmessage = '\\n' + indentString(message, 4);\n\t\tsuper(message);\n\n\t\tthis.name = 'AggregateError';\n\n\t\tObject.defineProperty(this, '_errors', {value: errors});\n\t}\n\n\t* [Symbol.iterator]() {\n\t\tfor (const error of this._errors) {\n\t\t\tyield error;\n\t\t}\n\t}\n}\n\nmodule.exports = AggregateError;\n","'use strict';\nconst os = require('os');\n\nconst extractPathRegex = /\\s+at.*(?:\\(|\\s)(.*)\\)?/;\nconst pathRegex = /^(?:(?:(?:node|(?:internal\\/[\\w/]*|.*node_modules\\/(?:babel-polyfill|pirates)\\/.*)?\\w+)\\.js:\\d+:\\d+)|native)/;\nconst homeDir = typeof os.homedir === 'undefined' ? '' : os.homedir();\n\nmodule.exports = (stack, options) => {\n\toptions = Object.assign({pretty: false}, options);\n\n\treturn stack.replace(/\\\\/g, '/')\n\t\t.split('\\n')\n\t\t.filter(line => {\n\t\t\tconst pathMatches = line.match(extractPathRegex);\n\t\t\tif (pathMatches === null || !pathMatches[1]) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst match = pathMatches[1];\n\n\t\t\t// Electron\n\t\t\tif (\n\t\t\t\tmatch.includes('.app/Contents/Resources/electron.asar') ||\n\t\t\t\tmatch.includes('.app/Contents/Resources/default_app.asar')\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn !pathRegex.test(match);\n\t\t})\n\t\t.filter(line => line.trim() !== '')\n\t\t.map(line => {\n\t\t\tif (options.pretty) {\n\t\t\t\treturn line.replace(extractPathRegex, (m, p1) => m.replace(p1, p1.replace(homeDir, '~')));\n\t\t\t}\n\n\t\t\treturn line;\n\t\t})\n\t\t.join('\\n');\n};\n","module.exports = function _btoa(str) {\n  return btoa(str)\n}\n","var global = typeof self !== 'undefined' ? self : this;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n}({}));\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",f=\"month\",h=\"quarter\",c=\"year\",d=\"date\",$=\"Invalid Date\",l=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},g={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},D=\"en\",v={};v[D]=M;var p=function(t){return t instanceof _},S=function(t,e,n){var r;if(!t)return D;if(\"string\"==typeof t)v[t]&&(r=t),e&&(v[t]=e,r=t);else{var i=t.name;v[i]=t,r=i}return!n&&r&&(D=r),r||!n&&D},w=function(t,e){if(p(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=g;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===$)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),$=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},l=function(t,e){return O.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,g=\"set\"+(this.$u?\"UTC\":\"\");switch(h){case c:return r?$(1,0):$(31,11);case f:return r?$(1,M):$(0,M+1);case o:var D=this.$locale().weekStart||0,v=(y<D?y+7:y)-D;return $(r?m-v:m+(6-v),M);case a:case d:return l(g+\"Hours\",0);case u:return l(g+\"Minutes\",1);case s:return l(g+\"Seconds\",2);case i:return l(g+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h=\"set\"+(this.$u?\"UTC\":\"\"),$=(n={},n[a]=h+\"Date\",n[d]=h+\"Date\",n[f]=h+\"Month\",n[c]=h+\"FullYear\",n[u]=h+\"Hours\",n[s]=h+\"Minutes\",n[i]=h+\"Seconds\",n[r]=h+\"Milliseconds\",n)[o],l=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[$](l),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,$=this;r=Number(r);var l=O.p(h),y=function(t){var e=w($);return O.w(e.date(e.date()+Math.round(t*r)),$)};if(l===f)return this.set(f,this.$M+r);if(l===c)return this.set(c,this.$y+r);if(l===a)return y(1);if(l===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[l]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||$;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].substr(0,s)},c=function(t){return O.s(s%12||12,t,\"0\")},d=n.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,\"0\"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,\"0\"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,\"0\"),s:String(this.$s),ss:O.s(this.$s,2,\"0\"),SSS:O.s(this.$ms,3,\"0\"),Z:i};return r.replace(y,(function(t,e){return e||l[t]||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,$){var l,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,g=this-M,D=O.m(this,M);return D=(l={},l[c]=D/12,l[f]=D,l[h]=D/3,l[o]=(g-m)/6048e5,l[a]=(g-m)/864e5,l[u]=g/n,l[s]=g/e,l[i]=g/t,l)[y]||g,$?D:O.a(D)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return v[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),b=_.prototype;return w.prototype=b,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",f],[\"$y\",c],[\"$D\",d]].forEach((function(t){b[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=v[D],w.Ls=v,w.p={},w}));","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","'use strict';\n\nmodule.exports = (string, count = 1, options) => {\n\toptions = {\n\t\tindent: ' ',\n\t\tincludeEmptyLines: false,\n\t\t...options\n\t};\n\n\tif (typeof string !== 'string') {\n\t\tthrow new TypeError(\n\t\t\t`Expected \\`input\\` to be a \\`string\\`, got \\`${typeof string}\\``\n\t\t);\n\t}\n\n\tif (typeof count !== 'number') {\n\t\tthrow new TypeError(\n\t\t\t`Expected \\`count\\` to be a \\`number\\`, got \\`${typeof count}\\``\n\t\t);\n\t}\n\n\tif (typeof options.indent !== 'string') {\n\t\tthrow new TypeError(\n\t\t\t`Expected \\`options.indent\\` to be a \\`string\\`, got \\`${typeof options.indent}\\``\n\t\t);\n\t}\n\n\tif (count === 0) {\n\t\treturn string;\n\t}\n\n\tconst regex = options.includeEmptyLines ? /^/gm : /^(?!\\s*$)/gm;\n\n\treturn string.replace(regex, options.indent.repeat(count));\n};\n","/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n\ttypeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t(factory((global.URI = global.URI || {})));\n}(this, (function (exports) { 'use strict';\n\nfunction merge() {\n    for (var _len = arguments.length, sets = Array(_len), _key = 0; _key < _len; _key++) {\n        sets[_key] = arguments[_key];\n    }\n\n    if (sets.length > 1) {\n        sets[0] = sets[0].slice(0, -1);\n        var xl = sets.length - 1;\n        for (var x = 1; x < xl; ++x) {\n            sets[x] = sets[x].slice(1, -1);\n        }\n        sets[xl] = sets[xl].slice(1);\n        return sets.join('');\n    } else {\n        return sets[0];\n    }\n}\nfunction subexp(str) {\n    return \"(?:\" + str + \")\";\n}\nfunction typeOf(o) {\n    return o === undefined ? \"undefined\" : o === null ? \"null\" : Object.prototype.toString.call(o).split(\" \").pop().split(\"]\").shift().toLowerCase();\n}\nfunction toUpperCase(str) {\n    return str.toUpperCase();\n}\nfunction toArray(obj) {\n    return obj !== undefined && obj !== null ? obj instanceof Array ? obj : typeof obj.length !== \"number\" || obj.split || obj.setInterval || obj.call ? [obj] : Array.prototype.slice.call(obj) : [];\n}\nfunction assign(target, source) {\n    var obj = target;\n    if (source) {\n        for (var key in source) {\n            obj[key] = source[key];\n        }\n    }\n    return obj;\n}\n\nfunction buildExps(isIRI) {\n    var ALPHA$$ = \"[A-Za-z]\",\n        CR$ = \"[\\\\x0D]\",\n        DIGIT$$ = \"[0-9]\",\n        DQUOTE$$ = \"[\\\\x22]\",\n        HEXDIG$$ = merge(DIGIT$$, \"[A-Fa-f]\"),\n        //case-insensitive\n    LF$$ = \"[\\\\x0A]\",\n        SP$$ = \"[\\\\x20]\",\n        PCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$)),\n        //expanded\n    GEN_DELIMS$$ = \"[\\\\:\\\\/\\\\?\\\\#\\\\[\\\\]\\\\@]\",\n        SUB_DELIMS$$ = \"[\\\\!\\\\$\\\\&\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\=]\",\n        RESERVED$$ = merge(GEN_DELIMS$$, SUB_DELIMS$$),\n        UCSCHAR$$ = isIRI ? \"[\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF]\" : \"[]\",\n        //subset, excludes bidi control characters\n    IPRIVATE$$ = isIRI ? \"[\\\\uE000-\\\\uF8FF]\" : \"[]\",\n        //subset\n    UNRESERVED$$ = merge(ALPHA$$, DIGIT$$, \"[\\\\-\\\\.\\\\_\\\\~]\", UCSCHAR$$),\n        SCHEME$ = subexp(ALPHA$$ + merge(ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\") + \"*\"),\n        USERINFO$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\")) + \"*\"),\n        DEC_OCTET$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"[1-9]\" + DIGIT$$) + \"|\" + DIGIT$$),\n        DEC_OCTET_RELAXED$ = subexp(subexp(\"25[0-5]\") + \"|\" + subexp(\"2[0-4]\" + DIGIT$$) + \"|\" + subexp(\"1\" + DIGIT$$ + DIGIT$$) + \"|\" + subexp(\"0?[1-9]\" + DIGIT$$) + \"|0?0?\" + DIGIT$$),\n        //relaxed parsing rules\n    IPV4ADDRESS$ = subexp(DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$ + \"\\\\.\" + DEC_OCTET_RELAXED$),\n        H16$ = subexp(HEXDIG$$ + \"{1,4}\"),\n        LS32$ = subexp(subexp(H16$ + \"\\\\:\" + H16$) + \"|\" + IPV4ADDRESS$),\n        IPV6ADDRESS1$ = subexp(subexp(H16$ + \"\\\\:\") + \"{6}\" + LS32$),\n        //                           6( h16 \":\" ) ls32\n    IPV6ADDRESS2$ = subexp(\"\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{5}\" + LS32$),\n        //                      \"::\" 5( h16 \":\" ) ls32\n    IPV6ADDRESS3$ = subexp(subexp(H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{4}\" + LS32$),\n        //[               h16 ] \"::\" 4( h16 \":\" ) ls32\n    IPV6ADDRESS4$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,1}\" + H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{3}\" + LS32$),\n        //[ *1( h16 \":\" ) h16 ] \"::\" 3( h16 \":\" ) ls32\n    IPV6ADDRESS5$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,2}\" + H16$) + \"?\\\\:\\\\:\" + subexp(H16$ + \"\\\\:\") + \"{2}\" + LS32$),\n        //[ *2( h16 \":\" ) h16 ] \"::\" 2( h16 \":\" ) ls32\n    IPV6ADDRESS6$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,3}\" + H16$) + \"?\\\\:\\\\:\" + H16$ + \"\\\\:\" + LS32$),\n        //[ *3( h16 \":\" ) h16 ] \"::\"    h16 \":\"   ls32\n    IPV6ADDRESS7$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,4}\" + H16$) + \"?\\\\:\\\\:\" + LS32$),\n        //[ *4( h16 \":\" ) h16 ] \"::\"              ls32\n    IPV6ADDRESS8$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,5}\" + H16$) + \"?\\\\:\\\\:\" + H16$),\n        //[ *5( h16 \":\" ) h16 ] \"::\"              h16\n    IPV6ADDRESS9$ = subexp(subexp(subexp(H16$ + \"\\\\:\") + \"{0,6}\" + H16$) + \"?\\\\:\\\\:\"),\n        //[ *6( h16 \":\" ) h16 ] \"::\"\n    IPV6ADDRESS$ = subexp([IPV6ADDRESS1$, IPV6ADDRESS2$, IPV6ADDRESS3$, IPV6ADDRESS4$, IPV6ADDRESS5$, IPV6ADDRESS6$, IPV6ADDRESS7$, IPV6ADDRESS8$, IPV6ADDRESS9$].join(\"|\")),\n        ZONEID$ = subexp(subexp(UNRESERVED$$ + \"|\" + PCT_ENCODED$) + \"+\"),\n        //RFC 6874\n    IPV6ADDRZ$ = subexp(IPV6ADDRESS$ + \"\\\\%25\" + ZONEID$),\n        //RFC 6874\n    IPV6ADDRZ_RELAXED$ = subexp(IPV6ADDRESS$ + subexp(\"\\\\%25|\\\\%(?!\" + HEXDIG$$ + \"{2})\") + ZONEID$),\n        //RFC 6874, with relaxed parsing rules\n    IPVFUTURE$ = subexp(\"[vV]\" + HEXDIG$$ + \"+\\\\.\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:]\") + \"+\"),\n        IP_LITERAL$ = subexp(\"\\\\[\" + subexp(IPV6ADDRZ_RELAXED$ + \"|\" + IPV6ADDRESS$ + \"|\" + IPVFUTURE$) + \"\\\\]\"),\n        //RFC 6874\n    REG_NAME$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$)) + \"*\"),\n        HOST$ = subexp(IP_LITERAL$ + \"|\" + IPV4ADDRESS$ + \"(?!\" + REG_NAME$ + \")\" + \"|\" + REG_NAME$),\n        PORT$ = subexp(DIGIT$$ + \"*\"),\n        AUTHORITY$ = subexp(subexp(USERINFO$ + \"@\") + \"?\" + HOST$ + subexp(\"\\\\:\" + PORT$) + \"?\"),\n        PCHAR$ = subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@]\")),\n        SEGMENT$ = subexp(PCHAR$ + \"*\"),\n        SEGMENT_NZ$ = subexp(PCHAR$ + \"+\"),\n        SEGMENT_NZ_NC$ = subexp(subexp(PCT_ENCODED$ + \"|\" + merge(UNRESERVED$$, SUB_DELIMS$$, \"[\\\\@]\")) + \"+\"),\n        PATH_ABEMPTY$ = subexp(subexp(\"\\\\/\" + SEGMENT$) + \"*\"),\n        PATH_ABSOLUTE$ = subexp(\"\\\\/\" + subexp(SEGMENT_NZ$ + PATH_ABEMPTY$) + \"?\"),\n        //simplified\n    PATH_NOSCHEME$ = subexp(SEGMENT_NZ_NC$ + PATH_ABEMPTY$),\n        //simplified\n    PATH_ROOTLESS$ = subexp(SEGMENT_NZ$ + PATH_ABEMPTY$),\n        //simplified\n    PATH_EMPTY$ = \"(?!\" + PCHAR$ + \")\",\n        PATH$ = subexp(PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\n        QUERY$ = subexp(subexp(PCHAR$ + \"|\" + merge(\"[\\\\/\\\\?]\", IPRIVATE$$)) + \"*\"),\n        FRAGMENT$ = subexp(subexp(PCHAR$ + \"|[\\\\/\\\\?]\") + \"*\"),\n        HIER_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$),\n        URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\n        RELATIVE_PART$ = subexp(subexp(\"\\\\/\\\\/\" + AUTHORITY$ + PATH_ABEMPTY$) + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$),\n        RELATIVE$ = subexp(RELATIVE_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\" + subexp(\"\\\\#\" + FRAGMENT$) + \"?\"),\n        URI_REFERENCE$ = subexp(URI$ + \"|\" + RELATIVE$),\n        ABSOLUTE_URI$ = subexp(SCHEME$ + \"\\\\:\" + HIER_PART$ + subexp(\"\\\\?\" + QUERY$) + \"?\"),\n        GENERIC_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n        RELATIVE_REF$ = \"^(){0}\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_NOSCHEME$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n        ABSOLUTE_REF$ = \"^(\" + SCHEME$ + \")\\\\:\" + subexp(subexp(\"\\\\/\\\\/(\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?)\") + \"?(\" + PATH_ABEMPTY$ + \"|\" + PATH_ABSOLUTE$ + \"|\" + PATH_ROOTLESS$ + \"|\" + PATH_EMPTY$ + \")\") + subexp(\"\\\\?(\" + QUERY$ + \")\") + \"?$\",\n        SAMEDOC_REF$ = \"^\" + subexp(\"\\\\#(\" + FRAGMENT$ + \")\") + \"?$\",\n        AUTHORITY_REF$ = \"^\" + subexp(\"(\" + USERINFO$ + \")@\") + \"?(\" + HOST$ + \")\" + subexp(\"\\\\:(\" + PORT$ + \")\") + \"?$\";\n    return {\n        NOT_SCHEME: new RegExp(merge(\"[^]\", ALPHA$$, DIGIT$$, \"[\\\\+\\\\-\\\\.]\"), \"g\"),\n        NOT_USERINFO: new RegExp(merge(\"[^\\\\%\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_HOST: new RegExp(merge(\"[^\\\\%\\\\[\\\\]\\\\:]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_PATH: new RegExp(merge(\"[^\\\\%\\\\/\\\\:\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_PATH_NOSCHEME: new RegExp(merge(\"[^\\\\%\\\\/\\\\@]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        NOT_QUERY: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\", IPRIVATE$$), \"g\"),\n        NOT_FRAGMENT: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, SUB_DELIMS$$, \"[\\\\:\\\\@\\\\/\\\\?]\"), \"g\"),\n        ESCAPE: new RegExp(merge(\"[^]\", UNRESERVED$$, SUB_DELIMS$$), \"g\"),\n        UNRESERVED: new RegExp(UNRESERVED$$, \"g\"),\n        OTHER_CHARS: new RegExp(merge(\"[^\\\\%]\", UNRESERVED$$, RESERVED$$), \"g\"),\n        PCT_ENCODED: new RegExp(PCT_ENCODED$, \"g\"),\n        IPV4ADDRESS: new RegExp(\"^(\" + IPV4ADDRESS$ + \")$\"),\n        IPV6ADDRESS: new RegExp(\"^\\\\[?(\" + IPV6ADDRESS$ + \")\" + subexp(subexp(\"\\\\%25|\\\\%(?!\" + HEXDIG$$ + \"{2})\") + \"(\" + ZONEID$ + \")\") + \"?\\\\]?$\") //RFC 6874, with relaxed parsing rules\n    };\n}\nvar URI_PROTOCOL = buildExps(false);\n\nvar IRI_PROTOCOL = buildExps(true);\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\n/** Highest positive signed 32-bit float value */\n\nvar maxInt = 2147483647; // aka. 0x7FFFFFFF or 2^31-1\n\n/** Bootstring parameters */\nvar base = 36;\nvar tMin = 1;\nvar tMax = 26;\nvar skew = 38;\nvar damp = 700;\nvar initialBias = 72;\nvar initialN = 128; // 0x80\nvar delimiter = '-'; // '\\x2D'\n\n/** Regular expressions */\nvar regexPunycode = /^xn--/;\nvar regexNonASCII = /[^\\0-\\x7E]/; // non-ASCII chars\nvar regexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g; // RFC 3490 separators\n\n/** Error messages */\nvar errors = {\n\t'overflow': 'Overflow: input needs wider integers to process',\n\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t'invalid-input': 'Invalid input'\n};\n\n/** Convenience shortcuts */\nvar baseMinusTMin = base - tMin;\nvar floor = Math.floor;\nvar stringFromCharCode = String.fromCharCode;\n\n/*--------------------------------------------------------------------------*/\n\n/**\n * A generic error utility function.\n * @private\n * @param {String} type The error type.\n * @returns {Error} Throws a `RangeError` with the applicable error message.\n */\nfunction error$1(type) {\n\tthrow new RangeError(errors[type]);\n}\n\n/**\n * A generic `Array#map` utility function.\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} callback The function that gets called for every array\n * item.\n * @returns {Array} A new array of values returned by the callback function.\n */\nfunction map(array, fn) {\n\tvar result = [];\n\tvar length = array.length;\n\twhile (length--) {\n\t\tresult[length] = fn(array[length]);\n\t}\n\treturn result;\n}\n\n/**\n * A simple `Array#map`-like wrapper to work with domain name strings or email\n * addresses.\n * @private\n * @param {String} domain The domain name or email address.\n * @param {Function} callback The function that gets called for every\n * character.\n * @returns {Array} A new string of characters returned by the callback\n * function.\n */\nfunction mapDomain(string, fn) {\n\tvar parts = string.split('@');\n\tvar result = '';\n\tif (parts.length > 1) {\n\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t// the local part (i.e. everything up to `@`) intact.\n\t\tresult = parts[0] + '@';\n\t\tstring = parts[1];\n\t}\n\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\tstring = string.replace(regexSeparators, '\\x2E');\n\tvar labels = string.split('.');\n\tvar encoded = map(labels, fn).join('.');\n\treturn result + encoded;\n}\n\n/**\n * Creates an array containing the numeric code points of each Unicode\n * character in the string. While JavaScript uses UCS-2 internally,\n * this function will convert a pair of surrogate halves (each of which\n * UCS-2 exposes as separate characters) into a single code point,\n * matching UTF-16.\n * @see `punycode.ucs2.encode`\n * @see <https://mathiasbynens.be/notes/javascript-encoding>\n * @memberOf punycode.ucs2\n * @name decode\n * @param {String} string The Unicode input string (UCS-2).\n * @returns {Array} The new array of code points.\n */\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\twhile (counter < length) {\n\t\tvar value = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// It's a high surrogate, and there is a next character.\n\t\t\tvar extra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) {\n\t\t\t\t// Low surrogate.\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// It's an unmatched surrogate; only append this code unit, in case the\n\t\t\t\t// next code unit is the high surrogate of a surrogate pair.\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n/**\n * Creates a string based on an array of numeric code points.\n * @see `punycode.ucs2.decode`\n * @memberOf punycode.ucs2\n * @name encode\n * @param {Array} codePoints The array of numeric code points.\n * @returns {String} The new Unicode string (UCS-2).\n */\nvar ucs2encode = function ucs2encode(array) {\n\treturn String.fromCodePoint.apply(String, toConsumableArray(array));\n};\n\n/**\n * Converts a basic code point into a digit/integer.\n * @see `digitToBasic()`\n * @private\n * @param {Number} codePoint The basic numeric code point value.\n * @returns {Number} The numeric value of a basic code point (for use in\n * representing integers) in the range `0` to `base - 1`, or `base` if\n * the code point does not represent a value.\n */\nvar basicToDigit = function basicToDigit(codePoint) {\n\tif (codePoint - 0x30 < 0x0A) {\n\t\treturn codePoint - 0x16;\n\t}\n\tif (codePoint - 0x41 < 0x1A) {\n\t\treturn codePoint - 0x41;\n\t}\n\tif (codePoint - 0x61 < 0x1A) {\n\t\treturn codePoint - 0x61;\n\t}\n\treturn base;\n};\n\n/**\n * Converts a digit/integer into a basic code point.\n * @see `basicToDigit()`\n * @private\n * @param {Number} digit The numeric value of a basic code point.\n * @returns {Number} The basic code point whose value (when used for\n * representing integers) is `digit`, which needs to be in the range\n * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n * used; else, the lowercase form is used. The behavior is undefined\n * if `flag` is non-zero and `digit` has no uppercase form.\n */\nvar digitToBasic = function digitToBasic(digit, flag) {\n\t//  0..25 map to ASCII a..z or A..Z\n\t// 26..35 map to ASCII 0..9\n\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n};\n\n/**\n * Bias adaptation function as per section 3.4 of RFC 3492.\n * https://tools.ietf.org/html/rfc3492#section-3.4\n * @private\n */\nvar adapt = function adapt(delta, numPoints, firstTime) {\n\tvar k = 0;\n\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\tdelta += floor(delta / numPoints);\n\tfor (; /* no initialization */delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\tdelta = floor(delta / baseMinusTMin);\n\t}\n\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n};\n\n/**\n * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n * symbols.\n * @memberOf punycode\n * @param {String} input The Punycode string of ASCII-only symbols.\n * @returns {String} The resulting string of Unicode symbols.\n */\nvar decode = function decode(input) {\n\t// Don't use UCS-2.\n\tvar output = [];\n\tvar inputLength = input.length;\n\tvar i = 0;\n\tvar n = initialN;\n\tvar bias = initialBias;\n\n\t// Handle the basic code points: let `basic` be the number of input code\n\t// points before the last delimiter, or `0` if there is none, then copy\n\t// the first basic code points to the output.\n\n\tvar basic = input.lastIndexOf(delimiter);\n\tif (basic < 0) {\n\t\tbasic = 0;\n\t}\n\n\tfor (var j = 0; j < basic; ++j) {\n\t\t// if it's not a basic code point\n\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\terror$1('not-basic');\n\t\t}\n\t\toutput.push(input.charCodeAt(j));\n\t}\n\n\t// Main decoding loop: start just after the last delimiter if any basic code\n\t// points were copied; start at the beginning otherwise.\n\n\tfor (var index = basic > 0 ? basic + 1 : 0; index < inputLength;) /* no final expression */{\n\n\t\t// `index` is the index of the next character to be consumed.\n\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t// which gets added to `i`. The overflow checking is easier\n\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t// value at the end to obtain `delta`.\n\t\tvar oldi = i;\n\t\tfor (var w = 1, k = base;; /* no condition */k += base) {\n\n\t\t\tif (index >= inputLength) {\n\t\t\t\terror$1('invalid-input');\n\t\t\t}\n\n\t\t\tvar digit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\terror$1('overflow');\n\t\t\t}\n\n\t\t\ti += digit * w;\n\t\t\tvar t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\n\t\t\tif (digit < t) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar baseMinusT = base - t;\n\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\terror$1('overflow');\n\t\t\t}\n\n\t\t\tw *= baseMinusT;\n\t\t}\n\n\t\tvar out = output.length + 1;\n\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t// incrementing `n` each time, so we'll fix that now:\n\t\tif (floor(i / out) > maxInt - n) {\n\t\t\terror$1('overflow');\n\t\t}\n\n\t\tn += floor(i / out);\n\t\ti %= out;\n\n\t\t// Insert `n` at position `i` of the output.\n\t\toutput.splice(i++, 0, n);\n\t}\n\n\treturn String.fromCodePoint.apply(String, output);\n};\n\n/**\n * Converts a string of Unicode symbols (e.g. a domain name label) to a\n * Punycode string of ASCII-only symbols.\n * @memberOf punycode\n * @param {String} input The string of Unicode symbols.\n * @returns {String} The resulting Punycode string of ASCII-only symbols.\n */\nvar encode = function encode(input) {\n\tvar output = [];\n\n\t// Convert the input in UCS-2 to an array of Unicode code points.\n\tinput = ucs2decode(input);\n\n\t// Cache the length.\n\tvar inputLength = input.length;\n\n\t// Initialize the state.\n\tvar n = initialN;\n\tvar delta = 0;\n\tvar bias = initialBias;\n\n\t// Handle the basic code points.\n\tvar _iteratorNormalCompletion = true;\n\tvar _didIteratorError = false;\n\tvar _iteratorError = undefined;\n\n\ttry {\n\t\tfor (var _iterator = input[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\tvar _currentValue2 = _step.value;\n\n\t\t\tif (_currentValue2 < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(_currentValue2));\n\t\t\t}\n\t\t}\n\t} catch (err) {\n\t\t_didIteratorError = true;\n\t\t_iteratorError = err;\n\t} finally {\n\t\ttry {\n\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t_iterator.return();\n\t\t\t}\n\t\t} finally {\n\t\t\tif (_didIteratorError) {\n\t\t\t\tthrow _iteratorError;\n\t\t\t}\n\t\t}\n\t}\n\n\tvar basicLength = output.length;\n\tvar handledCPCount = basicLength;\n\n\t// `handledCPCount` is the number of code points that have been handled;\n\t// `basicLength` is the number of basic code points.\n\n\t// Finish the basic string with a delimiter unless it's empty.\n\tif (basicLength) {\n\t\toutput.push(delimiter);\n\t}\n\n\t// Main encoding loop:\n\twhile (handledCPCount < inputLength) {\n\n\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t// larger one:\n\t\tvar m = maxInt;\n\t\tvar _iteratorNormalCompletion2 = true;\n\t\tvar _didIteratorError2 = false;\n\t\tvar _iteratorError2 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator2 = input[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t\t\t\tvar currentValue = _step2.value;\n\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow.\n\t\t} catch (err) {\n\t\t\t_didIteratorError2 = true;\n\t\t\t_iteratorError2 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t\t\t\t\t_iterator2.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError2) {\n\t\t\t\t\tthrow _iteratorError2;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar handledCPCountPlusOne = handledCPCount + 1;\n\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\terror$1('overflow');\n\t\t}\n\n\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\tn = m;\n\n\t\tvar _iteratorNormalCompletion3 = true;\n\t\tvar _didIteratorError3 = false;\n\t\tvar _iteratorError3 = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator3 = input[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t\t\t\tvar _currentValue = _step3.value;\n\n\t\t\t\tif (_currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror$1('overflow');\n\t\t\t\t}\n\t\t\t\tif (_currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer.\n\t\t\t\t\tvar q = delta;\n\t\t\t\t\tfor (var k = base;; /* no condition */k += base) {\n\t\t\t\t\t\tvar t = k <= bias ? tMin : k >= bias + tMax ? tMax : k - bias;\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar qMinusT = q - t;\n\t\t\t\t\t\tvar baseMinusT = base - t;\n\t\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0)));\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError3 = true;\n\t\t\t_iteratorError3 = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t\t\t\t\t_iterator3.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError3) {\n\t\t\t\t\tthrow _iteratorError3;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t++delta;\n\t\t++n;\n\t}\n\treturn output.join('');\n};\n\n/**\n * Converts a Punycode string representing a domain name or an email address\n * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n * it doesn't matter if you call it on a string that has already been\n * converted to Unicode.\n * @memberOf punycode\n * @param {String} input The Punycoded domain name or email address to\n * convert to Unicode.\n * @returns {String} The Unicode representation of the given Punycode\n * string.\n */\nvar toUnicode = function toUnicode(input) {\n\treturn mapDomain(input, function (string) {\n\t\treturn regexPunycode.test(string) ? decode(string.slice(4).toLowerCase()) : string;\n\t});\n};\n\n/**\n * Converts a Unicode string representing a domain name or an email address to\n * Punycode. Only the non-ASCII parts of the domain name will be converted,\n * i.e. it doesn't matter if you call it with a domain that's already in\n * ASCII.\n * @memberOf punycode\n * @param {String} input The domain name or email address to convert, as a\n * Unicode string.\n * @returns {String} The Punycode representation of the given domain name or\n * email address.\n */\nvar toASCII = function toASCII(input) {\n\treturn mapDomain(input, function (string) {\n\t\treturn regexNonASCII.test(string) ? 'xn--' + encode(string) : string;\n\t});\n};\n\n/*--------------------------------------------------------------------------*/\n\n/** Define the public API */\nvar punycode = {\n\t/**\n  * A string representing the current Punycode.js version number.\n  * @memberOf punycode\n  * @type String\n  */\n\t'version': '2.1.0',\n\t/**\n  * An object of methods to convert from JavaScript's internal character\n  * representation (UCS-2) to Unicode code points, and back.\n  * @see <https://mathiasbynens.be/notes/javascript-encoding>\n  * @memberOf punycode\n  * @type Object\n  */\n\t'ucs2': {\n\t\t'decode': ucs2decode,\n\t\t'encode': ucs2encode\n\t},\n\t'decode': decode,\n\t'encode': encode,\n\t'toASCII': toASCII,\n\t'toUnicode': toUnicode\n};\n\n/**\n * URI.js\n *\n * @fileoverview An RFC 3986 compliant, scheme extendable URI parsing/validating/resolving library for JavaScript.\n * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n * @see http://github.com/garycourt/uri-js\n */\n/**\n * Copyright 2011 Gary Court. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without modification, are\n * permitted provided that the following conditions are met:\n *\n *    1. Redistributions of source code must retain the above copyright notice, this list of\n *       conditions and the following disclaimer.\n *\n *    2. Redistributions in binary form must reproduce the above copyright notice, this list\n *       of conditions and the following disclaimer in the documentation and/or other materials\n *       provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY GARY COURT ``AS IS'' AND ANY EXPRESS OR IMPLIED\n * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND\n * FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL GARY COURT OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF\n * ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * The views and conclusions contained in the software and documentation are those of the\n * authors and should not be interpreted as representing official policies, either expressed\n * or implied, of Gary Court.\n */\nvar SCHEMES = {};\nfunction pctEncChar(chr) {\n    var c = chr.charCodeAt(0);\n    var e = void 0;\n    if (c < 16) e = \"%0\" + c.toString(16).toUpperCase();else if (c < 128) e = \"%\" + c.toString(16).toUpperCase();else if (c < 2048) e = \"%\" + (c >> 6 | 192).toString(16).toUpperCase() + \"%\" + (c & 63 | 128).toString(16).toUpperCase();else e = \"%\" + (c >> 12 | 224).toString(16).toUpperCase() + \"%\" + (c >> 6 & 63 | 128).toString(16).toUpperCase() + \"%\" + (c & 63 | 128).toString(16).toUpperCase();\n    return e;\n}\nfunction pctDecChars(str) {\n    var newStr = \"\";\n    var i = 0;\n    var il = str.length;\n    while (i < il) {\n        var c = parseInt(str.substr(i + 1, 2), 16);\n        if (c < 128) {\n            newStr += String.fromCharCode(c);\n            i += 3;\n        } else if (c >= 194 && c < 224) {\n            if (il - i >= 6) {\n                var c2 = parseInt(str.substr(i + 4, 2), 16);\n                newStr += String.fromCharCode((c & 31) << 6 | c2 & 63);\n            } else {\n                newStr += str.substr(i, 6);\n            }\n            i += 6;\n        } else if (c >= 224) {\n            if (il - i >= 9) {\n                var _c = parseInt(str.substr(i + 4, 2), 16);\n                var c3 = parseInt(str.substr(i + 7, 2), 16);\n                newStr += String.fromCharCode((c & 15) << 12 | (_c & 63) << 6 | c3 & 63);\n            } else {\n                newStr += str.substr(i, 9);\n            }\n            i += 9;\n        } else {\n            newStr += str.substr(i, 3);\n            i += 3;\n        }\n    }\n    return newStr;\n}\nfunction _normalizeComponentEncoding(components, protocol) {\n    function decodeUnreserved(str) {\n        var decStr = pctDecChars(str);\n        return !decStr.match(protocol.UNRESERVED) ? str : decStr;\n    }\n    if (components.scheme) components.scheme = String(components.scheme).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_SCHEME, \"\");\n    if (components.userinfo !== undefined) components.userinfo = String(components.userinfo).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_USERINFO, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.host !== undefined) components.host = String(components.host).replace(protocol.PCT_ENCODED, decodeUnreserved).toLowerCase().replace(protocol.NOT_HOST, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.path !== undefined) components.path = String(components.path).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(components.scheme ? protocol.NOT_PATH : protocol.NOT_PATH_NOSCHEME, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.query !== undefined) components.query = String(components.query).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_QUERY, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    if (components.fragment !== undefined) components.fragment = String(components.fragment).replace(protocol.PCT_ENCODED, decodeUnreserved).replace(protocol.NOT_FRAGMENT, pctEncChar).replace(protocol.PCT_ENCODED, toUpperCase);\n    return components;\n}\n\nfunction _stripLeadingZeros(str) {\n    return str.replace(/^0*(.*)/, \"$1\") || \"0\";\n}\nfunction _normalizeIPv4(host, protocol) {\n    var matches = host.match(protocol.IPV4ADDRESS) || [];\n\n    var _matches = slicedToArray(matches, 2),\n        address = _matches[1];\n\n    if (address) {\n        return address.split(\".\").map(_stripLeadingZeros).join(\".\");\n    } else {\n        return host;\n    }\n}\nfunction _normalizeIPv6(host, protocol) {\n    var matches = host.match(protocol.IPV6ADDRESS) || [];\n\n    var _matches2 = slicedToArray(matches, 3),\n        address = _matches2[1],\n        zone = _matches2[2];\n\n    if (address) {\n        var _address$toLowerCase$ = address.toLowerCase().split('::').reverse(),\n            _address$toLowerCase$2 = slicedToArray(_address$toLowerCase$, 2),\n            last = _address$toLowerCase$2[0],\n            first = _address$toLowerCase$2[1];\n\n        var firstFields = first ? first.split(\":\").map(_stripLeadingZeros) : [];\n        var lastFields = last.split(\":\").map(_stripLeadingZeros);\n        var isLastFieldIPv4Address = protocol.IPV4ADDRESS.test(lastFields[lastFields.length - 1]);\n        var fieldCount = isLastFieldIPv4Address ? 7 : 8;\n        var lastFieldsStart = lastFields.length - fieldCount;\n        var fields = Array(fieldCount);\n        for (var x = 0; x < fieldCount; ++x) {\n            fields[x] = firstFields[x] || lastFields[lastFieldsStart + x] || '';\n        }\n        if (isLastFieldIPv4Address) {\n            fields[fieldCount - 1] = _normalizeIPv4(fields[fieldCount - 1], protocol);\n        }\n        var allZeroFields = fields.reduce(function (acc, field, index) {\n            if (!field || field === \"0\") {\n                var lastLongest = acc[acc.length - 1];\n                if (lastLongest && lastLongest.index + lastLongest.length === index) {\n                    lastLongest.length++;\n                } else {\n                    acc.push({ index: index, length: 1 });\n                }\n            }\n            return acc;\n        }, []);\n        var longestZeroFields = allZeroFields.sort(function (a, b) {\n            return b.length - a.length;\n        })[0];\n        var newHost = void 0;\n        if (longestZeroFields && longestZeroFields.length > 1) {\n            var newFirst = fields.slice(0, longestZeroFields.index);\n            var newLast = fields.slice(longestZeroFields.index + longestZeroFields.length);\n            newHost = newFirst.join(\":\") + \"::\" + newLast.join(\":\");\n        } else {\n            newHost = fields.join(\":\");\n        }\n        if (zone) {\n            newHost += \"%\" + zone;\n        }\n        return newHost;\n    } else {\n        return host;\n    }\n}\nvar URI_PARSE = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:([^\\/?#@]*)@)?(\\[[^\\/?#\\]]+\\]|[^\\/?#:]*)(?:\\:(\\d*))?))?([^?#]*)(?:\\?([^#]*))?(?:#((?:.|\\n|\\r)*))?/i;\nvar NO_MATCH_IS_UNDEFINED = \"\".match(/(){0}/)[1] === undefined;\nfunction parse(uriString) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var components = {};\n    var protocol = options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL;\n    if (options.reference === \"suffix\") uriString = (options.scheme ? options.scheme + \":\" : \"\") + \"//\" + uriString;\n    var matches = uriString.match(URI_PARSE);\n    if (matches) {\n        if (NO_MATCH_IS_UNDEFINED) {\n            //store each component\n            components.scheme = matches[1];\n            components.userinfo = matches[3];\n            components.host = matches[4];\n            components.port = parseInt(matches[5], 10);\n            components.path = matches[6] || \"\";\n            components.query = matches[7];\n            components.fragment = matches[8];\n            //fix port number\n            if (isNaN(components.port)) {\n                components.port = matches[5];\n            }\n        } else {\n            //IE FIX for improper RegExp matching\n            //store each component\n            components.scheme = matches[1] || undefined;\n            components.userinfo = uriString.indexOf(\"@\") !== -1 ? matches[3] : undefined;\n            components.host = uriString.indexOf(\"//\") !== -1 ? matches[4] : undefined;\n            components.port = parseInt(matches[5], 10);\n            components.path = matches[6] || \"\";\n            components.query = uriString.indexOf(\"?\") !== -1 ? matches[7] : undefined;\n            components.fragment = uriString.indexOf(\"#\") !== -1 ? matches[8] : undefined;\n            //fix port number\n            if (isNaN(components.port)) {\n                components.port = uriString.match(/\\/\\/(?:.|\\n)*\\:(?:\\/|\\?|\\#|$)/) ? matches[4] : undefined;\n            }\n        }\n        if (components.host) {\n            //normalize IP hosts\n            components.host = _normalizeIPv6(_normalizeIPv4(components.host, protocol), protocol);\n        }\n        //determine reference type\n        if (components.scheme === undefined && components.userinfo === undefined && components.host === undefined && components.port === undefined && !components.path && components.query === undefined) {\n            components.reference = \"same-document\";\n        } else if (components.scheme === undefined) {\n            components.reference = \"relative\";\n        } else if (components.fragment === undefined) {\n            components.reference = \"absolute\";\n        } else {\n            components.reference = \"uri\";\n        }\n        //check for reference errors\n        if (options.reference && options.reference !== \"suffix\" && options.reference !== components.reference) {\n            components.error = components.error || \"URI is not a \" + options.reference + \" reference.\";\n        }\n        //find scheme handler\n        var schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\n        //check if scheme can't handle IRIs\n        if (!options.unicodeSupport && (!schemeHandler || !schemeHandler.unicodeSupport)) {\n            //if host component is a domain name\n            if (components.host && (options.domainHost || schemeHandler && schemeHandler.domainHost)) {\n                //convert Unicode IDN -> ASCII IDN\n                try {\n                    components.host = punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase());\n                } catch (e) {\n                    components.error = components.error || \"Host's domain name can not be converted to ASCII via punycode: \" + e;\n                }\n            }\n            //convert IRI -> URI\n            _normalizeComponentEncoding(components, URI_PROTOCOL);\n        } else {\n            //normalize encodings\n            _normalizeComponentEncoding(components, protocol);\n        }\n        //perform scheme specific parsing\n        if (schemeHandler && schemeHandler.parse) {\n            schemeHandler.parse(components, options);\n        }\n    } else {\n        components.error = components.error || \"URI can not be parsed.\";\n    }\n    return components;\n}\n\nfunction _recomposeAuthority(components, options) {\n    var protocol = options.iri !== false ? IRI_PROTOCOL : URI_PROTOCOL;\n    var uriTokens = [];\n    if (components.userinfo !== undefined) {\n        uriTokens.push(components.userinfo);\n        uriTokens.push(\"@\");\n    }\n    if (components.host !== undefined) {\n        //normalize IP hosts, add brackets and escape zone separator for IPv6\n        uriTokens.push(_normalizeIPv6(_normalizeIPv4(String(components.host), protocol), protocol).replace(protocol.IPV6ADDRESS, function (_, $1, $2) {\n            return \"[\" + $1 + ($2 ? \"%25\" + $2 : \"\") + \"]\";\n        }));\n    }\n    if (typeof components.port === \"number\" || typeof components.port === \"string\") {\n        uriTokens.push(\":\");\n        uriTokens.push(String(components.port));\n    }\n    return uriTokens.length ? uriTokens.join(\"\") : undefined;\n}\n\nvar RDS1 = /^\\.\\.?\\//;\nvar RDS2 = /^\\/\\.(\\/|$)/;\nvar RDS3 = /^\\/\\.\\.(\\/|$)/;\nvar RDS5 = /^\\/?(?:.|\\n)*?(?=\\/|$)/;\nfunction removeDotSegments(input) {\n    var output = [];\n    while (input.length) {\n        if (input.match(RDS1)) {\n            input = input.replace(RDS1, \"\");\n        } else if (input.match(RDS2)) {\n            input = input.replace(RDS2, \"/\");\n        } else if (input.match(RDS3)) {\n            input = input.replace(RDS3, \"/\");\n            output.pop();\n        } else if (input === \".\" || input === \"..\") {\n            input = \"\";\n        } else {\n            var im = input.match(RDS5);\n            if (im) {\n                var s = im[0];\n                input = input.slice(s.length);\n                output.push(s);\n            } else {\n                throw new Error(\"Unexpected dot segment condition\");\n            }\n        }\n    }\n    return output.join(\"\");\n}\n\nfunction serialize(components) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var protocol = options.iri ? IRI_PROTOCOL : URI_PROTOCOL;\n    var uriTokens = [];\n    //find scheme handler\n    var schemeHandler = SCHEMES[(options.scheme || components.scheme || \"\").toLowerCase()];\n    //perform scheme specific serialization\n    if (schemeHandler && schemeHandler.serialize) schemeHandler.serialize(components, options);\n    if (components.host) {\n        //if host component is an IPv6 address\n        if (protocol.IPV6ADDRESS.test(components.host)) {}\n        //TODO: normalize IPv6 address as per RFC 5952\n\n        //if host component is a domain name\n        else if (options.domainHost || schemeHandler && schemeHandler.domainHost) {\n                //convert IDN via punycode\n                try {\n                    components.host = !options.iri ? punycode.toASCII(components.host.replace(protocol.PCT_ENCODED, pctDecChars).toLowerCase()) : punycode.toUnicode(components.host);\n                } catch (e) {\n                    components.error = components.error || \"Host's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\n                }\n            }\n    }\n    //normalize encoding\n    _normalizeComponentEncoding(components, protocol);\n    if (options.reference !== \"suffix\" && components.scheme) {\n        uriTokens.push(components.scheme);\n        uriTokens.push(\":\");\n    }\n    var authority = _recomposeAuthority(components, options);\n    if (authority !== undefined) {\n        if (options.reference !== \"suffix\") {\n            uriTokens.push(\"//\");\n        }\n        uriTokens.push(authority);\n        if (components.path && components.path.charAt(0) !== \"/\") {\n            uriTokens.push(\"/\");\n        }\n    }\n    if (components.path !== undefined) {\n        var s = components.path;\n        if (!options.absolutePath && (!schemeHandler || !schemeHandler.absolutePath)) {\n            s = removeDotSegments(s);\n        }\n        if (authority === undefined) {\n            s = s.replace(/^\\/\\//, \"/%2F\"); //don't allow the path to start with \"//\"\n        }\n        uriTokens.push(s);\n    }\n    if (components.query !== undefined) {\n        uriTokens.push(\"?\");\n        uriTokens.push(components.query);\n    }\n    if (components.fragment !== undefined) {\n        uriTokens.push(\"#\");\n        uriTokens.push(components.fragment);\n    }\n    return uriTokens.join(\"\"); //merge tokens into a string\n}\n\nfunction resolveComponents(base, relative) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var skipNormalization = arguments[3];\n\n    var target = {};\n    if (!skipNormalization) {\n        base = parse(serialize(base, options), options); //normalize base components\n        relative = parse(serialize(relative, options), options); //normalize relative components\n    }\n    options = options || {};\n    if (!options.tolerant && relative.scheme) {\n        target.scheme = relative.scheme;\n        //target.authority = relative.authority;\n        target.userinfo = relative.userinfo;\n        target.host = relative.host;\n        target.port = relative.port;\n        target.path = removeDotSegments(relative.path || \"\");\n        target.query = relative.query;\n    } else {\n        if (relative.userinfo !== undefined || relative.host !== undefined || relative.port !== undefined) {\n            //target.authority = relative.authority;\n            target.userinfo = relative.userinfo;\n            target.host = relative.host;\n            target.port = relative.port;\n            target.path = removeDotSegments(relative.path || \"\");\n            target.query = relative.query;\n        } else {\n            if (!relative.path) {\n                target.path = base.path;\n                if (relative.query !== undefined) {\n                    target.query = relative.query;\n                } else {\n                    target.query = base.query;\n                }\n            } else {\n                if (relative.path.charAt(0) === \"/\") {\n                    target.path = removeDotSegments(relative.path);\n                } else {\n                    if ((base.userinfo !== undefined || base.host !== undefined || base.port !== undefined) && !base.path) {\n                        target.path = \"/\" + relative.path;\n                    } else if (!base.path) {\n                        target.path = relative.path;\n                    } else {\n                        target.path = base.path.slice(0, base.path.lastIndexOf(\"/\") + 1) + relative.path;\n                    }\n                    target.path = removeDotSegments(target.path);\n                }\n                target.query = relative.query;\n            }\n            //target.authority = base.authority;\n            target.userinfo = base.userinfo;\n            target.host = base.host;\n            target.port = base.port;\n        }\n        target.scheme = base.scheme;\n    }\n    target.fragment = relative.fragment;\n    return target;\n}\n\nfunction resolve(baseURI, relativeURI, options) {\n    var schemelessOptions = assign({ scheme: 'null' }, options);\n    return serialize(resolveComponents(parse(baseURI, schemelessOptions), parse(relativeURI, schemelessOptions), schemelessOptions, true), schemelessOptions);\n}\n\nfunction normalize(uri, options) {\n    if (typeof uri === \"string\") {\n        uri = serialize(parse(uri, options), options);\n    } else if (typeOf(uri) === \"object\") {\n        uri = parse(serialize(uri, options), options);\n    }\n    return uri;\n}\n\nfunction equal(uriA, uriB, options) {\n    if (typeof uriA === \"string\") {\n        uriA = serialize(parse(uriA, options), options);\n    } else if (typeOf(uriA) === \"object\") {\n        uriA = serialize(uriA, options);\n    }\n    if (typeof uriB === \"string\") {\n        uriB = serialize(parse(uriB, options), options);\n    } else if (typeOf(uriB) === \"object\") {\n        uriB = serialize(uriB, options);\n    }\n    return uriA === uriB;\n}\n\nfunction escapeComponent(str, options) {\n    return str && str.toString().replace(!options || !options.iri ? URI_PROTOCOL.ESCAPE : IRI_PROTOCOL.ESCAPE, pctEncChar);\n}\n\nfunction unescapeComponent(str, options) {\n    return str && str.toString().replace(!options || !options.iri ? URI_PROTOCOL.PCT_ENCODED : IRI_PROTOCOL.PCT_ENCODED, pctDecChars);\n}\n\nvar handler = {\n    scheme: \"http\",\n    domainHost: true,\n    parse: function parse(components, options) {\n        //report missing host\n        if (!components.host) {\n            components.error = components.error || \"HTTP URIs must have a host.\";\n        }\n        return components;\n    },\n    serialize: function serialize(components, options) {\n        var secure = String(components.scheme).toLowerCase() === \"https\";\n        //normalize the default port\n        if (components.port === (secure ? 443 : 80) || components.port === \"\") {\n            components.port = undefined;\n        }\n        //normalize the empty path\n        if (!components.path) {\n            components.path = \"/\";\n        }\n        //NOTE: We do not parse query strings for HTTP URIs\n        //as WWW Form Url Encoded query strings are part of the HTML4+ spec,\n        //and not the HTTP spec.\n        return components;\n    }\n};\n\nvar handler$1 = {\n    scheme: \"https\",\n    domainHost: handler.domainHost,\n    parse: handler.parse,\n    serialize: handler.serialize\n};\n\nfunction isSecure(wsComponents) {\n    return typeof wsComponents.secure === 'boolean' ? wsComponents.secure : String(wsComponents.scheme).toLowerCase() === \"wss\";\n}\n//RFC 6455\nvar handler$2 = {\n    scheme: \"ws\",\n    domainHost: true,\n    parse: function parse(components, options) {\n        var wsComponents = components;\n        //indicate if the secure flag is set\n        wsComponents.secure = isSecure(wsComponents);\n        //construct resouce name\n        wsComponents.resourceName = (wsComponents.path || '/') + (wsComponents.query ? '?' + wsComponents.query : '');\n        wsComponents.path = undefined;\n        wsComponents.query = undefined;\n        return wsComponents;\n    },\n    serialize: function serialize(wsComponents, options) {\n        //normalize the default port\n        if (wsComponents.port === (isSecure(wsComponents) ? 443 : 80) || wsComponents.port === \"\") {\n            wsComponents.port = undefined;\n        }\n        //ensure scheme matches secure flag\n        if (typeof wsComponents.secure === 'boolean') {\n            wsComponents.scheme = wsComponents.secure ? 'wss' : 'ws';\n            wsComponents.secure = undefined;\n        }\n        //reconstruct path from resource name\n        if (wsComponents.resourceName) {\n            var _wsComponents$resourc = wsComponents.resourceName.split('?'),\n                _wsComponents$resourc2 = slicedToArray(_wsComponents$resourc, 2),\n                path = _wsComponents$resourc2[0],\n                query = _wsComponents$resourc2[1];\n\n            wsComponents.path = path && path !== '/' ? path : undefined;\n            wsComponents.query = query;\n            wsComponents.resourceName = undefined;\n        }\n        //forbid fragment component\n        wsComponents.fragment = undefined;\n        return wsComponents;\n    }\n};\n\nvar handler$3 = {\n    scheme: \"wss\",\n    domainHost: handler$2.domainHost,\n    parse: handler$2.parse,\n    serialize: handler$2.serialize\n};\n\nvar O = {};\nvar isIRI = true;\n//RFC 3986\nvar UNRESERVED$$ = \"[A-Za-z0-9\\\\-\\\\.\\\\_\\\\~\" + (isIRI ? \"\\\\xA0-\\\\u200D\\\\u2010-\\\\u2029\\\\u202F-\\\\uD7FF\\\\uF900-\\\\uFDCF\\\\uFDF0-\\\\uFFEF\" : \"\") + \"]\";\nvar HEXDIG$$ = \"[0-9A-Fa-f]\"; //case-insensitive\nvar PCT_ENCODED$ = subexp(subexp(\"%[EFef]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%[89A-Fa-f]\" + HEXDIG$$ + \"%\" + HEXDIG$$ + HEXDIG$$) + \"|\" + subexp(\"%\" + HEXDIG$$ + HEXDIG$$)); //expanded\n//RFC 5322, except these symbols as per RFC 6068: @ : / ? # [ ] & ; =\n//const ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\#\\\\$\\\\%\\\\&\\\\'\\\\*\\\\+\\\\-\\\\/\\\\=\\\\?\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\";\n//const WSP$$ = \"[\\\\x20\\\\x09]\";\n//const OBS_QTEXT$$ = \"[\\\\x01-\\\\x08\\\\x0B\\\\x0C\\\\x0E-\\\\x1F\\\\x7F]\";  //(%d1-8 / %d11-12 / %d14-31 / %d127)\n//const QTEXT$$ = merge(\"[\\\\x21\\\\x23-\\\\x5B\\\\x5D-\\\\x7E]\", OBS_QTEXT$$);  //%d33 / %d35-91 / %d93-126 / obs-qtext\n//const VCHAR$$ = \"[\\\\x21-\\\\x7E]\";\n//const WSP$$ = \"[\\\\x20\\\\x09]\";\n//const OBS_QP$ = subexp(\"\\\\\\\\\" + merge(\"[\\\\x00\\\\x0D\\\\x0A]\", OBS_QTEXT$$));  //%d0 / CR / LF / obs-qtext\n//const FWS$ = subexp(subexp(WSP$$ + \"*\" + \"\\\\x0D\\\\x0A\") + \"?\" + WSP$$ + \"+\");\n//const QUOTED_PAIR$ = subexp(subexp(\"\\\\\\\\\" + subexp(VCHAR$$ + \"|\" + WSP$$)) + \"|\" + OBS_QP$);\n//const QUOTED_STRING$ = subexp('\\\\\"' + subexp(FWS$ + \"?\" + QCONTENT$) + \"*\" + FWS$ + \"?\" + '\\\\\"');\nvar ATEXT$$ = \"[A-Za-z0-9\\\\!\\\\$\\\\%\\\\'\\\\*\\\\+\\\\-\\\\^\\\\_\\\\`\\\\{\\\\|\\\\}\\\\~]\";\nvar QTEXT$$ = \"[\\\\!\\\\$\\\\%\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\-\\\\.0-9\\\\<\\\\>A-Z\\\\x5E-\\\\x7E]\";\nvar VCHAR$$ = merge(QTEXT$$, \"[\\\\\\\"\\\\\\\\]\");\nvar SOME_DELIMS$$ = \"[\\\\!\\\\$\\\\'\\\\(\\\\)\\\\*\\\\+\\\\,\\\\;\\\\:\\\\@]\";\nvar UNRESERVED = new RegExp(UNRESERVED$$, \"g\");\nvar PCT_ENCODED = new RegExp(PCT_ENCODED$, \"g\");\nvar NOT_LOCAL_PART = new RegExp(merge(\"[^]\", ATEXT$$, \"[\\\\.]\", '[\\\\\"]', VCHAR$$), \"g\");\nvar NOT_HFNAME = new RegExp(merge(\"[^]\", UNRESERVED$$, SOME_DELIMS$$), \"g\");\nvar NOT_HFVALUE = NOT_HFNAME;\nfunction decodeUnreserved(str) {\n    var decStr = pctDecChars(str);\n    return !decStr.match(UNRESERVED) ? str : decStr;\n}\nvar handler$4 = {\n    scheme: \"mailto\",\n    parse: function parse$$1(components, options) {\n        var mailtoComponents = components;\n        var to = mailtoComponents.to = mailtoComponents.path ? mailtoComponents.path.split(\",\") : [];\n        mailtoComponents.path = undefined;\n        if (mailtoComponents.query) {\n            var unknownHeaders = false;\n            var headers = {};\n            var hfields = mailtoComponents.query.split(\"&\");\n            for (var x = 0, xl = hfields.length; x < xl; ++x) {\n                var hfield = hfields[x].split(\"=\");\n                switch (hfield[0]) {\n                    case \"to\":\n                        var toAddrs = hfield[1].split(\",\");\n                        for (var _x = 0, _xl = toAddrs.length; _x < _xl; ++_x) {\n                            to.push(toAddrs[_x]);\n                        }\n                        break;\n                    case \"subject\":\n                        mailtoComponents.subject = unescapeComponent(hfield[1], options);\n                        break;\n                    case \"body\":\n                        mailtoComponents.body = unescapeComponent(hfield[1], options);\n                        break;\n                    default:\n                        unknownHeaders = true;\n                        headers[unescapeComponent(hfield[0], options)] = unescapeComponent(hfield[1], options);\n                        break;\n                }\n            }\n            if (unknownHeaders) mailtoComponents.headers = headers;\n        }\n        mailtoComponents.query = undefined;\n        for (var _x2 = 0, _xl2 = to.length; _x2 < _xl2; ++_x2) {\n            var addr = to[_x2].split(\"@\");\n            addr[0] = unescapeComponent(addr[0]);\n            if (!options.unicodeSupport) {\n                //convert Unicode IDN -> ASCII IDN\n                try {\n                    addr[1] = punycode.toASCII(unescapeComponent(addr[1], options).toLowerCase());\n                } catch (e) {\n                    mailtoComponents.error = mailtoComponents.error || \"Email address's domain name can not be converted to ASCII via punycode: \" + e;\n                }\n            } else {\n                addr[1] = unescapeComponent(addr[1], options).toLowerCase();\n            }\n            to[_x2] = addr.join(\"@\");\n        }\n        return mailtoComponents;\n    },\n    serialize: function serialize$$1(mailtoComponents, options) {\n        var components = mailtoComponents;\n        var to = toArray(mailtoComponents.to);\n        if (to) {\n            for (var x = 0, xl = to.length; x < xl; ++x) {\n                var toAddr = String(to[x]);\n                var atIdx = toAddr.lastIndexOf(\"@\");\n                var localPart = toAddr.slice(0, atIdx).replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_LOCAL_PART, pctEncChar);\n                var domain = toAddr.slice(atIdx + 1);\n                //convert IDN via punycode\n                try {\n                    domain = !options.iri ? punycode.toASCII(unescapeComponent(domain, options).toLowerCase()) : punycode.toUnicode(domain);\n                } catch (e) {\n                    components.error = components.error || \"Email address's domain name can not be converted to \" + (!options.iri ? \"ASCII\" : \"Unicode\") + \" via punycode: \" + e;\n                }\n                to[x] = localPart + \"@\" + domain;\n            }\n            components.path = to.join(\",\");\n        }\n        var headers = mailtoComponents.headers = mailtoComponents.headers || {};\n        if (mailtoComponents.subject) headers[\"subject\"] = mailtoComponents.subject;\n        if (mailtoComponents.body) headers[\"body\"] = mailtoComponents.body;\n        var fields = [];\n        for (var name in headers) {\n            if (headers[name] !== O[name]) {\n                fields.push(name.replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFNAME, pctEncChar) + \"=\" + headers[name].replace(PCT_ENCODED, decodeUnreserved).replace(PCT_ENCODED, toUpperCase).replace(NOT_HFVALUE, pctEncChar));\n            }\n        }\n        if (fields.length) {\n            components.query = fields.join(\"&\");\n        }\n        return components;\n    }\n};\n\nvar URN_PARSE = /^([^\\:]+)\\:(.*)/;\n//RFC 2141\nvar handler$5 = {\n    scheme: \"urn\",\n    parse: function parse$$1(components, options) {\n        var matches = components.path && components.path.match(URN_PARSE);\n        var urnComponents = components;\n        if (matches) {\n            var scheme = options.scheme || urnComponents.scheme || \"urn\";\n            var nid = matches[1].toLowerCase();\n            var nss = matches[2];\n            var urnScheme = scheme + \":\" + (options.nid || nid);\n            var schemeHandler = SCHEMES[urnScheme];\n            urnComponents.nid = nid;\n            urnComponents.nss = nss;\n            urnComponents.path = undefined;\n            if (schemeHandler) {\n                urnComponents = schemeHandler.parse(urnComponents, options);\n            }\n        } else {\n            urnComponents.error = urnComponents.error || \"URN can not be parsed.\";\n        }\n        return urnComponents;\n    },\n    serialize: function serialize$$1(urnComponents, options) {\n        var scheme = options.scheme || urnComponents.scheme || \"urn\";\n        var nid = urnComponents.nid;\n        var urnScheme = scheme + \":\" + (options.nid || nid);\n        var schemeHandler = SCHEMES[urnScheme];\n        if (schemeHandler) {\n            urnComponents = schemeHandler.serialize(urnComponents, options);\n        }\n        var uriComponents = urnComponents;\n        var nss = urnComponents.nss;\n        uriComponents.path = (nid || options.nid) + \":\" + nss;\n        return uriComponents;\n    }\n};\n\nvar UUID = /^[0-9A-Fa-f]{8}(?:\\-[0-9A-Fa-f]{4}){3}\\-[0-9A-Fa-f]{12}$/;\n//RFC 4122\nvar handler$6 = {\n    scheme: \"urn:uuid\",\n    parse: function parse(urnComponents, options) {\n        var uuidComponents = urnComponents;\n        uuidComponents.uuid = uuidComponents.nss;\n        uuidComponents.nss = undefined;\n        if (!options.tolerant && (!uuidComponents.uuid || !uuidComponents.uuid.match(UUID))) {\n            uuidComponents.error = uuidComponents.error || \"UUID is not valid.\";\n        }\n        return uuidComponents;\n    },\n    serialize: function serialize(uuidComponents, options) {\n        var urnComponents = uuidComponents;\n        //normalize UUID\n        urnComponents.nss = (uuidComponents.uuid || \"\").toLowerCase();\n        return urnComponents;\n    }\n};\n\nSCHEMES[handler.scheme] = handler;\nSCHEMES[handler$1.scheme] = handler$1;\nSCHEMES[handler$2.scheme] = handler$2;\nSCHEMES[handler$3.scheme] = handler$3;\nSCHEMES[handler$4.scheme] = handler$4;\nSCHEMES[handler$5.scheme] = handler$5;\nSCHEMES[handler$6.scheme] = handler$6;\n\nexports.SCHEMES = SCHEMES;\nexports.pctEncChar = pctEncChar;\nexports.pctDecChars = pctDecChars;\nexports.parse = parse;\nexports.removeDotSegments = removeDotSegments;\nexports.serialize = serialize;\nexports.resolveComponents = resolveComponents;\nexports.resolve = resolve;\nexports.normalize = normalize;\nexports.equal = equal;\nexports.escapeComponent = escapeComponent;\nexports.unescapeComponent = unescapeComponent;\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=uri.all.js.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.commonCustomerFields = void 0;\nfunction commonCustomerFields(fieldConfig) {\n    return {\n        customerId: {\n            label: 'Customer ID',\n            description: \"The user's customer ID.\",\n            type: 'string',\n            required: Boolean(fieldConfig.requireCustomerId),\n            default: {\n                '@if': {\n                    exists: { '@path': '$.properties.customerId' },\n                    then: { '@path': '$.properties.customerId' },\n                    else: { '@path': '$.userId' }\n                }\n            }\n        },\n        anonymousId: {\n            label: 'Anonymous ID',\n            description: \"The user's anonymous ID.\",\n            type: 'string',\n            required: false,\n            default: { '@path': '$.anonymousId' }\n        },\n        email: {\n            label: 'Email',\n            description: \"The user's email address.\",\n            type: 'string',\n            required: Boolean(fieldConfig.requireEmail),\n            default: { '@path': '$.properties.email' }\n        },\n        isNewCustomer: {\n            label: 'New Customer Flag',\n            description: 'Flag to indicate whether the user is a new customer.',\n            type: 'boolean',\n            required: false,\n            default: { '@path': '$.properties.isNewCustomer' }\n        },\n        loyaltyStatus: {\n            label: 'Loyalty Program Status',\n            description: 'The status of the user in your loyalty program. Valid values are \"in\", \"out\", or \"blocked\".',\n            type: 'string',\n            required: false,\n            default: { '@path': '$.properties.loyaltyStatus' }\n        },\n        firstName: {\n            label: 'First Name',\n            description: \"The user's given name.\",\n            type: 'string',\n            required: false,\n            default: { '@path': '$.properties.firstName' }\n        },\n        lastName: {\n            label: 'Last Name',\n            description: \"The user's surname.\",\n            type: 'string',\n            required: false,\n            default: { '@path': '$.properties.lastName' }\n        },\n        name: {\n            label: 'Name',\n            description: \"The user's full name.\",\n            type: 'string',\n            required: false,\n            default: { '@path': '$.properties.name' }\n        },\n        age: {\n            label: 'Age',\n            description: \"The user's age.\",\n            type: 'number',\n            required: false,\n            default: { '@path': '$.properties.age' }\n        },\n        birthday: {\n            label: 'Birthday',\n            description: 'The user\\'s birthday in the format \"YYYY-MM-DD\", or \"0000-MM-DD\" to omit the year.',\n            type: 'string',\n            format: 'date',\n            default: { '@path': '$.properties.birthday' }\n        }\n    };\n}\nexports.commonCustomerFields = commonCustomerFields;\n//# sourceMappingURL=commonFields.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.contextAttributes = exports.contextFields = void 0;\nexports.contextFields = {\n    pageUrl: {\n        label: 'Page URL',\n        description: 'The URL of the web page the event was generated on.',\n        type: 'string',\n        format: 'uri',\n        required: false,\n        default: { '@path': '$.context.page.url' }\n    },\n    pageTitle: {\n        label: 'Page Title',\n        description: 'The title of the web page the event was generated on.',\n        type: 'string',\n        required: false,\n        default: { '@path': '$.context.page.title' }\n    },\n    userAgent: {\n        label: 'User Agent',\n        description: \"The browser's User-Agent string.\",\n        type: 'string',\n        required: false,\n        default: { '@path': '$.context.userAgent' }\n    },\n    ipAddress: {\n        label: 'IP Address',\n        description: \"The users's IP address.\",\n        type: 'string',\n        required: false,\n        default: { '@path': '$.context.ip' }\n    }\n};\nfunction contextAttributes(context) {\n    return [\n        ['pageUrl', context.pageUrl],\n        ['pageTitle', context.pageTitle],\n        ['userAgent', context.userAgent],\n        ['ipAddress', context.ipAddress]\n    ];\n}\nexports.contextAttributes = contextAttributes;\n//# sourceMappingURL=contextFields.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringify = exports.mapEventHelper = exports.mapEvent = exports.DROP = exports.COPY = exports.ROOT = void 0;\nconst actions_core_1 = require(\"@segment/actions-core\");\nconst util_1 = require(\"./util\");\nexports.ROOT = Symbol('ROOT');\nexports.COPY = {};\nObject.freeze(exports.COPY);\nexports.DROP = Symbol('DROP');\nfunction mapEvent(map, analyticsPayload) {\n    const friendbuyPayload = mapEventHelper(map, analyticsPayload);\n    if (!friendbuyPayload) {\n        throw new actions_core_1.IntegrationError('Payload has no supported fields', 'INVALID_REQUEST_DATA', 400);\n    }\n    return friendbuyPayload;\n}\nexports.mapEvent = mapEvent;\nfunction mapEventHelper(map, analyticsPayload) {\n    if (analyticsPayload.friendbuyAttributes) {\n        if (typeof analyticsPayload.friendbuyAttributes === 'object') {\n            analyticsPayload = Object.assign({}, analyticsPayload.friendbuyAttributes, analyticsPayload);\n        }\n        delete analyticsPayload.friendbuyAttributes;\n    }\n    let friendbuyPayload = Object.assign({}, map.defaultObject);\n    for (const [key, rawValue] of Object.entries(analyticsPayload)) {\n        const fieldMap = typeof map.fields === 'object' && map.fields[key];\n        if (!fieldMap) {\n            let value = rawValue;\n            if (util_1.isNonEmpty(rawValue)) {\n                if (map.unmappedFieldObject) {\n                    let unmappedFieldObject = friendbuyPayload;\n                    if (map.unmappedFieldObject !== exports.ROOT) {\n                        if (typeof friendbuyPayload[map.unmappedFieldObject] !== 'object') {\n                            unmappedFieldObject = friendbuyPayload[map.unmappedFieldObject] = {};\n                        }\n                        else {\n                            unmappedFieldObject = friendbuyPayload[map.unmappedFieldObject];\n                        }\n                        value = stringify(rawValue);\n                    }\n                    unmappedFieldObject[key] = value;\n                }\n            }\n        }\n        else if (fieldMap === exports.DROP) {\n        }\n        else {\n            const name = fieldMap.name || key;\n            let value = fieldMap.convert ? fieldMap.convert(rawValue) : rawValue;\n            switch (fieldMap.type) {\n                case 'object':\n                    value = mapEventHelper(fieldMap, value);\n                    break;\n                case 'array':\n                    if (fieldMap.fields) {\n                        value = value.reduce((acc, o) => {\n                            const v = mapEventHelper(fieldMap, o);\n                            if (v !== undefined) {\n                                acc.push(v);\n                            }\n                            return acc;\n                        }, []);\n                    }\n                    break;\n                default:\n                    break;\n            }\n            if (util_1.isNonEmpty(value)) {\n                if (typeof name === 'string') {\n                    friendbuyPayload[name] = value;\n                }\n                else {\n                    let o = friendbuyPayload;\n                    for (let i = 0; i < name.length - 1; i++) {\n                        if (!(name[i] in o)) {\n                            o[name[i]] = {};\n                        }\n                        o = o[name[i]];\n                    }\n                    o[name[name.length - 1]] = value;\n                }\n            }\n        }\n    }\n    if (map.finalize) {\n        friendbuyPayload = map.finalize(friendbuyPayload);\n    }\n    return util_1.isNonEmpty(friendbuyPayload) ? friendbuyPayload : undefined;\n}\nexports.mapEventHelper = mapEventHelper;\nfunction stringify(rawValue) {\n    switch (typeof rawValue) {\n        case 'string':\n            return rawValue;\n        case 'object':\n            return JSON.stringify(rawValue);\n        default:\n            return rawValue.toString();\n    }\n}\nexports.stringify = stringify;\n//# sourceMappingURL=mapEvent.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.trackCustomEventFields = void 0;\nconst trackCustomEventFields = (fieldConfig) => ({\n    eventType: {\n        type: 'string',\n        required: true,\n        description: 'The type of the event to track.',\n        label: 'Event Type',\n        default: { '@path': '$.event' }\n    },\n    eventProperties: {\n        type: 'object',\n        required: true,\n        description: 'Object containing the properties for the event being tracked. All of the fields in this object will be sent in the root of the Friendbuy track event.',\n        label: 'Event Properties',\n        default: { '@path': '$.properties' }\n    },\n    deduplicationId: {\n        type: 'string',\n        required: false,\n        description: 'An identifier for the event being tracked to prevent the same event from being rewarded more than once.',\n        label: 'Event ID',\n        default: { '@path': '$.properties.deduplicationId' }\n    },\n    customerId: {\n        label: 'Customer ID',\n        description: \"The user's customer ID.\",\n        type: 'string',\n        required: true,\n        default: {\n            '@if': {\n                exists: { '@path': '$.properties.customerId' },\n                then: { '@path': '$.properties.customerId' },\n                else: { '@path': '$.userId' }\n            }\n        }\n    },\n    anonymousId: {\n        label: 'Anonymous ID',\n        description: \"The user's anonymous id\",\n        type: 'string',\n        required: false,\n        default: { '@path': '$.anonymousId' }\n    },\n    email: {\n        label: 'Email',\n        description: \"The user's email address.\",\n        type: 'string',\n        required: Boolean(fieldConfig.requireEmail),\n        default: { '@path': '$.properties.email' }\n    }\n});\nexports.trackCustomEventFields = trackCustomEventFields;\n//# sourceMappingURL=sharedCustomEvent.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.trackCustomerFields = void 0;\nexports.trackCustomerFields = {\n    customerId: {\n        label: 'Customer ID',\n        description: \"The user's customer ID.\",\n        type: 'string',\n        required: true,\n        default: { '@path': '$.userId' }\n    },\n    anonymousId: {\n        label: 'Anonymous ID',\n        description: \"The user's anonymous id.\",\n        type: 'string',\n        required: false,\n        default: { '@path': '$.anonymousId' }\n    },\n    email: {\n        label: 'Email',\n        description: \"The user's email address.\",\n        type: 'string',\n        required: true,\n        default: { '@path': '$.traits.email' }\n    },\n    firstName: {\n        label: 'First Name',\n        description: \"The user's given name.\",\n        type: 'string',\n        required: false,\n        default: { '@path': '$.traits.firstName' }\n    },\n    lastName: {\n        label: 'Last Name',\n        description: \"The user's surname.\",\n        type: 'string',\n        required: false,\n        default: { '@path': '$.traits.lastName' }\n    },\n    name: {\n        label: 'Name',\n        description: \"The user's full name. If the name trait doesn't exist then it will be automatically derived from the firstName and lastName traits if they are defined.\",\n        type: 'string',\n        required: false,\n        default: { '@path': '$.traits.name' }\n    },\n    age: {\n        label: 'Age',\n        description: \"The user's age.\",\n        type: 'number',\n        required: false,\n        default: { '@path': '$.traits.age' }\n    },\n    birthday: {\n        label: 'Birthday',\n        description: 'The user\\'s birthday in the format \"YYYY-MM-DD\", or \"0000-MM-DD\" to omit the year.',\n        type: 'string',\n        format: 'date',\n        required: false,\n        default: { '@path': '$.traits.birthday' }\n    },\n    language: {\n        label: 'Language',\n        description: \"The user's language.\",\n        type: 'string',\n        required: false,\n        default: { '@path': '$.traits.language' }\n    },\n    addressCountry: {\n        label: 'Country',\n        description: \"The user's country.\",\n        type: 'string',\n        required: false,\n        default: { '@path': '$.traits.address.country' }\n    },\n    addressState: {\n        label: 'State',\n        description: \"The user's state.\",\n        type: 'string',\n        required: false,\n        default: { '@path': '$.traits.address.state' }\n    },\n    addressCity: {\n        label: 'City',\n        description: \"The user's city.\",\n        type: 'string',\n        required: false,\n        default: { '@path': '$.traits.address.city' }\n    },\n    addressPostalCode: {\n        label: 'State',\n        description: \"The user's postal code.\",\n        type: 'string',\n        required: false,\n        default: { '@path': '$.traits.address.postalCode' }\n    },\n    customerSince: {\n        label: 'Customer Since',\n        description: 'The date the user became a customer.',\n        type: 'string',\n        format: 'date-time',\n        required: false,\n        default: { '@path': '$.traits.customerSince' }\n    },\n    loyaltyStatus: {\n        label: 'Loyalty Status',\n        description: 'The status of the user in your loyalty program. Valid values are \"in\", \"out\", or \"blocked\".',\n        type: 'string',\n        required: false,\n        default: { '@path': '$.traits.loyaltyStatus' }\n    },\n    isNewCustomer: {\n        label: 'New Customer Flag',\n        description: 'Flag to indicate whether the user is a new customer.',\n        type: 'boolean',\n        required: false,\n        default: { '@path': '$.traits.isNewCustomer' }\n    },\n    friendbuyAttributes: {\n        label: 'Custom Attributes',\n        description: 'Custom attributes to send to Friendbuy. You should pass an object whose keys are the names of the custom attributes and whose values are strings. Non-string-valued attributes will be dropped.',\n        type: 'object',\n        required: false,\n        default: { '@path': '$.traits.friendbuyAttributes' }\n    }\n};\n//# sourceMappingURL=sharedCustomer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.trackPurchaseFields = void 0;\nconst commonFields_1 = require(\"./commonFields\");\nconst trackPurchaseFields = (fieldConfig) => ({\n    orderId: {\n        label: 'Order ID',\n        description: 'The order ID.',\n        type: 'string',\n        required: true,\n        default: { '@path': '$.properties.order_id' }\n    },\n    amount: {\n        label: 'Purchase Amount',\n        description: 'Purchase amount to be considered when evaluating reward rules.',\n        type: 'number',\n        required: true,\n        default: { '@path': '$.properties.total' }\n    },\n    currency: {\n        label: 'Currency',\n        description: 'The currency of the purchase amount.',\n        type: 'string',\n        required: true,\n        default: { '@path': '$.properties.currency' }\n    },\n    coupon: {\n        label: 'Coupon',\n        description: 'The coupon code of any coupon redeemed with the order.',\n        type: 'string',\n        required: false,\n        default: { '@path': '$.properties.coupon' }\n    },\n    attributionId: {\n        label: 'Friendbuy Attribution ID',\n        description: 'Friendbuy attribution ID that associates the purchase with the advocate who referred the purchaser.',\n        type: 'string',\n        required: false,\n        default: { '@path': '$.properties.attributionId' }\n    },\n    referralCode: {\n        label: 'Friendbuy Referral ID',\n        description: 'Friendbuy referral code that associates the purchase with the advocate who referred the purchaser.',\n        type: 'string',\n        required: false,\n        default: { '@path': '$.properties.referralCode' }\n    },\n    giftCardCodes: {\n        label: 'Gift Card Codes',\n        description: 'An array of gift card codes applied to the order.',\n        type: 'string',\n        multiple: true,\n        required: false,\n        default: { '@path': '$.properties.giftCardCodes' }\n    },\n    products: {\n        label: 'Products',\n        description: 'Products purchased.',\n        type: 'object',\n        multiple: true,\n        required: false,\n        properties: {\n            sku: {\n                label: 'Product SKU',\n                type: 'string',\n                required: false\n            },\n            name: {\n                label: 'Product Name',\n                type: 'string',\n                required: false\n            },\n            quantity: {\n                label: 'Quantity (default 1)',\n                type: 'integer',\n                required: false\n            },\n            price: {\n                label: 'Price',\n                type: 'number',\n                required: true\n            },\n            description: {\n                label: 'Product Description',\n                type: 'string',\n                required: false\n            },\n            category: {\n                label: 'Product Category',\n                type: 'string',\n                required: false\n            },\n            url: {\n                label: 'Product URL',\n                type: 'string',\n                required: false\n            },\n            image_url: {\n                label: 'Product Image URL',\n                type: 'string',\n                required: false\n            }\n        },\n        default: { '@path': '$.properties.products' }\n    },\n    ...commonFields_1.commonCustomerFields(fieldConfig),\n    friendbuyAttributes: {\n        label: 'Custom Attributes',\n        description: 'Custom attributes to send to Friendbuy. You should pass an object whose keys are the names of the custom attributes and whose values are strings. Non-string-valued attributes will be dropped.',\n        type: 'object',\n        required: false,\n        default: { '@path': '$.properties.friendbuyAttributes' }\n    }\n});\nexports.trackPurchaseFields = trackPurchaseFields;\n//# sourceMappingURL=sharedPurchase.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.trackSignUpFields = void 0;\nconst commonFields_1 = require(\"./commonFields\");\nconst trackSignUpFields = (fieldConfig) => ({\n    ...commonFields_1.commonCustomerFields(fieldConfig),\n    coupon: {\n        label: 'Coupon Code',\n        description: 'Coupon code that customer supplied when they signed up.',\n        type: 'string',\n        required: false,\n        default: { '@path': '$.properties.coupon' }\n    },\n    attributionId: {\n        label: 'Friendbuy Attribution ID',\n        description: 'Friendbuy attribution ID that associates the customer who is signing up with the advocate who referred them.',\n        type: 'string',\n        required: false,\n        default: { '@path': '$.properties.attributionId' }\n    },\n    referralCode: {\n        label: 'Friendbuy Referral ID',\n        description: 'Friendbuy referral code that associates the customer who is signing up with the advocate who referred them.',\n        type: 'string',\n        required: false,\n        default: { '@path': '$.properties.referralCode' }\n    },\n    friendbuyAttributes: {\n        label: 'Custom Attributes',\n        description: 'Custom attributes to send to Friendbuy. You should pass an object whose keys are the names of the custom attributes and whose values are strings. Non-string-valued attributes will be dropped.',\n        type: 'object',\n        required: false,\n        default: { '@path': '$.properties.friendbuyAttributes' }\n    }\n});\nexports.trackSignUpFields = trackSignUpFields;\n//# sourceMappingURL=sharedSignUp.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.enjoinString = exports.enjoinNumber = exports.enjoinInteger = exports.parseDate = exports.filterFriendbuyAttributes = exports.createFriendbuyPayload = exports.isNonEmpty = exports.moveEventPropertiesToRoot = exports.removeCustomerIfNoId = exports.addName = exports.getName = void 0;\nfunction getName(payload) {\n    return (payload.name ? payload.name :\n        payload.firstName && payload.lastName ? `${payload.firstName} ${payload.lastName}`\n            : undefined);\n}\nexports.getName = getName;\nfunction addName(payload) {\n    if (typeof payload === 'object' && !payload.name && payload.firstName && payload.lastName) {\n        payload.name = `${payload.firstName} ${payload.lastName}`;\n    }\n}\nexports.addName = addName;\nfunction removeCustomerIfNoId(payload) {\n    if (typeof payload !== 'object' || typeof payload.customer !== 'object' || payload.customer.id) {\n        return payload;\n    }\n    payload = { ...payload };\n    delete payload.customer;\n    return payload;\n}\nexports.removeCustomerIfNoId = removeCustomerIfNoId;\nfunction moveEventPropertiesToRoot(payload) {\n    if (typeof payload !== 'object' || typeof payload.eventProperties !== 'object') {\n        return payload;\n    }\n    const analyticsPayload = {\n        ...(payload.eventProperties || {}),\n        ...payload\n    };\n    delete analyticsPayload.eventProperties;\n    return analyticsPayload;\n}\nexports.moveEventPropertiesToRoot = moveEventPropertiesToRoot;\nfunction isNonEmpty(o) {\n    if (o === undefined || o === '') {\n        return false;\n    }\n    if (typeof o !== 'object') {\n        return true;\n    }\n    for (const _e in o) {\n        return true;\n    }\n    if (o === null) {\n        return true;\n    }\n    return false;\n}\nexports.isNonEmpty = isNonEmpty;\nfunction createFriendbuyPayload(payloadItems, flags = {}) {\n    const friendbuyPayload = {};\n    payloadItems.forEach(([k, v]) => {\n        if (!(v === undefined || v === '' || (flags.dropEmpty && !isNonEmpty(v)))) {\n            friendbuyPayload[k] = v;\n        }\n    });\n    return friendbuyPayload;\n}\nexports.createFriendbuyPayload = createFriendbuyPayload;\nfunction filterFriendbuyAttributes(api, friendbuyAttributes) {\n    const filteredAttributes = [];\n    if (friendbuyAttributes) {\n        Object.entries(friendbuyAttributes).forEach((attribute) => {\n            if (typeof attribute[1] === 'string') {\n                if (attribute[0] === 'birthday') {\n                    const dateRecord = parseDate(attribute[1]);\n                    if (dateRecord) {\n                        filteredAttributes.push([attribute[0], dateRecord]);\n                    }\n                }\n                else {\n                    filteredAttributes.push(attribute);\n                }\n            }\n        });\n    }\n    return (filteredAttributes.length === 0 ? [] :\n        api === 'mapi' ? [['additionalProperties', createFriendbuyPayload(filteredAttributes)]]\n            : filteredAttributes);\n}\nexports.filterFriendbuyAttributes = filterFriendbuyAttributes;\nconst dateRegexp = /^(?:(\\d\\d\\d\\d)-)?(\\d\\d)-(\\d\\d)(?:[^\\d]|$)/;\nfunction parseDate(date) {\n    if (typeof date === 'object' &&\n        (!('year' in date) || typeof date.year === 'number') &&\n        typeof date.month === 'number' &&\n        typeof date.day === 'number') {\n        return date;\n    }\n    if (typeof date !== 'string') {\n        return undefined;\n    }\n    const match = dateRegexp.exec(date);\n    if (!match) {\n        return undefined;\n    }\n    const year = match[1] && match[1] !== '0000' ? { year: parseInt(match[1], 10) } : {};\n    return { month: parseInt(match[2], 10), day: parseInt(match[3], 10), ...year };\n}\nexports.parseDate = parseDate;\nconst integerRegexp = /^-?(?:0|[1-9][0-9]*)$/;\nconst floatRegexp = /^-?(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?$/;\nfunction enjoinInteger(input) {\n    return typeof input === 'string' && integerRegexp.test(input) ? parseInt(input) : input;\n}\nexports.enjoinInteger = enjoinInteger;\nfunction enjoinNumber(input) {\n    return typeof input === 'string' && floatRegexp.test(input) ? parseFloat(input) : input;\n}\nexports.enjoinNumber = enjoinNumber;\nfunction enjoinString(input) {\n    return typeof input === 'number' ? input.toString() : input;\n}\nexports.enjoinString = enjoinString;\n//# sourceMappingURL=util.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./friendbuy/commonFields\"), exports);\n__exportStar(require(\"./friendbuy/contextFields\"), exports);\n__exportStar(require(\"./friendbuy/mapEvent\"), exports);\n__exportStar(require(\"./friendbuy/sharedCustomer\"), exports);\n__exportStar(require(\"./friendbuy/sharedCustomEvent\"), exports);\n__exportStar(require(\"./friendbuy/sharedPurchase\"), exports);\n__exportStar(require(\"./friendbuy/sharedSignUp\"), exports);\n__exportStar(require(\"./friendbuy/util\"), exports);\n//# sourceMappingURL=index.js.map","import { getMessage } from './formatting';\nimport { capitalize, jsonPath } from './util';\nconst defaultOpts = {\n    fieldLabels: 'title',\n    includeOriginalError: false,\n    includeData: false\n};\nexport class AjvError extends Error {\n    constructor(ajvErr, options = {}) {\n        super();\n        this.options = {};\n        this.redundant = false;\n        this.options = {\n            ...defaultOpts,\n            ...options\n        };\n        this.pointer = ajvErr.instancePath;\n        this.path = jsonPath(ajvErr.instancePath);\n        const message = getMessage(ajvErr, this.options);\n        if (message === null) {\n            this.redundant = true;\n            return;\n        }\n        this.message = `${capitalize(message)}.`;\n        if (this.options.includeOriginalError) {\n            this.original = ajvErr;\n        }\n        if (this.options.includeData) {\n            this.data = ajvErr.data;\n        }\n    }\n    toJSON() {\n        const humanError = {\n            path: this.path,\n            pointer: this.pointer,\n            message: this.message\n        };\n        if (this.options.includeOriginalError) {\n            humanError.original = this.original;\n        }\n        if (this.options.includeData) {\n            humanError.data = this.data;\n        }\n        return humanError;\n    }\n}\nexport class AggregateAjvError extends Error {\n    constructor(ajvErrors, opts = {}) {\n        super();\n        this.name = 'AggregateAjvError';\n        this.errors = (ajvErrors !== null && ajvErrors !== void 0 ? ajvErrors : []).map((error) => new AjvError(error, opts)).filter((error) => !error.redundant);\n        this.message = this.errors.map((error) => error.message).join(' ');\n    }\n    toJSON() {\n        return this.errors.map((error) => error.toJSON());\n    }\n    *[Symbol.iterator]() {\n        for (const err of this.errors) {\n            yield err;\n        }\n    }\n}\n//# sourceMappingURL=aggregate-ajv-error.js.map","import { humanizeList, humanizeTypeOf, indefiniteArticle, jsonPath, pluralize } from './util';\nconst formatLabels = {\n    'date-time': 'date and time',\n    time: 'time',\n    date: 'date',\n    email: 'email address',\n    hostname: 'hostname',\n    ipv4: 'IPv4 address',\n    ipv6: 'IPv6 address',\n    uri: 'URI',\n    'uri-reference': 'URI Reference',\n    'uri-template': 'URI-template',\n    'json-pointer': 'JSON Pointer',\n    'relative-json-pointer': 'relative JSON Pointer',\n    regex: 'regular expression'\n};\nexport const fieldPreamble = ({ instancePath, parentSchema }, { fieldLabels }) => {\n    switch (fieldLabels) {\n        case 'js':\n            if (instancePath === '') {\n                return 'the root value';\n            }\n            return `the value at ${jsonPath(instancePath).replace(/^\\$/, '')}`;\n        case 'jsonPath':\n            return `the value at ${jsonPath(instancePath)}`;\n        case 'jsonPointer':\n        case 'instancePath':\n            if (instancePath === '') {\n                return 'the root value';\n            }\n            return `the value at ${instancePath}`;\n        case 'title':\n            if (parentSchema === null || parentSchema === void 0 ? void 0 : parentSchema.title) {\n                return parentSchema.title;\n            }\n            if (instancePath === '') {\n                return 'the root value';\n            }\n            return `the value at ${instancePath}`;\n        default:\n            throw new Error(`invalid fieldLabels value: ${fieldLabels}`);\n    }\n};\nexport const getMessage = ({ data, keyword, message, params, parentSchema, schemaPath, instancePath }, { fieldLabels }) => {\n    const preamble = fieldPreamble({\n        instancePath,\n        parentSchema\n    }, { fieldLabels });\n    if (parentSchema === null || parentSchema === void 0 ? void 0 : parentSchema.errorMessage) {\n        return `${preamble} ${parentSchema.errorMessage}`;\n    }\n    switch (keyword) {\n        case 'enum': {\n            const list = params.allowedValues.map(JSON.stringify);\n            const allowed = humanizeList(list, 'or');\n            return `${preamble} must be one of: ${allowed}`;\n        }\n        case 'type': {\n            const list = Array.isArray(params.type) ? params.type : params.type.split(',');\n            const expectType = humanizeList(list, 'or');\n            const gotType = humanizeTypeOf(data);\n            return `${preamble} must be ${indefiniteArticle(expectType)} ${expectType} but it was ${gotType}`;\n        }\n        case 'minLength': {\n            const limit = params.limit;\n            const charsLimit = pluralize('character', limit);\n            const actual = data.length;\n            const charsActual = pluralize('character', actual);\n            return `${preamble} must be ${limit} ${charsLimit} or more but it was ${actual} ${charsActual}`;\n        }\n        case 'maxLength': {\n            const limit = params.limit;\n            const charsLimit = pluralize('character', limit);\n            const actual = data.length;\n            const charsActual = pluralize('character', actual);\n            return `${preamble} must be ${limit} ${charsLimit} or fewer but it was ${actual} ${charsActual}`;\n        }\n        case 'pattern': {\n            if (schemaPath.endsWith('propertyNames/pattern'))\n                return null;\n            const patternLabel = parentSchema === null || parentSchema === void 0 ? void 0 : parentSchema.patternLabel;\n            if (patternLabel) {\n                return `${preamble} must be ${patternLabel} but it was not`;\n            }\n            else {\n                return `${preamble} is an invalid string`;\n            }\n        }\n        case 'format': {\n            const label = formatLabels[params.format] || params.format;\n            return `${preamble} must be a valid ${label} string but it was not`;\n        }\n        case 'multipleOf': {\n            return `${preamble} must be a multiple of ${params.multipleOf}`;\n        }\n        case 'minimum': {\n            return `${preamble} must be equal to or greater than ${params.limit}`;\n        }\n        case 'exclusiveMinimum': {\n            return `${preamble} must be greater than ${params.limit}`;\n        }\n        case 'maximum': {\n            return `${preamble} must be equal to or less than ${params.limit}`;\n        }\n        case 'exclusiveMaximum': {\n            return `${preamble} must be less than ${params.limit}`;\n        }\n        case 'additionalProperties': {\n            const allowed = Object.keys(parentSchema === null || parentSchema === void 0 ? void 0 : parentSchema.properties).join(', ');\n            const found = params.additionalProperty;\n            return `${preamble} has an unexpected property, ${found}, which is not in the list of allowed properties (${allowed})`;\n        }\n        case 'required': {\n            const missingField = params.missingProperty;\n            return `${preamble} is missing the required field '${missingField}'`;\n        }\n        case 'propertyNames': {\n            return `${preamble} has an invalid property name ${JSON.stringify(params.propertyName)}`;\n        }\n        case 'minProperties': {\n            const expected = params.limit;\n            const actual = Object.keys(data).length;\n            return `${preamble} must have ${expected} or more properties but it has ${actual}`;\n        }\n        case 'maxProperties': {\n            const expected = params.limit;\n            const actual = Object.keys(data).length;\n            return `${preamble} must have ${expected} or fewer properties but it has ${actual}`;\n        }\n        case 'dependencies': {\n            const prop = params.property;\n            const missing = params.missingProperty;\n            return `${preamble} must have property ${missing} when ${prop} is present`;\n        }\n        case 'minItems': {\n            const min = params.limit;\n            const actual = data.length;\n            return `${preamble} must have ${min} or more items but it has ${actual}`;\n        }\n        case 'maxItems': {\n            const max = params.limit;\n            const actual = data.length;\n            return `${preamble} must have ${max} or fewer items but it has ${actual}`;\n        }\n        case 'uniqueItems': {\n            const { i, j } = params;\n            return `${preamble} must be unique but elements ${j} and ${i} are the same`;\n        }\n        default:\n            return `${preamble} ${message}`;\n    }\n};\n//# sourceMappingURL=formatting.js.map","export const capitalize = (s) => {\n    if (typeof s !== 'string' || s.length === 0) {\n        return s;\n    }\n    return s.charAt(0).toUpperCase() + s.slice(1);\n};\nexport const pluralize = (s, num) => {\n    if (num === 1) {\n        return s;\n    }\n    return `${s}s`;\n};\nexport const jsonPath = (s) => {\n    if (s === '') {\n        return '$';\n    }\n    const path = s\n        .substring(1)\n        .split(/\\//)\n        .map(s => {\n        return s.replace(/~1/g, '/').replace(/~0/g, '~').replace(/\\./g, '\\\\.');\n    })\n        .map(s => {\n        if (/^\\d+$/.exec(s)) {\n            return `[${s}]`;\n        }\n        return `.${s}`;\n    }).join('');\n    return '$' + path;\n};\nexport const humanizePath = (s) => {\n    if (s === '') {\n        return 'the root value';\n    }\n    return `the value at ${jsonPath(s)}`;\n};\nexport const indefiniteArticle = (s) => {\n    switch (s[0]) {\n        case 'a':\n        case 'e':\n        case 'i':\n        case 'o':\n        case 'u':\n            return 'an';\n        default:\n            return 'a';\n    }\n};\nexport const humanizeTypeOf = (value) => {\n    const raw = typeof value;\n    switch (raw) {\n        case 'object':\n            if (value === null) {\n                return 'null';\n            }\n            if (Array.isArray(value)) {\n                return 'an array';\n            }\n            return 'an object';\n        case 'undefined':\n            return 'undefined';\n        default:\n            return `${indefiniteArticle(raw)} ${raw}`;\n    }\n};\nexport const humanizeList = (arr, conjunction = 'and') => {\n    if (arr.length === 0) {\n        return 'nothing';\n    }\n    if (arr.length === 1) {\n        return arr[0];\n    }\n    if (arr.length === 2) {\n        return `${arr[0]} ${conjunction} ${arr[1]}`;\n    }\n    return `${arr.slice(0, -1).join(', ')}, ${conjunction} ${arr[arr.length - 1]}`;\n};\n//# sourceMappingURL=util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.arrifyFields = exports.arrify = void 0;\nconst real_type_of_1 = require(\"./real-type-of\");\nfunction arrify(value, treatNullAsEmpty = true) {\n    if (value === undefined || value === null)\n        return treatNullAsEmpty ? [] : value;\n    if (real_type_of_1.isArray(value))\n        return value;\n    return [value];\n}\nexports.arrify = arrify;\nfunction arrifyFields(obj, schema = {}) {\n    if (!real_type_of_1.isObject(obj)) {\n        return obj;\n    }\n    if (!schema.properties)\n        return obj;\n    for (const key of Object.keys(obj)) {\n        const fieldSchema = schema.properties[key];\n        if (!fieldSchema)\n            continue;\n        if (fieldSchema.type === 'array') {\n            obj[key] = arrify(obj[key], false);\n        }\n    }\n    return obj;\n}\nexports.arrifyFields = arrifyFields;\n//# sourceMappingURL=arrify.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst add_basic_auth_header_1 = __importDefault(require(\"./middleware/before-request/add-basic-auth-header\"));\nconst prepare_headers_1 = __importDefault(require(\"./middleware/after-response/prepare-headers\"));\nconst prepare_response_1 = __importDefault(require(\"./middleware/after-response/prepare-response\"));\nconst request_client_1 = __importDefault(require(\"./request-client\"));\nconst baseClient = request_client_1.default({\n    timeout: 10000,\n    headers: {\n        'user-agent': 'Segment (Actions)'\n    },\n    beforeRequest: [\n        add_basic_auth_header_1.default\n    ],\n    afterResponse: [prepare_response_1.default, prepare_headers_1.default]\n});\nfunction createRequestClient(...requestOptions) {\n    let client = baseClient;\n    for (const options of requestOptions ?? []) {\n        client = client.extend(options);\n    }\n    return (url, options) => {\n        return client(url, options);\n    };\n}\nexports.default = createRequestClient;\n//# sourceMappingURL=create-request-client.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createTestEvent = void 0;\nconst uuid_1 = require(\"@lukeed/uuid\");\nfunction createTestEvent(event = {}) {\n    return {\n        anonymousId: uuid_1.v4(),\n        context: {\n            ip: '8.8.8.8',\n            library: {\n                name: 'analytics.js',\n                version: '2.11.1'\n            },\n            locale: 'en-US',\n            location: {\n                city: 'San Francisco',\n                country: 'United States',\n                latitude: 40.2964197,\n                longitude: -76.9411617,\n                speed: 0\n            },\n            page: {\n                path: '/academy/',\n                referrer: '',\n                search: '',\n                title: 'Analytics Academy',\n                url: 'https://segment.com/academy/'\n            },\n            timezone: 'Europe/Amsterdam',\n            userAgent: 'Mozilla/5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1'\n        },\n        event: 'Test Event',\n        messageId: uuid_1.v4(),\n        properties: {},\n        receivedAt: new Date().toISOString(),\n        sentAt: new Date().toISOString(),\n        timestamp: new Date().toISOString(),\n        traits: {},\n        type: 'track',\n        userId: 'user1234',\n        ...event\n    };\n}\nexports.createTestEvent = createTestEvent;\n//# sourceMappingURL=create-test-event.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createTestIntegration = void 0;\nconst create_test_event_1 = require(\"./create-test-event\");\nconst destination_kit_1 = require(\"./destination-kit\");\nconst map_values_1 = require(\"./map-values\");\nclass TestDestination extends destination_kit_1.Destination {\n    constructor(destination) {\n        super(destination);\n        this.responses = [];\n    }\n    async testAction(action, { event, mapping, settings, useDefaultMappings, auth }) {\n        mapping = mapping ?? {};\n        if (useDefaultMappings) {\n            const fields = this.definition.actions[action].fields;\n            const defaultMappings = map_values_1.mapValues(fields, 'default');\n            mapping = { ...defaultMappings, ...mapping };\n        }\n        await super.executeAction(action, {\n            event: create_test_event_1.createTestEvent(event),\n            mapping,\n            settings: settings ?? {},\n            auth\n        });\n        const responses = this.responses;\n        this.responses = [];\n        return responses;\n    }\n    async testBatchAction(action, { events, mapping, settings, useDefaultMappings, auth }) {\n        mapping = mapping ?? {};\n        if (useDefaultMappings) {\n            const fields = this.definition.actions[action].fields;\n            const defaultMappings = map_values_1.mapValues(fields, 'default');\n            mapping = { ...defaultMappings, ...mapping };\n        }\n        if (!events || !events.length) {\n            events = [{ type: 'track' }];\n        }\n        await super.executeBatch(action, {\n            events: events.map((event) => create_test_event_1.createTestEvent(event)),\n            mapping,\n            settings: settings ?? {},\n            auth\n        });\n        const responses = this.responses;\n        this.responses = [];\n        return responses;\n    }\n}\nfunction createTestIntegration(destination) {\n    return new TestDestination(destination);\n}\nexports.createTestIntegration = createTestIntegration;\n//# sourceMappingURL=create-test-integration.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultValues = void 0;\nfunction defaultValues(fields) {\n    const obj = {};\n    for (const field of Object.keys(fields)) {\n        const defaultValue = fields[field].default;\n        if (typeof defaultValue !== 'undefined') {\n            obj[field] = defaultValue;\n        }\n    }\n    return obj;\n}\nexports.defaultValues = defaultValues;\n//# sourceMappingURL=defaults.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Action = void 0;\nconst events_1 = require(\"events\");\nconst create_request_client_1 = __importDefault(require(\"../create-request-client\"));\nconst mapping_kit_1 = require(\"../mapping-kit\");\nconst fields_to_jsonschema_1 = require(\"./fields-to-jsonschema\");\nconst fetch_1 = require(\"../fetch\");\nconst schema_validation_1 = require(\"../schema-validation\");\nconst errors_1 = require(\"../errors\");\nconst remove_empty_values_1 = require(\"../remove-empty-values\");\nclass Action extends events_1.EventEmitter {\n    constructor(destinationName, definition, extendRequest) {\n        super();\n        this.definition = definition;\n        this.destinationName = destinationName;\n        this.extendRequest = extendRequest;\n        this.hasBatchSupport = typeof definition.performBatch === 'function';\n        if (Object.keys(definition.fields ?? {}).length) {\n            this.schema = fields_to_jsonschema_1.fieldsToJsonSchema(definition.fields);\n        }\n    }\n    async execute(bundle) {\n        const results = [];\n        let payload = mapping_kit_1.transform(bundle.mapping, bundle.data);\n        results.push({ output: 'Mappings resolved' });\n        payload = remove_empty_values_1.removeEmptyValues(payload, this.schema, true);\n        if (this.schema) {\n            const schemaKey = `${this.destinationName}:${this.definition.title}`;\n            schema_validation_1.validateSchema(payload, this.schema, { schemaKey });\n            results.push({ output: 'Payload validated' });\n        }\n        const dataBundle = {\n            rawData: bundle.data,\n            rawMapping: bundle.mapping,\n            settings: bundle.settings,\n            payload,\n            auth: bundle.auth\n        };\n        const output = await this.performRequest(this.definition.perform, dataBundle);\n        results.push({ output: output });\n        return results;\n    }\n    async executeBatch(bundle) {\n        if (!this.hasBatchSupport) {\n            throw new errors_1.IntegrationError('This action does not support batched requests.', 'NotImplemented', 501);\n        }\n        let payloads = mapping_kit_1.transformBatch(bundle.mapping, bundle.data);\n        if (this.schema) {\n            const schema = this.schema;\n            const validationOptions = {\n                schemaKey: `${this.destinationName}:${this.definition.title}`,\n                throwIfInvalid: false\n            };\n            payloads = payloads\n                .map((payload) => remove_empty_values_1.removeEmptyValues(payload, schema))\n                .filter((payload) => schema_validation_1.validateSchema(payload, schema, validationOptions));\n        }\n        if (payloads.length === 0) {\n            return;\n        }\n        if (this.definition.performBatch) {\n            const data = {\n                rawData: bundle.data,\n                rawMapping: bundle.mapping,\n                settings: bundle.settings,\n                payload: payloads,\n                auth: bundle.auth\n            };\n            await this.performRequest(this.definition.performBatch, data);\n        }\n    }\n    executeDynamicField(field, data) {\n        const fn = this.definition.dynamicFields?.[field];\n        if (typeof fn !== 'function') {\n            return {\n                data: [],\n                pagination: {}\n            };\n        }\n        return this.performRequest(fn, data);\n    }\n    async performRequest(requestFn, data) {\n        const requestClient = this.createRequestClient(data);\n        const response = await requestFn(requestClient, data);\n        return this.parseResponse(response);\n    }\n    createRequestClient(data) {\n        const options = this.extendRequest?.(data) ?? {};\n        return create_request_client_1.default(options, {\n            afterResponse: [this.afterResponse.bind(this)]\n        });\n    }\n    afterResponse(request, options, response) {\n        const modifiedResponse = response;\n        modifiedResponse.request = request;\n        modifiedResponse.options = options;\n        this.emit('response', modifiedResponse);\n        return modifiedResponse;\n    }\n    parseResponse(response) {\n        if (response instanceof fetch_1.Response) {\n            return response.data ?? response.content;\n        }\n        return response;\n    }\n}\nexports.Action = Action;\n//# sourceMappingURL=action.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fieldsToJsonSchema = void 0;\nfunction toJsonSchemaType(type) {\n    switch (type) {\n        case 'string':\n        case 'text':\n        case 'password':\n            return 'string';\n        case 'datetime':\n            return ['string', 'number'];\n        default:\n            return type;\n    }\n}\nfunction fieldsToJsonSchema(fields = {}, options) {\n    const required = [];\n    const properties = {};\n    for (const [key, field] of Object.entries(fields)) {\n        const schemaType = toJsonSchemaType(field.type);\n        let schema = {\n            title: field.label,\n            description: field.description,\n            type: schemaType,\n            format: field.format,\n            default: field.default\n        };\n        if (field.type === 'datetime') {\n            schema.format = 'date-like';\n            if (options?.tsType) {\n                schema.tsType = 'string | number';\n            }\n        }\n        else if (field.type === 'password') {\n            schema.format = 'password';\n        }\n        else if (field.type === 'text') {\n            schema.format = 'text';\n        }\n        if (field.choices) {\n            schema.enum = field.choices.map((choice) => {\n                if (typeof choice === 'string') {\n                    return choice;\n                }\n                return choice.value;\n            });\n        }\n        if ('allowNull' in field && field.allowNull) {\n            schema.type = [].concat(schemaType, 'null');\n            if (schema.enum) {\n                schema.enum = [...schema.enum, null];\n            }\n            if (typeof schema.tsType === 'string' && !schema.tsType.includes('null')) {\n                schema.tsType += ' | null';\n            }\n        }\n        const isMulti = 'multiple' in field && field.multiple;\n        if (isMulti) {\n            schema.items = { type: schemaType };\n            schema.type = 'array';\n            if (schema.enum) {\n                schema.items.enum = schema.enum;\n                delete schema.enum;\n            }\n        }\n        if (schemaType === 'object' && field.properties) {\n            if (isMulti) {\n                schema.items = fieldsToJsonSchema(field.properties, { additionalProperties: field?.additionalProperties || false });\n            }\n            else {\n                schema = { ...schema, ...fieldsToJsonSchema(field.properties, { additionalProperties: field?.additionalProperties || false }) };\n            }\n        }\n        properties[key] = schema;\n        if (field.required) {\n            required.push(key);\n        }\n    }\n    return {\n        $schema: 'http://json-schema.org/schema#',\n        type: 'object',\n        additionalProperties: options?.additionalProperties || false,\n        properties,\n        required\n    };\n}\nexports.fieldsToJsonSchema = fieldsToJsonSchema;\n//# sourceMappingURL=fields-to-jsonschema.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Destination = exports.fieldsToJsonSchema = void 0;\nconst destination_subscriptions_1 = require(\"@segment/destination-subscriptions\");\nconst action_1 = require(\"./action\");\nconst time_1 = require(\"../time\");\nconst fields_to_jsonschema_1 = require(\"./fields-to-jsonschema\");\nObject.defineProperty(exports, \"fieldsToJsonSchema\", { enumerable: true, get: function () { return fields_to_jsonschema_1.fieldsToJsonSchema; } });\nconst create_request_client_1 = __importDefault(require(\"../create-request-client\"));\nconst schema_validation_1 = require(\"../schema-validation\");\nconst errors_1 = require(\"../errors\");\nconst parse_settings_1 = require(\"./parse-settings\");\nconst retry_1 = require(\"../retry\");\nconst OAUTH2_SCHEME = 'oauth2';\nclass Destination {\n    constructor(destination) {\n        this.definition = destination;\n        this.name = destination.name;\n        this.extendRequest = destination.extendRequest;\n        this.actions = {};\n        this.authentication = destination.authentication;\n        this.responses = [];\n        if (this.definition.onDelete) {\n            this.onDelete = this._onDelete;\n        }\n        if (this.authentication?.fields) {\n            this.settingsSchema = fields_to_jsonschema_1.fieldsToJsonSchema(this.authentication.fields);\n        }\n        for (const action of Object.keys(destination.actions)) {\n            this.partnerAction(action, destination.actions[action]);\n        }\n    }\n    validateSettings(settings) {\n        if (this.settingsSchema) {\n            try {\n                schema_validation_1.validateSchema(settings, this.settingsSchema, { schemaKey: `${this.name}:settings` });\n            }\n            catch (err) {\n                const error = err;\n                if (error.name === 'AggregateAjvError' || error.name === 'ValidationError') {\n                    error.status = 400;\n                }\n                throw error;\n            }\n        }\n    }\n    async testAuthentication(settings) {\n        const destinationSettings = this.getDestinationSettings(settings);\n        const auth = parse_settings_1.getAuthData(settings);\n        const data = { settings: destinationSettings, auth };\n        const context = { settings: destinationSettings, payload: undefined, auth };\n        this.validateSettings(destinationSettings);\n        if (!this.authentication?.testAuthentication) {\n            return;\n        }\n        const options = this.extendRequest?.(context) ?? {};\n        const requestClient = create_request_client_1.default(options);\n        try {\n            await this.authentication.testAuthentication(requestClient, data);\n        }\n        catch (error) {\n            const statusCode = error?.response?.status ?? '';\n            throw new Error(`Credentials are invalid: ${statusCode} ${error.message}`);\n        }\n    }\n    refreshAccessToken(settings, oauthData) {\n        if (this.authentication?.scheme !== OAUTH2_SCHEME) {\n            throw new errors_1.IntegrationError('refreshAccessToken is only valid with oauth2 authentication scheme', 'NotImplemented', 501);\n        }\n        const context = {\n            settings,\n            payload: undefined,\n            auth: parse_settings_1.getAuthData(settings)\n        };\n        const options = this.extendRequest?.(context) ?? {};\n        const requestClient = create_request_client_1.default(options);\n        if (!this.authentication?.refreshAccessToken) {\n            return undefined;\n        }\n        return this.authentication.refreshAccessToken(requestClient, { settings, auth: oauthData });\n    }\n    partnerAction(slug, definition) {\n        const action = new action_1.Action(this.name, definition, this.extendRequest);\n        action.on('response', (response) => {\n            if (response) {\n                this.responses.push(response);\n            }\n        });\n        this.actions[slug] = action;\n        return this;\n    }\n    async executeAction(actionSlug, { event, mapping, settings, auth }) {\n        const action = this.actions[actionSlug];\n        if (!action) {\n            return [];\n        }\n        return action.execute({\n            mapping,\n            data: event,\n            settings,\n            auth\n        });\n    }\n    async executeBatch(actionSlug, { events, mapping, settings, auth }) {\n        const action = this.actions[actionSlug];\n        if (!action) {\n            return [];\n        }\n        await action.executeBatch({\n            mapping,\n            data: events,\n            settings,\n            auth\n        });\n        return [{ output: 'successfully processed batch of events' }];\n    }\n    async onSubscription(subscription, events, settings, auth, onComplete) {\n        const subscriptionStartedAt = time_1.time();\n        const actionSlug = subscription.partnerAction;\n        const input = {\n            mapping: subscription.mapping || {},\n            settings,\n            auth\n        };\n        let results = null;\n        try {\n            if (!subscription.subscribe || typeof subscription.subscribe !== 'string') {\n                results = [{ output: 'invalid subscription' }];\n                return results;\n            }\n            const parsedSubscription = destination_subscriptions_1.parseFql(subscription.subscribe);\n            if (parsedSubscription.error) {\n                results = [{ output: `invalid subscription : ${parsedSubscription.error.message}` }];\n                return results;\n            }\n            const isBatch = Array.isArray(events);\n            const allEvents = (isBatch ? events : [events]);\n            const subscribedEvents = allEvents.filter((event) => destination_subscriptions_1.validate(parsedSubscription, event));\n            if (subscribedEvents.length === 0) {\n                results = [{ output: 'not subscribed' }];\n                return results;\n            }\n            else if (isBatch) {\n                return await this.executeBatch(actionSlug, { ...input, events: subscribedEvents });\n            }\n            else {\n                return await this.executeAction(actionSlug, { ...input, event: subscribedEvents[0] });\n            }\n        }\n        catch (err) {\n            const error = err;\n            results = [{ error: { message: error.message } }];\n            if (error.name === 'AggregateAjvError' || error.name === 'ValidationError') {\n                error.status = 400;\n            }\n            throw error;\n        }\n        finally {\n            const subscriptionEndedAt = time_1.time();\n            const subscriptionDuration = time_1.duration(subscriptionStartedAt, subscriptionEndedAt);\n            onComplete?.({\n                duration: subscriptionDuration,\n                destination: this.name,\n                action: actionSlug,\n                subscribe: subscription.subscribe,\n                input: {\n                    data: events,\n                    mapping: input.mapping,\n                    settings: input.settings\n                },\n                output: results\n            });\n        }\n    }\n    onEvent(event, settings, options) {\n        return this.onSubscriptions(event, settings, options);\n    }\n    onBatch(events, settings, options) {\n        return this.onSubscriptions(events, settings, options);\n    }\n    async _onDelete(event, settings, options) {\n        const { userId, anonymousId } = event;\n        const payload = { userId, anonymousId };\n        const destinationSettings = this.getDestinationSettings(settings);\n        this.validateSettings(destinationSettings);\n        const auth = parse_settings_1.getAuthData(settings);\n        const data = { payload, settings: destinationSettings, auth };\n        const context = { settings: destinationSettings, payload: undefined, auth };\n        const opts = this.extendRequest?.(context) ?? {};\n        const requestClient = create_request_client_1.default(opts);\n        const run = async () => {\n            const deleteResult = await this.definition.onDelete?.(requestClient, data);\n            const result = deleteResult ?? { output: 'no onDelete defined' };\n            return result;\n        };\n        const onFailedAttempt = async (error) => {\n            const statusCode = error?.status ?? error?.response?.status ?? 500;\n            if (!(statusCode === 401 && this.authentication?.scheme === OAUTH2_SCHEME)) {\n                throw error;\n            }\n            const oauthSettings = parse_settings_1.getOAuth2Data(settings);\n            const newTokens = await this.refreshAccessToken(destinationSettings, oauthSettings);\n            if (!newTokens) {\n                throw new errors_1.InvalidAuthenticationError('Failed to refresh access token');\n            }\n            settings = parse_settings_1.updateOAuthSettings(settings, newTokens);\n            options?.onTokenRefresh?.(newTokens);\n        };\n        return await retry_1.retry(run, { retries: 2, onFailedAttempt });\n    }\n    async onSubscriptions(data, settings, options) {\n        const subscriptions = this.getSubscriptions(settings);\n        const destinationSettings = this.getDestinationSettings(settings);\n        this.validateSettings(destinationSettings);\n        const run = async () => {\n            const authData = parse_settings_1.getAuthData(settings);\n            const promises = subscriptions.map((subscription) => this.onSubscription(subscription, data, destinationSettings, authData, options?.onComplete));\n            const results = await Promise.all(promises);\n            return [].concat(...results);\n        };\n        const onFailedAttempt = async (error) => {\n            const statusCode = error?.status ?? error?.response?.status ?? 500;\n            if (!(statusCode === 401 && this.authentication?.scheme === OAUTH2_SCHEME)) {\n                throw error;\n            }\n            const oauthSettings = parse_settings_1.getOAuth2Data(settings);\n            const newTokens = await this.refreshAccessToken(destinationSettings, oauthSettings);\n            if (!newTokens) {\n                throw new errors_1.InvalidAuthenticationError('Failed to refresh access token');\n            }\n            settings = parse_settings_1.updateOAuthSettings(settings, newTokens);\n            options?.onTokenRefresh?.(newTokens);\n        };\n        return await retry_1.retry(run, { retries: 2, onFailedAttempt });\n    }\n    getSubscriptions(settings) {\n        const { subscription, subscriptions } = settings;\n        let parsedSubscriptions;\n        if (subscription) {\n            parsedSubscriptions = [subscription];\n        }\n        else if (Array.isArray(subscriptions)) {\n            parsedSubscriptions = subscriptions;\n        }\n        else {\n            parsedSubscriptions = [];\n        }\n        return parsedSubscriptions;\n    }\n    getDestinationSettings(settings) {\n        const { subcription, subscriptions, oauth, ...otherSettings } = settings;\n        return otherSettings;\n    }\n}\nexports.Destination = Destination;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.updateOAuthSettings = exports.getOAuth2Data = exports.getAuthData = void 0;\nfunction getAuthData(settings) {\n    const oauthData = getOAuth2Data(settings);\n    return { accessToken: oauthData.accessToken, refreshToken: oauthData.refreshToken };\n}\nexports.getAuthData = getAuthData;\nfunction getOAuth2Data(settings) {\n    const { oauth } = settings;\n    return {\n        accessToken: oauth?.access_token,\n        refreshToken: oauth?.refresh_token,\n        clientId: oauth?.clientId,\n        clientSecret: oauth?.clientSecret\n    };\n}\nexports.getOAuth2Data = getOAuth2Data;\nfunction updateOAuthSettings(settings, oauthData) {\n    const { oauth, ...otherSettings } = settings;\n    if (oauth) {\n        const newOauth = oauth;\n        newOauth.access_token = oauthData.accessToken;\n        if (oauthData.refreshToken) {\n            newOauth.refresh_token = oauthData.refreshToken;\n        }\n        otherSettings['oauth'] = newOauth;\n    }\n    return otherSettings;\n}\nexports.updateOAuthSettings = updateOAuthSettings;\n//# sourceMappingURL=parse-settings.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InvalidAuthenticationError = exports.RetryableError = exports.IntegrationError = void 0;\nconst ts_custom_error_1 = require(\"ts-custom-error\");\nclass IntegrationError extends ts_custom_error_1.CustomError {\n    constructor(message = '', code, status) {\n        super(message);\n        this.status = status;\n        this.code = code;\n    }\n}\nexports.IntegrationError = IntegrationError;\nclass RetryableError extends ts_custom_error_1.CustomError {\n    constructor(message = '', status = 500) {\n        super(message);\n        this.status = status;\n    }\n}\nexports.RetryableError = RetryableError;\nclass InvalidAuthenticationError extends ts_custom_error_1.CustomError {\n    constructor(message = '') {\n        super(message);\n        this.status = 401;\n        this.code = 'invalid_authentication';\n    }\n}\nexports.InvalidAuthenticationError = InvalidAuthenticationError;\n//# sourceMappingURL=errors.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Response = exports.Request = exports.Headers = void 0;\nconst cross_fetch_1 = __importStar(require(\"cross-fetch\"));\nObject.defineProperty(exports, \"Headers\", { enumerable: true, get: function () { return cross_fetch_1.Headers; } });\nObject.defineProperty(exports, \"Request\", { enumerable: true, get: function () { return cross_fetch_1.Request; } });\nObject.defineProperty(exports, \"Response\", { enumerable: true, get: function () { return cross_fetch_1.Response; } });\nexports.default = cross_fetch_1.default;\n//# sourceMappingURL=fetch.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.get = void 0;\nfunction get(obj, path) {\n    if (path === '' || path === '.')\n        return obj;\n    if (path === null || path == undefined)\n        return undefined;\n    const pathArray = Array.isArray(path) ? path : path.match(/([^[.\\]])+/g);\n    return pathArray.reduce((prevObj, key) => prevObj && prevObj[key], obj);\n}\nexports.get = get;\n//# sourceMappingURL=get.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Headers = exports.Response = exports.Request = exports.fetch = exports.HTTPError = exports.isString = exports.isArray = exports.isObject = exports.realTypeOf = exports.duration = exports.time = exports.removeUndefined = exports.omit = exports.get = exports.RetryableError = exports.InvalidAuthenticationError = exports.IntegrationError = exports.defaultValues = exports.createTestIntegration = exports.createTestEvent = exports.transform = exports.getAuthData = exports.fieldsToJsonSchema = exports.Destination = void 0;\nvar destination_kit_1 = require(\"./destination-kit\");\nObject.defineProperty(exports, \"Destination\", { enumerable: true, get: function () { return destination_kit_1.Destination; } });\nObject.defineProperty(exports, \"fieldsToJsonSchema\", { enumerable: true, get: function () { return destination_kit_1.fieldsToJsonSchema; } });\nvar parse_settings_1 = require(\"./destination-kit/parse-settings\");\nObject.defineProperty(exports, \"getAuthData\", { enumerable: true, get: function () { return parse_settings_1.getAuthData; } });\nvar mapping_kit_1 = require(\"./mapping-kit\");\nObject.defineProperty(exports, \"transform\", { enumerable: true, get: function () { return mapping_kit_1.transform; } });\nvar create_test_event_1 = require(\"./create-test-event\");\nObject.defineProperty(exports, \"createTestEvent\", { enumerable: true, get: function () { return create_test_event_1.createTestEvent; } });\nvar create_test_integration_1 = require(\"./create-test-integration\");\nObject.defineProperty(exports, \"createTestIntegration\", { enumerable: true, get: function () { return create_test_integration_1.createTestIntegration; } });\nvar defaults_1 = require(\"./defaults\");\nObject.defineProperty(exports, \"defaultValues\", { enumerable: true, get: function () { return defaults_1.defaultValues; } });\nvar errors_1 = require(\"./errors\");\nObject.defineProperty(exports, \"IntegrationError\", { enumerable: true, get: function () { return errors_1.IntegrationError; } });\nObject.defineProperty(exports, \"InvalidAuthenticationError\", { enumerable: true, get: function () { return errors_1.InvalidAuthenticationError; } });\nObject.defineProperty(exports, \"RetryableError\", { enumerable: true, get: function () { return errors_1.RetryableError; } });\nvar get_1 = require(\"./get\");\nObject.defineProperty(exports, \"get\", { enumerable: true, get: function () { return get_1.get; } });\nvar omit_1 = require(\"./omit\");\nObject.defineProperty(exports, \"omit\", { enumerable: true, get: function () { return omit_1.omit; } });\nvar remove_undefined_1 = require(\"./remove-undefined\");\nObject.defineProperty(exports, \"removeUndefined\", { enumerable: true, get: function () { return remove_undefined_1.removeUndefined; } });\nvar time_1 = require(\"./time\");\nObject.defineProperty(exports, \"time\", { enumerable: true, get: function () { return time_1.time; } });\nObject.defineProperty(exports, \"duration\", { enumerable: true, get: function () { return time_1.duration; } });\nvar real_type_of_1 = require(\"./real-type-of\");\nObject.defineProperty(exports, \"realTypeOf\", { enumerable: true, get: function () { return real_type_of_1.realTypeOf; } });\nObject.defineProperty(exports, \"isObject\", { enumerable: true, get: function () { return real_type_of_1.isObject; } });\nObject.defineProperty(exports, \"isArray\", { enumerable: true, get: function () { return real_type_of_1.isArray; } });\nObject.defineProperty(exports, \"isString\", { enumerable: true, get: function () { return real_type_of_1.isString; } });\nvar request_client_1 = require(\"./request-client\");\nObject.defineProperty(exports, \"HTTPError\", { enumerable: true, get: function () { return request_client_1.HTTPError; } });\nvar fetch_1 = require(\"./fetch\");\nObject.defineProperty(exports, \"fetch\", { enumerable: true, get: function () { return __importDefault(fetch_1).default; } });\nObject.defineProperty(exports, \"Request\", { enumerable: true, get: function () { return fetch_1.Request; } });\nObject.defineProperty(exports, \"Response\", { enumerable: true, get: function () { return fetch_1.Response; } });\nObject.defineProperty(exports, \"Headers\", { enumerable: true, get: function () { return fetch_1.Headers; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mapValues = void 0;\nfunction mapValues(obj, key) {\n    return Object.entries(obj).reduce((agg, [name, value]) => {\n        agg[name] = value[key];\n        return agg;\n    }, {});\n}\nexports.mapValues = mapValues;\n//# sourceMappingURL=map-values.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.transformBatch = exports.transform = void 0;\nconst get_1 = require(\"../get\");\nconst is_directive_1 = require(\"./is-directive\");\nconst placeholders_1 = require(\"./placeholders\");\nconst real_type_of_1 = require(\"../real-type-of\");\nconst remove_undefined_1 = require(\"../remove-undefined\");\nconst validate_1 = __importDefault(require(\"./validate\"));\nconst arrify_1 = require(\"../arrify\");\nconst directives = {};\nconst directiveRegExp = /^@[a-z][a-zA-Z0-9]+$/;\nfunction registerDirective(name, fn) {\n    if (!directiveRegExp.exec(name)) {\n        throw new Error(`\"${name}\" is an invalid directive name`);\n    }\n    directives[name] = fn;\n}\nfunction registerStringDirective(name, fn) {\n    registerDirective(name, (value, payload) => {\n        const str = resolve(value, payload);\n        if (typeof str !== 'string') {\n            throw new Error(`${name}: expected string, got ${real_type_of_1.realTypeOf(str)}`);\n        }\n        return fn(str, payload);\n    });\n}\nfunction runDirective(obj, payload) {\n    const name = Object.keys(obj).find((key) => key.startsWith('@'));\n    const directiveFn = directives[name];\n    const value = obj[name];\n    if (typeof directiveFn !== 'function') {\n        throw new Error(`${name} is not a valid directive, got ${real_type_of_1.realTypeOf(directiveFn)}`);\n    }\n    return directiveFn(value, payload);\n}\nregisterDirective('@if', (opts, payload) => {\n    let condition = false;\n    if (!real_type_of_1.isObject(opts)) {\n        throw new Error('@if requires an object with an \"exists\" key');\n    }\n    if (opts.exists !== undefined) {\n        const value = resolve(opts.exists, payload);\n        condition = value !== undefined && value !== null;\n    }\n    else {\n        throw new Error('@if requires an \"exists\" key');\n    }\n    if (condition && opts.then !== undefined) {\n        return resolve(opts.then, payload);\n    }\n    else if (!condition && opts.else) {\n        return resolve(opts.else, payload);\n    }\n});\nregisterDirective('@arrayPath', (data, payload) => {\n    if (!Array.isArray(data)) {\n        throw new Error(`@arrayPath expected array, got ${real_type_of_1.realTypeOf(data)}`);\n    }\n    const [path, itemShape] = data;\n    const root = typeof path === 'string' ? get_1.get(payload, path.replace('$.', '')) : resolve(path, payload);\n    if (['object', 'array'].includes(real_type_of_1.realTypeOf(root)) &&\n        real_type_of_1.realTypeOf(itemShape) === 'object' &&\n        Object.keys(itemShape).length > 0) {\n        return arrify_1.arrify(root).map((item) => resolve(itemShape, item));\n    }\n    return root;\n});\nregisterStringDirective('@path', (path, payload) => {\n    return get_1.get(payload, path.replace('$.', ''));\n});\nregisterStringDirective('@template', (template, payload) => {\n    return placeholders_1.render(template, payload);\n});\nregisterDirective('@literal', (value, payload) => {\n    return resolve(value, payload);\n});\nfunction resolve(mapping, payload) {\n    if (!real_type_of_1.isObject(mapping) && !real_type_of_1.isArray(mapping)) {\n        return mapping;\n    }\n    if (is_directive_1.isDirective(mapping)) {\n        return runDirective(mapping, payload);\n    }\n    if (Array.isArray(mapping)) {\n        return mapping.map((value) => resolve(value, payload));\n    }\n    const resolved = {};\n    for (const key of Object.keys(mapping)) {\n        resolved[key] = resolve(mapping[key], payload);\n    }\n    return resolved;\n}\nfunction transform(mapping, data = {}) {\n    const realType = real_type_of_1.realTypeOf(data);\n    if (realType !== 'object') {\n        throw new Error(`data must be an object, got ${realType}`);\n    }\n    validate_1.default(mapping);\n    const resolved = resolve(mapping, data);\n    const cleaned = remove_undefined_1.removeUndefined(resolved);\n    return cleaned;\n}\nexports.transform = transform;\nfunction transformBatch(mapping, data = []) {\n    const realType = real_type_of_1.realTypeOf(data);\n    if (!real_type_of_1.isArray(data)) {\n        throw new Error(`data must be an array, got ${realType}`);\n    }\n    validate_1.default(mapping);\n    const resolved = data.map((d) => resolve(mapping, d));\n    return remove_undefined_1.removeUndefined(resolved);\n}\nexports.transformBatch = transformBatch;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isDirective = void 0;\nconst real_type_of_1 = require(\"../real-type-of\");\nfunction isDirective(obj) {\n    if (!real_type_of_1.isObject(obj)) {\n        return false;\n    }\n    const keys = Object.keys(obj);\n    const hasDirectivePrefix = keys.some((key) => key.startsWith('@'));\n    if (!hasDirectivePrefix) {\n        return false;\n    }\n    const otherKeys = keys.filter((key) => !key.startsWith('@') && key !== '_metadata');\n    if (otherKeys.length === 0) {\n        return true;\n    }\n    return false;\n}\nexports.isDirective = isDirective;\n//# sourceMappingURL=is-directive.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.render = void 0;\nconst get_1 = require(\"../get\");\nconst real_type_of_1 = require(\"../real-type-of\");\nconst entityMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '/': '&#x2F;',\n    '`': '&#x60;',\n    '=': '&#x3D;'\n};\nfunction escapeHtml(value) {\n    if (typeof value !== 'string')\n        return value;\n    return value.replace(/[&<>\"'`=/]/g, (match) => {\n        return entityMap[match];\n    });\n}\nfunction render(template, data = {}) {\n    if (typeof template !== 'string') {\n        throw new TypeError(`Invalid template! Template should be a \"string\" but ${real_type_of_1.realTypeOf(template)} was given.`);\n    }\n    function replacer(chars, escape) {\n        return (match) => {\n            match = match.slice(chars, -chars).trim();\n            const value = get_1.get(data, match);\n            if (escape) {\n                return String(escapeHtml(value) ?? '');\n            }\n            return (value ?? '');\n        };\n    }\n    return (template\n        .replace(/\\{\\{\\{([^}]+)\\}\\}\\}/g, replacer(3, false))\n        .replace(/\\{\\{([^}]+)\\}\\}/g, replacer(2, true)));\n}\nexports.render = render;\n//# sourceMappingURL=placeholders.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst aggregate_error_1 = __importDefault(require(\"aggregate-error\"));\nconst ts_custom_error_1 = require(\"ts-custom-error\");\nconst is_directive_1 = require(\"./is-directive\");\nconst real_type_of_1 = require(\"../real-type-of\");\nclass ValidationError extends ts_custom_error_1.CustomError {\n    constructor(message, stack = []) {\n        super(`/${stack.join('/')} ${message}.`);\n    }\n}\nfunction flatAggregate(errors) {\n    const result = [];\n    errors.forEach((error) => {\n        if (error instanceof aggregate_error_1.default) {\n            result.push(...error);\n        }\n        else {\n            result.push(error);\n        }\n    });\n    return result;\n}\nfunction realTypeOrDirective(value) {\n    const type = real_type_of_1.realTypeOf(value);\n    if (type === 'object' && Object.keys(value).some((k) => k.startsWith('@'))) {\n        return 'directive';\n    }\n    return type;\n}\nconst directives = {};\nfunction validateDirective(obj, stack = []) {\n    if (!is_directive_1.isDirective(obj) && !real_type_of_1.isObject(obj)) {\n        const type = real_type_of_1.realTypeOf(obj);\n        throw new ValidationError(`should be a directive object but it is ${indefiniteArticle(type)} ${type}`, stack);\n    }\n    const keys = Object.keys(obj);\n    const directiveKeys = keys.filter((key) => key.startsWith('@'));\n    if (directiveKeys.length > 1) {\n        throw new ValidationError(`should only have one @-prefixed key but it has ${directiveKeys.length} keys`, stack);\n    }\n    const otherKeys = keys.filter((key) => !key.startsWith('@') && key !== '_metadata');\n    if (otherKeys.length > 0) {\n        throw new ValidationError(`should only have one @-prefixed key but it has ${keys.length} keys`, stack);\n    }\n    const directiveKey = directiveKeys[0];\n    const fn = directives[directiveKey];\n    if (typeof fn !== 'function') {\n        throw new ValidationError(`has an invalid directive: ${directiveKey}`, stack);\n    }\n    fn(obj[directiveKey], stack);\n}\nfunction validateDirectiveOrRaw(v, stack = []) {\n    const type = realTypeOrDirective(v);\n    switch (type) {\n        case 'directive':\n            return validateDirective(v, stack);\n        case 'object':\n        case 'array':\n        case 'boolean':\n        case 'string':\n        case 'number':\n        case 'null':\n            return;\n        default:\n            throw new ValidationError(`should be a mapping directive or a JSON value but it is ${indefiniteArticle(type)} ${type}`, stack);\n    }\n}\nfunction validateDirectiveOrString(v, stack = []) {\n    const type = realTypeOrDirective(v);\n    switch (type) {\n        case 'directive':\n            return validateDirective(v, stack);\n        case 'string':\n            return;\n        default:\n            throw new ValidationError(`should be a string or a mapping directive but it is ${indefiniteArticle(type)} ${type}`, stack);\n    }\n}\nfunction validateObject(value, stack = []) {\n    const type = realTypeOrDirective(value);\n    if (type !== 'object') {\n        throw new ValidationError(`should be an object but it is ${indefiniteArticle(type)} ${type}`, stack);\n    }\n    const obj = value;\n    const keys = Object.keys(obj);\n    const directiveKey = keys.find((k) => k.charAt(0) === '@');\n    if (directiveKey) {\n        throw new ValidationError(`shouldn't have directive (@-prefixed) keys but it has ${JSON.stringify(directiveKey)}`, stack);\n    }\n    const errors = [];\n    keys.forEach((k) => {\n        try {\n            validate(obj[k], [...stack, k]);\n        }\n        catch (e) {\n            errors.push(e);\n        }\n    });\n    if (errors.length) {\n        throw new aggregate_error_1.default(flatAggregate(errors));\n    }\n}\nfunction validateObjectWithFields(input, fields, stack = []) {\n    validateObject(input, stack);\n    const errors = [];\n    const obj = input;\n    Object.entries(fields).forEach(([prop, { required, optional }]) => {\n        try {\n            if (required) {\n                if (obj[prop] === undefined) {\n                    throw new ValidationError(`should have field ${JSON.stringify(prop)} but it doesn't`, stack);\n                }\n                required(obj[prop], [...stack, prop]);\n            }\n            else if (optional) {\n                if (obj[prop] !== undefined) {\n                    optional(obj[prop], [...stack, prop]);\n                }\n            }\n        }\n        catch (error) {\n            errors.push(error);\n        }\n    });\n    if (errors.length) {\n        throw new aggregate_error_1.default(flatAggregate(errors));\n    }\n}\nfunction validateArray(arr, stack = []) {\n    const type = real_type_of_1.realTypeOf(arr);\n    if (type !== 'array') {\n        throw new ValidationError(`should be an array but it is ${indefiniteArticle(type)} ${type}`, stack);\n    }\n}\nfunction directive(names, fn) {\n    if (!Array.isArray(names)) {\n        names = [names];\n    }\n    names.forEach((name) => {\n        directives[name] = (v, stack = []) => {\n            try {\n                fn(v, [...stack, name]);\n            }\n            catch (e) {\n                if (e instanceof ValidationError || e instanceof aggregate_error_1.default) {\n                    throw e;\n                }\n                throw new ValidationError(e.message, stack);\n            }\n        };\n    });\n}\ndirective('@if', (v, stack) => {\n    validateObjectWithFields(v, {\n        exists: { optional: validateDirectiveOrRaw },\n        then: { optional: validateDirectiveOrRaw },\n        else: { optional: validateDirectiveOrRaw }\n    }, stack);\n});\ndirective('@arrayPath', (v, stack) => {\n    const data = v;\n    validateArray(data, stack);\n    validateDirectiveOrString(data[0], stack);\n    validate(data[1], stack);\n});\ndirective('@path', (v, stack) => {\n    validateDirectiveOrString(v, stack);\n});\ndirective('@template', (v, stack) => {\n    validateDirectiveOrString(v, stack);\n});\ndirective('@literal', (v, stack) => {\n    validateDirectiveOrRaw(v, stack);\n});\nfunction indefiniteArticle(s) {\n    switch (s.charAt(0)) {\n        case 'a':\n        case 'e':\n        case 'i':\n        case 'o':\n        case 'u':\n            return 'an';\n        default:\n            return 'a';\n    }\n}\nfunction validate(mapping, stack = []) {\n    switch (realTypeOrDirective(mapping)) {\n        case 'directive':\n            return validateDirective(mapping, stack);\n        case 'object':\n            return validateObject(mapping, stack);\n        case 'array':\n            return validateArray(mapping, stack);\n        default:\n            return null;\n    }\n}\nexports.default = validate;\n//# sourceMappingURL=validate.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst headersToObject = (headers) => {\n    const obj = {};\n    for (const [key, value] of headers.entries()) {\n        obj[key] = value;\n    }\n    return obj;\n};\nconst prepareHeaders = async (_request, _options, response) => {\n    Object.defineProperty(response.headers, 'toJSON', {\n        enumerable: false,\n        value: () => headersToObject(response.headers)\n    });\n    return response;\n};\nexports.default = prepareHeaders;\n//# sourceMappingURL=prepare-headers.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst prepareResponse = async (_request, _options, response) => {\n    const modifiedResponse = response;\n    const clone = response.clone();\n    const content = await clone.text();\n    let data;\n    try {\n        if (modifiedResponse.headers.get('content-type')?.includes('application/json')) {\n            data = JSON.parse(content);\n        }\n        else {\n            data = content;\n        }\n    }\n    catch (_error) {\n    }\n    modifiedResponse.content = content;\n    modifiedResponse.data = data;\n    return modifiedResponse;\n};\nexports.default = prepareResponse;\n//# sourceMappingURL=prepare-response.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst btoa_lite_1 = __importDefault(require(\"btoa-lite\"));\nconst addBasicAuthHeader = (options) => {\n    if (options.username || options.password) {\n        const username = options.username || '';\n        const password = options.password || '';\n        const encoded = btoa_lite_1.default(`${username}:${password}`);\n        const authorization = `Basic ${encoded}`;\n        return {\n            headers: {\n                Authorization: authorization\n            }\n        };\n    }\n};\nexports.default = addBasicAuthHeader;\n//# sourceMappingURL=add-basic-auth-header.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.omit = void 0;\nfunction omit(obj, keys) {\n    return Object.keys(obj || {}).reduce((newObject, key) => {\n        if (keys.indexOf(key) === -1)\n            newObject[key] = obj[key];\n        return newObject;\n    }, {});\n}\nexports.omit = omit;\n//# sourceMappingURL=omit.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isString = exports.isArray = exports.isObject = exports.realTypeOf = void 0;\nfunction realTypeOf(obj) {\n    return Object.prototype.toString.call(obj).slice(8, -1).toLowerCase();\n}\nexports.realTypeOf = realTypeOf;\nfunction isObject(value) {\n    return realTypeOf(value) === 'object';\n}\nexports.isObject = isObject;\nfunction isArray(value) {\n    return Array.isArray(value);\n}\nexports.isArray = isArray;\nfunction isString(value) {\n    return typeof value === 'string';\n}\nexports.isString = isString;\n//# sourceMappingURL=real-type-of.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.removeEmptyValues = void 0;\nconst real_type_of_1 = require(\"./real-type-of\");\nconst arrify_1 = require(\"./arrify\");\nfunction removeEmptyValues(obj, schema = {}, isRoot = false) {\n    if (!schema.type && !schema.enum) {\n        return obj;\n    }\n    if (real_type_of_1.isArray(obj)) {\n        if (!schema.items)\n            return obj;\n        return obj.filter((item) => removeEmptyValues(item, schema.items) !== undefined);\n    }\n    if (real_type_of_1.isObject(obj)) {\n        if (!schema.properties)\n            return obj;\n        const newObj = { ...obj };\n        for (const key of Object.keys(newObj)) {\n            newObj[key] = removeEmptyValues(newObj[key], schema.properties[key]);\n            if (newObj[key] === undefined) {\n                delete newObj[key];\n            }\n            if (newObj[key] === '' && isRoot) {\n                delete newObj[key];\n            }\n        }\n        return newObj;\n    }\n    const schemaType = arrify_1.arrify(schema.type);\n    if (obj === null && !schemaType.includes('null')) {\n        return undefined;\n    }\n    if (obj === '' && !schemaType.includes('string')) {\n        return undefined;\n    }\n    return obj;\n}\nexports.removeEmptyValues = removeEmptyValues;\n//# sourceMappingURL=remove-empty-values.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.removeUndefined = void 0;\nconst real_type_of_1 = require(\"./real-type-of\");\nfunction removeUndefined(value) {\n    if (Array.isArray(value)) {\n        return value.map((item) => removeUndefined(item));\n    }\n    else if (real_type_of_1.isObject(value)) {\n        const cleaned = Object.assign({}, value);\n        Object.keys(cleaned).forEach((key) => {\n            if (cleaned[key] === undefined) {\n                delete cleaned[key];\n            }\n            else {\n                cleaned[key] = removeUndefined(cleaned[key]);\n            }\n        });\n        return cleaned;\n    }\n    return value;\n}\nexports.removeUndefined = removeUndefined;\n//# sourceMappingURL=remove-undefined.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TimeoutError = exports.HTTPError = void 0;\nconst abort_controller_1 = __importDefault(require(\"abort-controller\"));\nconst ts_custom_error_1 = require(\"ts-custom-error\");\nconst fetch_1 = __importStar(require(\"./fetch\"));\nconst real_type_of_1 = require(\"./real-type-of\");\nconst isObjectLike = (value) => {\n    return value !== null && typeof value === 'object';\n};\nfunction mergeHeaders(source1, source2) {\n    const result = new fetch_1.Headers(source1 || {});\n    const source = new fetch_1.Headers(source2 || {});\n    source.forEach((value, key) => {\n        if (value === 'undefined') {\n            result.delete(key);\n        }\n        else {\n            result.set(key, value);\n        }\n    });\n    return result;\n}\nfunction merge(...sources) {\n    let result = {};\n    let headers = {};\n    for (const source of sources) {\n        if (Array.isArray(source)) {\n            if (!Array.isArray(result)) {\n                result = [];\n            }\n            result = [...result, ...source];\n        }\n        else if (isObjectLike(source)) {\n            for (let [key, value] of Object.entries(source)) {\n                if (isObjectLike(value) && key in result) {\n                    value = merge(result[key], value);\n                }\n                result[key] = value;\n            }\n            if (isObjectLike(source.headers)) {\n                headers = mergeHeaders(headers, source.headers);\n            }\n        }\n        result.headers = headers;\n    }\n    return result;\n}\nfunction mergeOptions(...sources) {\n    for (const source of sources) {\n        if (!real_type_of_1.isObject(source)) {\n            throw new TypeError(`The 'options' argument must be an object`);\n        }\n    }\n    return merge({}, ...sources);\n}\nfunction getRequestMethod(method) {\n    return method.toUpperCase();\n}\nclass HTTPError extends ts_custom_error_1.CustomError {\n    constructor(response, request, options) {\n        super(response.statusText ?? String(response.status ?? 'Unknown response error'));\n        this.response = response;\n        this.request = request;\n        this.options = options;\n    }\n}\nexports.HTTPError = HTTPError;\nclass TimeoutError extends ts_custom_error_1.CustomError {\n    constructor(request, options) {\n        super(`Request timed out`);\n        this.request = request;\n        this.options = options;\n    }\n}\nexports.TimeoutError = TimeoutError;\nfunction timeoutFetch(request, abortController, options) {\n    return new Promise((resolve, reject) => {\n        const timer = setTimeout(() => {\n            if (abortController) {\n                abortController.abort();\n            }\n            reject(new TimeoutError(request, options));\n        }, options.timeout);\n        void fetch_1.default(request)\n            .then(resolve)\n            .catch(reject)\n            .then(() => clearTimeout(timer));\n    });\n}\nclass RequestClient {\n    constructor(url, options = {}) {\n        this.setOptions(url, options);\n    }\n    setOptions(url, options) {\n        this.options = {\n            ...options,\n            method: getRequestMethod(options.method ?? 'get'),\n            throwHttpErrors: options.throwHttpErrors !== false,\n            timeout: options.timeout ?? 10000\n        };\n        this.abortController = new abort_controller_1.default();\n        if (this.options.signal) {\n            this.options.signal.addEventListener('abort', () => {\n                this.abortController.abort();\n            });\n        }\n        this.options.signal = this.abortController.signal;\n        this.request = new fetch_1.Request(url, this.options);\n        if (this.options.searchParams) {\n            const searchParams = new URLSearchParams(this.options.searchParams);\n            const url = new URL(this.request.url);\n            url.search = searchParams.toString();\n            this.request = new fetch_1.Request(new fetch_1.Request(url.toString(), this.request), this.options);\n        }\n        if (this.options.json !== undefined) {\n            this.options.body = JSON.stringify(this.options.json);\n            this.request.headers.set('content-type', 'application/json');\n            this.request = new fetch_1.Request(this.request, { body: this.options.body });\n        }\n    }\n    async executeRequest() {\n        let response = await this.fetch();\n        for (const hook of this.options.afterResponse ?? []) {\n            const modifiedResponse = await hook(this.request, this.options, response);\n            if (modifiedResponse instanceof fetch_1.Response) {\n                response = modifiedResponse;\n            }\n        }\n        if (!response.ok && this.options.throwHttpErrors) {\n            throw new HTTPError(response, this.request, this.options);\n        }\n        return response;\n    }\n    async fetch() {\n        for (const hook of this.options.beforeRequest ?? []) {\n            const newOptions = await hook({ ...this.options });\n            if (newOptions && real_type_of_1.isObject(newOptions)) {\n                this.setOptions(this.request.url, mergeOptions(this.options, newOptions));\n            }\n        }\n        if (this.options.timeout === false) {\n            return fetch_1.default(this.request.clone());\n        }\n        return timeoutFetch(this.request.clone(), this.abortController, this.options);\n    }\n}\nfunction createInstance(defaults = {}) {\n    const client = (url, options = {}) => new RequestClient(url, mergeOptions(defaults, options)).executeRequest();\n    client.extend = (newDefaults) => createInstance(mergeOptions(defaults, newDefaults));\n    return client;\n}\nexports.default = createInstance;\n//# sourceMappingURL=request-client.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.retry = void 0;\nconst DEFAULT_RETRY_ATTEMPTS = 2;\nasync function retry(input, options) {\n    const retries = options?.retries ?? DEFAULT_RETRY_ATTEMPTS;\n    for (let attemptCount = 1; attemptCount <= retries; attemptCount++) {\n        try {\n            return await input(attemptCount);\n        }\n        catch (error) {\n            if (options?.onFailedAttempt) {\n                await options.onFailedAttempt(error, attemptCount);\n            }\n            if (!error || attemptCount >= retries) {\n                throw error;\n            }\n        }\n    }\n    throw new Error('Exhausted all retries.');\n}\nexports.retry = retry;\n//# sourceMappingURL=retry.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateSchema = void 0;\nconst ajv_human_errors_1 = require(\"@segment/ajv-human-errors\");\nconst ajv_1 = __importDefault(require(\"ajv\"));\nconst ajv_formats_1 = __importDefault(require(\"ajv-formats\"));\nconst dayjs_1 = __importDefault(require(\"dayjs\"));\nconst arrify_1 = require(\"./arrify\");\nconst ajv = ajv_formats_1.default(new ajv_1.default({\n    coerceTypes: 'array',\n    allErrors: true,\n    allowUnionTypes: true,\n    verbose: true,\n    removeAdditional: true\n}));\najv.addFormat('text', true);\najv.addFormat('date-like', (data) => {\n    let date = dayjs_1.default(data);\n    if (String(Number(data)) === data) {\n        if (data.length === 13) {\n            date = dayjs_1.default(Number(data));\n        }\n        date = dayjs_1.default.unix(Number(data));\n    }\n    return date.isValid();\n});\nfunction validateSchema(obj, schema, options) {\n    const { schemaKey, throwIfInvalid = true } = options ?? {};\n    let validate;\n    if (schemaKey) {\n        validate = ajv.getSchema(schemaKey) || ajv.addSchema(schema, schemaKey).getSchema(schemaKey);\n    }\n    else {\n        validate = ajv.compile(schema);\n    }\n    arrify_1.arrifyFields(obj, schema);\n    const isValid = validate(obj);\n    if (throwIfInvalid && !isValid && validate.errors) {\n        throw new ajv_human_errors_1.AggregateAjvError(validate.errors);\n    }\n    return isValid;\n}\nexports.validateSchema = validateSchema;\n//# sourceMappingURL=schema-validation.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.duration = exports.time = void 0;\nfunction time() {\n    return process.hrtime.bigint();\n}\nexports.time = time;\nfunction duration(start, stop) {\n    return Number(stop - start) / 1000000;\n}\nexports.duration = duration;\n//# sourceMappingURL=time.js.map","export function get(obj, path) {\n    if (path === '' || path === '.')\n        return obj;\n    if (path === null || path == undefined)\n        return undefined;\n    const pathArray = Array.isArray(path) ? path : path.match(/([^[.\\]])+/g);\n    return pathArray.reduce((prevObj, key) => prevObj && prevObj[key], obj);\n}\n//# sourceMappingURL=get.js.map","import { isObject } from '../real-type-of';\nexport function isDirective(obj) {\n    if (!isObject(obj)) {\n        return false;\n    }\n    const keys = Object.keys(obj);\n    const hasDirectivePrefix = keys.some((key) => key.startsWith('@'));\n    if (!hasDirectivePrefix) {\n        return false;\n    }\n    const otherKeys = keys.filter((key) => !key.startsWith('@') && key !== '_metadata');\n    if (otherKeys.length === 0) {\n        return true;\n    }\n    return false;\n}\n//# sourceMappingURL=is-directive.js.map","import { get } from '../get';\nimport { realTypeOf } from '../real-type-of';\nconst entityMap = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '/': '&#x2F;',\n    '`': '&#x60;',\n    '=': '&#x3D;'\n};\nfunction escapeHtml(value) {\n    if (typeof value !== 'string')\n        return value;\n    return value.replace(/[&<>\"'`=/]/g, (match) => {\n        return entityMap[match];\n    });\n}\nexport function render(template, data = {}) {\n    if (typeof template !== 'string') {\n        throw new TypeError(`Invalid template! Template should be a \"string\" but ${realTypeOf(template)} was given.`);\n    }\n    function replacer(chars, escape) {\n        return (match) => {\n            match = match.slice(chars, -chars).trim();\n            const value = get(data, match);\n            if (escape) {\n                return String(escapeHtml(value) ?? '');\n            }\n            return (value ?? '');\n        };\n    }\n    return (template\n        .replace(/\\{\\{\\{([^}]+)\\}\\}\\}/g, replacer(3, false))\n        .replace(/\\{\\{([^}]+)\\}\\}/g, replacer(2, true)));\n}\n//# sourceMappingURL=placeholders.js.map","import { isObject } from './real-type-of';\nexport function removeUndefined(value) {\n    if (Array.isArray(value)) {\n        return value.map((item) => removeUndefined(item));\n    }\n    else if (isObject(value)) {\n        const cleaned = Object.assign({}, value);\n        Object.keys(cleaned).forEach((key) => {\n            if (cleaned[key] === undefined) {\n                delete cleaned[key];\n            }\n            else {\n                cleaned[key] = removeUndefined(cleaned[key]);\n            }\n        });\n        return cleaned;\n    }\n    return value;\n}\n//# sourceMappingURL=remove-undefined.js.map","import AggregateError from 'aggregate-error';\nimport { CustomError } from 'ts-custom-error';\nimport { isDirective } from './is-directive';\nimport { isObject, realTypeOf } from '../real-type-of';\nclass ValidationError extends CustomError {\n    constructor(message, stack = []) {\n        super(`/${stack.join('/')} ${message}.`);\n    }\n}\nfunction flatAggregate(errors) {\n    const result = [];\n    errors.forEach((error) => {\n        if (error instanceof AggregateError) {\n            result.push(...error);\n        }\n        else {\n            result.push(error);\n        }\n    });\n    return result;\n}\nfunction realTypeOrDirective(value) {\n    const type = realTypeOf(value);\n    if (type === 'object' && Object.keys(value).some((k) => k.startsWith('@'))) {\n        return 'directive';\n    }\n    return type;\n}\nconst directives = {};\nfunction validateDirective(obj, stack = []) {\n    if (!isDirective(obj) && !isObject(obj)) {\n        const type = realTypeOf(obj);\n        throw new ValidationError(`should be a directive object but it is ${indefiniteArticle(type)} ${type}`, stack);\n    }\n    const keys = Object.keys(obj);\n    const directiveKeys = keys.filter((key) => key.startsWith('@'));\n    if (directiveKeys.length > 1) {\n        throw new ValidationError(`should only have one @-prefixed key but it has ${directiveKeys.length} keys`, stack);\n    }\n    const otherKeys = keys.filter((key) => !key.startsWith('@') && key !== '_metadata');\n    if (otherKeys.length > 0) {\n        throw new ValidationError(`should only have one @-prefixed key but it has ${keys.length} keys`, stack);\n    }\n    const directiveKey = directiveKeys[0];\n    const fn = directives[directiveKey];\n    if (typeof fn !== 'function') {\n        throw new ValidationError(`has an invalid directive: ${directiveKey}`, stack);\n    }\n    fn(obj[directiveKey], stack);\n}\nfunction validateDirectiveOrRaw(v, stack = []) {\n    const type = realTypeOrDirective(v);\n    switch (type) {\n        case 'directive':\n            return validateDirective(v, stack);\n        case 'object':\n        case 'array':\n        case 'boolean':\n        case 'string':\n        case 'number':\n        case 'null':\n            return;\n        default:\n            throw new ValidationError(`should be a mapping directive or a JSON value but it is ${indefiniteArticle(type)} ${type}`, stack);\n    }\n}\nfunction validateDirectiveOrString(v, stack = []) {\n    const type = realTypeOrDirective(v);\n    switch (type) {\n        case 'directive':\n            return validateDirective(v, stack);\n        case 'string':\n            return;\n        default:\n            throw new ValidationError(`should be a string or a mapping directive but it is ${indefiniteArticle(type)} ${type}`, stack);\n    }\n}\nfunction validateObject(value, stack = []) {\n    const type = realTypeOrDirective(value);\n    if (type !== 'object') {\n        throw new ValidationError(`should be an object but it is ${indefiniteArticle(type)} ${type}`, stack);\n    }\n    const obj = value;\n    const keys = Object.keys(obj);\n    const directiveKey = keys.find((k) => k.charAt(0) === '@');\n    if (directiveKey) {\n        throw new ValidationError(`shouldn't have directive (@-prefixed) keys but it has ${JSON.stringify(directiveKey)}`, stack);\n    }\n    const errors = [];\n    keys.forEach((k) => {\n        try {\n            validate(obj[k], [...stack, k]);\n        }\n        catch (e) {\n            errors.push(e);\n        }\n    });\n    if (errors.length) {\n        throw new AggregateError(flatAggregate(errors));\n    }\n}\nfunction validateObjectWithFields(input, fields, stack = []) {\n    validateObject(input, stack);\n    const errors = [];\n    const obj = input;\n    Object.entries(fields).forEach(([prop, { required, optional }]) => {\n        try {\n            if (required) {\n                if (obj[prop] === undefined) {\n                    throw new ValidationError(`should have field ${JSON.stringify(prop)} but it doesn't`, stack);\n                }\n                required(obj[prop], [...stack, prop]);\n            }\n            else if (optional) {\n                if (obj[prop] !== undefined) {\n                    optional(obj[prop], [...stack, prop]);\n                }\n            }\n        }\n        catch (error) {\n            errors.push(error);\n        }\n    });\n    if (errors.length) {\n        throw new AggregateError(flatAggregate(errors));\n    }\n}\nfunction validateArray(arr, stack = []) {\n    const type = realTypeOf(arr);\n    if (type !== 'array') {\n        throw new ValidationError(`should be an array but it is ${indefiniteArticle(type)} ${type}`, stack);\n    }\n}\nfunction directive(names, fn) {\n    if (!Array.isArray(names)) {\n        names = [names];\n    }\n    names.forEach((name) => {\n        directives[name] = (v, stack = []) => {\n            try {\n                fn(v, [...stack, name]);\n            }\n            catch (e) {\n                if (e instanceof ValidationError || e instanceof AggregateError) {\n                    throw e;\n                }\n                throw new ValidationError(e.message, stack);\n            }\n        };\n    });\n}\ndirective('@if', (v, stack) => {\n    validateObjectWithFields(v, {\n        exists: { optional: validateDirectiveOrRaw },\n        then: { optional: validateDirectiveOrRaw },\n        else: { optional: validateDirectiveOrRaw }\n    }, stack);\n});\ndirective('@arrayPath', (v, stack) => {\n    const data = v;\n    validateArray(data, stack);\n    validateDirectiveOrString(data[0], stack);\n    validate(data[1], stack);\n});\ndirective('@path', (v, stack) => {\n    validateDirectiveOrString(v, stack);\n});\ndirective('@template', (v, stack) => {\n    validateDirectiveOrString(v, stack);\n});\ndirective('@literal', (v, stack) => {\n    validateDirectiveOrRaw(v, stack);\n});\nfunction indefiniteArticle(s) {\n    switch (s.charAt(0)) {\n        case 'a':\n        case 'e':\n        case 'i':\n        case 'o':\n        case 'u':\n            return 'an';\n        default:\n            return 'a';\n    }\n}\nexport default function validate(mapping, stack = []) {\n    switch (realTypeOrDirective(mapping)) {\n        case 'directive':\n            return validateDirective(mapping, stack);\n        case 'object':\n            return validateObject(mapping, stack);\n        case 'array':\n            return validateArray(mapping, stack);\n        default:\n            return null;\n    }\n}\n//# sourceMappingURL=validate.js.map","import { isArray, isObject } from './real-type-of';\nexport function arrify(value, treatNullAsEmpty = true) {\n    if (value === undefined || value === null)\n        return treatNullAsEmpty ? [] : value;\n    if (isArray(value))\n        return value;\n    return [value];\n}\nexport function arrifyFields(obj, schema = {}) {\n    if (!isObject(obj)) {\n        return obj;\n    }\n    if (!schema.properties)\n        return obj;\n    for (const key of Object.keys(obj)) {\n        const fieldSchema = schema.properties[key];\n        if (!fieldSchema)\n            continue;\n        if (fieldSchema.type === 'array') {\n            obj[key] = arrify(obj[key], false);\n        }\n    }\n    return obj;\n}\n//# sourceMappingURL=arrify.js.map","import { get } from '../get';\nimport { isDirective } from './is-directive';\nimport { render } from './placeholders';\nimport { realTypeOf, isObject, isArray } from '../real-type-of';\nimport { removeUndefined } from '../remove-undefined';\nimport validate from './validate';\nimport { arrify } from '../arrify';\nconst directives = {};\nconst directiveRegExp = /^@[a-z][a-zA-Z0-9]+$/;\nfunction registerDirective(name, fn) {\n    if (!directiveRegExp.exec(name)) {\n        throw new Error(`\"${name}\" is an invalid directive name`);\n    }\n    directives[name] = fn;\n}\nfunction registerStringDirective(name, fn) {\n    registerDirective(name, (value, payload) => {\n        const str = resolve(value, payload);\n        if (typeof str !== 'string') {\n            throw new Error(`${name}: expected string, got ${realTypeOf(str)}`);\n        }\n        return fn(str, payload);\n    });\n}\nfunction runDirective(obj, payload) {\n    const name = Object.keys(obj).find((key) => key.startsWith('@'));\n    const directiveFn = directives[name];\n    const value = obj[name];\n    if (typeof directiveFn !== 'function') {\n        throw new Error(`${name} is not a valid directive, got ${realTypeOf(directiveFn)}`);\n    }\n    return directiveFn(value, payload);\n}\nregisterDirective('@if', (opts, payload) => {\n    let condition = false;\n    if (!isObject(opts)) {\n        throw new Error('@if requires an object with an \"exists\" key');\n    }\n    if (opts.exists !== undefined) {\n        const value = resolve(opts.exists, payload);\n        condition = value !== undefined && value !== null;\n    }\n    else {\n        throw new Error('@if requires an \"exists\" key');\n    }\n    if (condition && opts.then !== undefined) {\n        return resolve(opts.then, payload);\n    }\n    else if (!condition && opts.else) {\n        return resolve(opts.else, payload);\n    }\n});\nregisterDirective('@arrayPath', (data, payload) => {\n    if (!Array.isArray(data)) {\n        throw new Error(`@arrayPath expected array, got ${realTypeOf(data)}`);\n    }\n    const [path, itemShape] = data;\n    const root = typeof path === 'string' ? get(payload, path.replace('$.', '')) : resolve(path, payload);\n    if (['object', 'array'].includes(realTypeOf(root)) &&\n        realTypeOf(itemShape) === 'object' &&\n        Object.keys(itemShape).length > 0) {\n        return arrify(root).map((item) => resolve(itemShape, item));\n    }\n    return root;\n});\nregisterStringDirective('@path', (path, payload) => {\n    return get(payload, path.replace('$.', ''));\n});\nregisterStringDirective('@template', (template, payload) => {\n    return render(template, payload);\n});\nregisterDirective('@literal', (value, payload) => {\n    return resolve(value, payload);\n});\nfunction resolve(mapping, payload) {\n    if (!isObject(mapping) && !isArray(mapping)) {\n        return mapping;\n    }\n    if (isDirective(mapping)) {\n        return runDirective(mapping, payload);\n    }\n    if (Array.isArray(mapping)) {\n        return mapping.map((value) => resolve(value, payload));\n    }\n    const resolved = {};\n    for (const key of Object.keys(mapping)) {\n        resolved[key] = resolve(mapping[key], payload);\n    }\n    return resolved;\n}\nexport function transform(mapping, data = {}) {\n    const realType = realTypeOf(data);\n    if (realType !== 'object') {\n        throw new Error(`data must be an object, got ${realType}`);\n    }\n    validate(mapping);\n    const resolved = resolve(mapping, data);\n    const cleaned = removeUndefined(resolved);\n    return cleaned;\n}\nexport function transformBatch(mapping, data = []) {\n    const realType = realTypeOf(data);\n    if (!isArray(data)) {\n        throw new Error(`data must be an array, got ${realType}`);\n    }\n    validate(mapping);\n    const resolved = data.map((d) => resolve(mapping, d));\n    return removeUndefined(resolved);\n}\n//# sourceMappingURL=index.js.map","export function realTypeOf(obj) {\n    return Object.prototype.toString.call(obj).slice(8, -1).toLowerCase();\n}\nexport function isObject(value) {\n    return realTypeOf(value) === 'object';\n}\nexport function isArray(value) {\n    return Array.isArray(value);\n}\nexport function isString(value) {\n    return typeof value === 'string';\n}\n//# sourceMappingURL=real-type-of.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formatNames = exports.fastFormats = exports.fullFormats = void 0;\nfunction fmtDef(validate, compare) {\n    return { validate, compare };\n}\nexports.fullFormats = {\n    // date: http://tools.ietf.org/html/rfc3339#section-5.6\n    date: fmtDef(date, compareDate),\n    // date-time: http://tools.ietf.org/html/rfc3339#section-5.6\n    time: fmtDef(time, compareTime),\n    \"date-time\": fmtDef(date_time, compareDateTime),\n    // duration: https://tools.ietf.org/html/rfc3339#appendix-A\n    duration: /^P(?!$)((\\d+Y)?(\\d+M)?(\\d+D)?(T(?=\\d)(\\d+H)?(\\d+M)?(\\d+S)?)?|(\\d+W)?)$/,\n    uri,\n    \"uri-reference\": /^(?:[a-z][a-z0-9+\\-.]*:)?(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'\"()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'\"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\\?(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'\"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,\n    // uri-template: https://tools.ietf.org/html/rfc6570\n    \"uri-template\": /^(?:(?:[^\\x00-\\x20\"'<>%\\\\^`{|}]|%[0-9a-f]{2})|\\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\\*)?)*\\})*$/i,\n    // For the source: https://gist.github.com/dperini/729294\n    // For test cases: https://mathiasbynens.be/demo/url-regex\n    url: /^(?:https?|ftp):\\/\\/(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)(?:\\.(?:[a-z0-9\\u{00a1}-\\u{ffff}]+-)*[a-z0-9\\u{00a1}-\\u{ffff}]+)*(?:\\.(?:[a-z\\u{00a1}-\\u{ffff}]{2,})))(?::\\d{2,5})?(?:\\/[^\\s]*)?$/iu,\n    email: /^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,\n    hostname: /^(?=.{1,253}\\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\\.?$/i,\n    // optimized https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9780596802837/ch07s16.html\n    ipv4: /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/,\n    ipv6: /^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(\\.(25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))$/i,\n    regex,\n    // uuid: http://tools.ietf.org/html/rfc4122\n    uuid: /^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,\n    // JSON-pointer: https://tools.ietf.org/html/rfc6901\n    // uri fragment: https://tools.ietf.org/html/rfc3986#appendix-A\n    \"json-pointer\": /^(?:\\/(?:[^~/]|~0|~1)*)*$/,\n    \"json-pointer-uri-fragment\": /^#(?:\\/(?:[a-z0-9_\\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,\n    // relative JSON-pointer: http://tools.ietf.org/html/draft-luff-relative-json-pointer-00\n    \"relative-json-pointer\": /^(?:0|[1-9][0-9]*)(?:#|(?:\\/(?:[^~/]|~0|~1)*)*)$/,\n    // the following formats are used by the openapi specification: https://spec.openapis.org/oas/v3.0.0#data-types\n    // byte: https://github.com/miguelmota/is-base64\n    byte,\n    // signed 32 bit integer\n    int32: { type: \"number\", validate: validateInt32 },\n    // signed 64 bit integer\n    int64: { type: \"number\", validate: validateInt64 },\n    // C-type float\n    float: { type: \"number\", validate: validateNumber },\n    // C-type double\n    double: { type: \"number\", validate: validateNumber },\n    // hint to the UI to hide input strings\n    password: true,\n    // unchecked string payload\n    binary: true,\n};\nexports.fastFormats = {\n    ...exports.fullFormats,\n    date: fmtDef(/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d$/, compareDate),\n    time: fmtDef(/^(?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)?$/i, compareTime),\n    \"date-time\": fmtDef(/^\\d\\d\\d\\d-[0-1]\\d-[0-3]\\d[t\\s](?:[0-2]\\d:[0-5]\\d:[0-5]\\d|23:59:60)(?:\\.\\d+)?(?:z|[+-]\\d\\d(?::?\\d\\d)?)$/i, compareDateTime),\n    // uri: https://github.com/mafintosh/is-my-json-valid/blob/master/formats.js\n    uri: /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/)?[^\\s]*$/i,\n    \"uri-reference\": /^(?:(?:[a-z][a-z0-9+\\-.]*:)?\\/?\\/)?(?:[^\\\\\\s#][^\\s#]*)?(?:#[^\\\\\\s]*)?$/i,\n    // email (sources from jsen validator):\n    // http://stackoverflow.com/questions/201323/using-a-regular-expression-to-validate-an-email-address#answer-8829363\n    // http://www.w3.org/TR/html5/forms.html#valid-e-mail-address (search for 'wilful violation')\n    email: /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,\n};\nexports.formatNames = Object.keys(exports.fullFormats);\nfunction isLeapYear(year) {\n    // https://tools.ietf.org/html/rfc3339#appendix-C\n    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\nconst DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\nconst DAYS = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nfunction date(str) {\n    // full-date from http://tools.ietf.org/html/rfc3339#section-5.6\n    const matches = DATE.exec(str);\n    if (!matches)\n        return false;\n    const year = +matches[1];\n    const month = +matches[2];\n    const day = +matches[3];\n    return (month >= 1 &&\n        month <= 12 &&\n        day >= 1 &&\n        day <= (month === 2 && isLeapYear(year) ? 29 : DAYS[month]));\n}\nfunction compareDate(d1, d2) {\n    if (!(d1 && d2))\n        return undefined;\n    if (d1 > d2)\n        return 1;\n    if (d1 < d2)\n        return -1;\n    return 0;\n}\nconst TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d(?::?\\d\\d)?)?$/i;\nfunction time(str, withTimeZone) {\n    const matches = TIME.exec(str);\n    if (!matches)\n        return false;\n    const hour = +matches[1];\n    const minute = +matches[2];\n    const second = +matches[3];\n    const timeZone = matches[5];\n    return (((hour <= 23 && minute <= 59 && second <= 59) ||\n        (hour === 23 && minute === 59 && second === 60)) &&\n        (!withTimeZone || timeZone !== \"\"));\n}\nfunction compareTime(t1, t2) {\n    if (!(t1 && t2))\n        return undefined;\n    const a1 = TIME.exec(t1);\n    const a2 = TIME.exec(t2);\n    if (!(a1 && a2))\n        return undefined;\n    t1 = a1[1] + a1[2] + a1[3] + (a1[4] || \"\");\n    t2 = a2[1] + a2[2] + a2[3] + (a2[4] || \"\");\n    if (t1 > t2)\n        return 1;\n    if (t1 < t2)\n        return -1;\n    return 0;\n}\nconst DATE_TIME_SEPARATOR = /t|\\s/i;\nfunction date_time(str) {\n    // http://tools.ietf.org/html/rfc3339#section-5.6\n    const dateTime = str.split(DATE_TIME_SEPARATOR);\n    return dateTime.length === 2 && date(dateTime[0]) && time(dateTime[1], true);\n}\nfunction compareDateTime(dt1, dt2) {\n    if (!(dt1 && dt2))\n        return undefined;\n    const [d1, t1] = dt1.split(DATE_TIME_SEPARATOR);\n    const [d2, t2] = dt2.split(DATE_TIME_SEPARATOR);\n    const res = compareDate(d1, d2);\n    if (res === undefined)\n        return undefined;\n    return res || compareTime(t1, t2);\n}\nconst NOT_URI_FRAGMENT = /\\/|:/;\nconst URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nfunction uri(str) {\n    // http://jmrware.com/articles/2009/uri_regexp/URI_regex.html + optional protocol + required \".\"\n    return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\nconst BYTE = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;\nfunction byte(str) {\n    BYTE.lastIndex = 0;\n    return BYTE.test(str);\n}\nconst MIN_INT32 = -(2 ** 31);\nconst MAX_INT32 = 2 ** 31 - 1;\nfunction validateInt32(value) {\n    return Number.isInteger(value) && value <= MAX_INT32 && value >= MIN_INT32;\n}\nfunction validateInt64(value) {\n    // JSON and javascript max Int is 2**53, so any int that passes isInteger is valid for Int64\n    return Number.isInteger(value);\n}\nfunction validateNumber() {\n    return true;\n}\nconst Z_ANCHOR = /[^\\\\]\\\\Z/;\nfunction regex(str) {\n    if (Z_ANCHOR.test(str))\n        return false;\n    try {\n        new RegExp(str);\n        return true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n//# sourceMappingURL=formats.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst formats_1 = require(\"./formats\");\nconst limit_1 = require(\"./limit\");\nconst codegen_1 = require(\"ajv/dist/compile/codegen\");\nconst fullName = new codegen_1.Name(\"fullFormats\");\nconst fastName = new codegen_1.Name(\"fastFormats\");\nconst formatsPlugin = (ajv, opts = { keywords: true }) => {\n    if (Array.isArray(opts)) {\n        addFormats(ajv, opts, formats_1.fullFormats, fullName);\n        return ajv;\n    }\n    const [formats, exportName] = opts.mode === \"fast\" ? [formats_1.fastFormats, fastName] : [formats_1.fullFormats, fullName];\n    const list = opts.formats || formats_1.formatNames;\n    addFormats(ajv, list, formats, exportName);\n    if (opts.keywords)\n        limit_1.default(ajv);\n    return ajv;\n};\nformatsPlugin.get = (name, mode = \"full\") => {\n    const formats = mode === \"fast\" ? formats_1.fastFormats : formats_1.fullFormats;\n    const f = formats[name];\n    if (!f)\n        throw new Error(`Unknown format \"${name}\"`);\n    return f;\n};\nfunction addFormats(ajv, list, fs, exportName) {\n    var _a;\n    var _b;\n    (_a = (_b = ajv.opts.code).formats) !== null && _a !== void 0 ? _a : (_b.formats = codegen_1._ `require(\"ajv-formats/dist/formats\").${exportName}`);\n    for (const f of list)\n        ajv.addFormat(f, fs[f]);\n}\nmodule.exports = exports = formatsPlugin;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = formatsPlugin;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.formatLimitDefinition = void 0;\nconst ajv_1 = require(\"ajv\");\nconst codegen_1 = require(\"ajv/dist/compile/codegen\");\nconst ops = codegen_1.operators;\nconst KWDs = {\n    formatMaximum: { okStr: \"<=\", ok: ops.LTE, fail: ops.GT },\n    formatMinimum: { okStr: \">=\", ok: ops.GTE, fail: ops.LT },\n    formatExclusiveMaximum: { okStr: \"<\", ok: ops.LT, fail: ops.GTE },\n    formatExclusiveMinimum: { okStr: \">\", ok: ops.GT, fail: ops.LTE },\n};\nconst error = {\n    message: ({ keyword, schemaCode }) => codegen_1.str `should be ${KWDs[keyword].okStr} ${schemaCode}`,\n    params: ({ keyword, schemaCode }) => codegen_1._ `{comparison: ${KWDs[keyword].okStr}, limit: ${schemaCode}}`,\n};\nexports.formatLimitDefinition = {\n    keyword: Object.keys(KWDs),\n    type: \"string\",\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, schemaCode, keyword, it } = cxt;\n        const { opts, self } = it;\n        if (!opts.validateFormats)\n            return;\n        const fCxt = new ajv_1.KeywordCxt(it, self.RULES.all.format.definition, \"format\");\n        if (fCxt.$data)\n            validate$DataFormat();\n        else\n            validateFormat();\n        function validate$DataFormat() {\n            const fmts = gen.scopeValue(\"formats\", {\n                ref: self.formats,\n                code: opts.code.formats,\n            });\n            const fmt = gen.const(\"fmt\", codegen_1._ `${fmts}[${fCxt.schemaCode}]`);\n            cxt.fail$data(codegen_1.or(codegen_1._ `typeof ${fmt} != \"object\"`, codegen_1._ `${fmt} instanceof RegExp`, codegen_1._ `typeof ${fmt}.compare != \"function\"`, compareCode(fmt)));\n        }\n        function validateFormat() {\n            const format = fCxt.schema;\n            const fmtDef = self.formats[format];\n            if (!fmtDef || fmtDef === true)\n                return;\n            if (typeof fmtDef != \"object\" ||\n                fmtDef instanceof RegExp ||\n                typeof fmtDef.compare != \"function\") {\n                throw new Error(`\"${keyword}\": format \"${format}\" does not define \"compare\" function`);\n            }\n            const fmt = gen.scopeValue(\"formats\", {\n                key: format,\n                ref: fmtDef,\n                code: opts.code.formats ? codegen_1._ `${opts.code.formats}${codegen_1.getProperty(format)}` : undefined,\n            });\n            cxt.fail$data(compareCode(fmt));\n        }\n        function compareCode(fmt) {\n            return codegen_1._ `${fmt}.compare(${data}, ${schemaCode}) ${KWDs[keyword].fail} 0`;\n        }\n    },\n    dependencies: [\"format\"],\n};\nconst formatLimitPlugin = (ajv) => {\n    ajv.addKeyword(exports.formatLimitDefinition);\n    return ajv;\n};\nexports.default = formatLimitPlugin;\n//# sourceMappingURL=limit.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = void 0;\nconst core_1 = require(\"./core\");\nconst draft7_1 = require(\"./vocabularies/draft7\");\nconst discriminator_1 = require(\"./vocabularies/discriminator\");\nconst draft7MetaSchema = require(\"./refs/json-schema-draft-07.json\");\nconst META_SUPPORT_DATA = [\"/properties\"];\nconst META_SCHEMA_ID = \"http://json-schema.org/draft-07/schema\";\nclass Ajv extends core_1.default {\n    _addVocabularies() {\n        super._addVocabularies();\n        draft7_1.default.forEach((v) => this.addVocabulary(v));\n        if (this.opts.discriminator)\n            this.addKeyword(discriminator_1.default);\n    }\n    _addDefaultMetaSchema() {\n        super._addDefaultMetaSchema();\n        if (!this.opts.meta)\n            return;\n        const metaSchema = this.opts.$data\n            ? this.$dataMetaSchema(draft7MetaSchema, META_SUPPORT_DATA)\n            : draft7MetaSchema;\n        this.addMetaSchema(metaSchema, META_SCHEMA_ID, false);\n        this.refs[\"http://json-schema.org/schema\"] = META_SCHEMA_ID;\n    }\n    defaultMeta() {\n        return (this.opts.defaultMeta =\n            super.defaultMeta() || (this.getSchema(META_SCHEMA_ID) ? META_SCHEMA_ID : undefined));\n    }\n}\nmodule.exports = exports = Ajv;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.default = Ajv;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\n//# sourceMappingURL=ajv.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.regexpCode = exports.getProperty = exports.safeStringify = exports.stringify = exports.strConcat = exports.addCodeArg = exports.str = exports._ = exports.nil = exports._Code = exports.Name = exports.IDENTIFIER = exports._CodeOrName = void 0;\nclass _CodeOrName {\n}\nexports._CodeOrName = _CodeOrName;\nexports.IDENTIFIER = /^[a-z$_][a-z$_0-9]*$/i;\nclass Name extends _CodeOrName {\n    constructor(s) {\n        super();\n        if (!exports.IDENTIFIER.test(s))\n            throw new Error(\"CodeGen: name must be a valid identifier\");\n        this.str = s;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        return false;\n    }\n    get names() {\n        return { [this.str]: 1 };\n    }\n}\nexports.Name = Name;\nclass _Code extends _CodeOrName {\n    constructor(code) {\n        super();\n        this._items = typeof code === \"string\" ? [code] : code;\n    }\n    toString() {\n        return this.str;\n    }\n    emptyStr() {\n        if (this._items.length > 1)\n            return false;\n        const item = this._items[0];\n        return item === \"\" || item === '\"\"';\n    }\n    get str() {\n        var _a;\n        return ((_a = this._str) !== null && _a !== void 0 ? _a : (this._str = this._items.reduce((s, c) => `${s}${c}`, \"\")));\n    }\n    get names() {\n        var _a;\n        return ((_a = this._names) !== null && _a !== void 0 ? _a : (this._names = this._items.reduce((names, c) => {\n            if (c instanceof Name)\n                names[c.str] = (names[c.str] || 0) + 1;\n            return names;\n        }, {})));\n    }\n}\nexports._Code = _Code;\nexports.nil = new _Code(\"\");\nfunction _(strs, ...args) {\n    const code = [strs[0]];\n    let i = 0;\n    while (i < args.length) {\n        addCodeArg(code, args[i]);\n        code.push(strs[++i]);\n    }\n    return new _Code(code);\n}\nexports._ = _;\nconst plus = new _Code(\"+\");\nfunction str(strs, ...args) {\n    const expr = [safeStringify(strs[0])];\n    let i = 0;\n    while (i < args.length) {\n        expr.push(plus);\n        addCodeArg(expr, args[i]);\n        expr.push(plus, safeStringify(strs[++i]));\n    }\n    optimize(expr);\n    return new _Code(expr);\n}\nexports.str = str;\nfunction addCodeArg(code, arg) {\n    if (arg instanceof _Code)\n        code.push(...arg._items);\n    else if (arg instanceof Name)\n        code.push(arg);\n    else\n        code.push(interpolate(arg));\n}\nexports.addCodeArg = addCodeArg;\nfunction optimize(expr) {\n    let i = 1;\n    while (i < expr.length - 1) {\n        if (expr[i] === plus) {\n            const res = mergeExprItems(expr[i - 1], expr[i + 1]);\n            if (res !== undefined) {\n                expr.splice(i - 1, 3, res);\n                continue;\n            }\n            expr[i++] = \"+\";\n        }\n        i++;\n    }\n}\nfunction mergeExprItems(a, b) {\n    if (b === '\"\"')\n        return a;\n    if (a === '\"\"')\n        return b;\n    if (typeof a == \"string\") {\n        if (b instanceof Name || a[a.length - 1] !== '\"')\n            return;\n        if (typeof b != \"string\")\n            return `${a.slice(0, -1)}${b}\"`;\n        if (b[0] === '\"')\n            return a.slice(0, -1) + b.slice(1);\n        return;\n    }\n    if (typeof b == \"string\" && b[0] === '\"' && !(a instanceof Name))\n        return `\"${a}${b.slice(1)}`;\n    return;\n}\nfunction strConcat(c1, c2) {\n    return c2.emptyStr() ? c1 : c1.emptyStr() ? c2 : str `${c1}${c2}`;\n}\nexports.strConcat = strConcat;\n// TODO do not allow arrays here\nfunction interpolate(x) {\n    return typeof x == \"number\" || typeof x == \"boolean\" || x === null\n        ? x\n        : safeStringify(Array.isArray(x) ? x.join(\",\") : x);\n}\nfunction stringify(x) {\n    return new _Code(safeStringify(x));\n}\nexports.stringify = stringify;\nfunction safeStringify(x) {\n    return JSON.stringify(x)\n        .replace(/\\u2028/g, \"\\\\u2028\")\n        .replace(/\\u2029/g, \"\\\\u2029\");\n}\nexports.safeStringify = safeStringify;\nfunction getProperty(key) {\n    return typeof key == \"string\" && exports.IDENTIFIER.test(key) ? new _Code(`.${key}`) : _ `[${key}]`;\n}\nexports.getProperty = getProperty;\nfunction regexpCode(rx) {\n    return new _Code(rx.toString());\n}\nexports.regexpCode = regexpCode;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.or = exports.and = exports.not = exports.CodeGen = exports.operators = exports.varKinds = exports.ValueScopeName = exports.ValueScope = exports.Scope = exports.Name = exports.regexpCode = exports.stringify = exports.getProperty = exports.nil = exports.strConcat = exports.str = exports._ = void 0;\nconst code_1 = require(\"./code\");\nconst scope_1 = require(\"./scope\");\nvar code_2 = require(\"./code\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return code_2._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return code_2.str; } });\nObject.defineProperty(exports, \"strConcat\", { enumerable: true, get: function () { return code_2.strConcat; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return code_2.nil; } });\nObject.defineProperty(exports, \"getProperty\", { enumerable: true, get: function () { return code_2.getProperty; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return code_2.stringify; } });\nObject.defineProperty(exports, \"regexpCode\", { enumerable: true, get: function () { return code_2.regexpCode; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return code_2.Name; } });\nvar scope_2 = require(\"./scope\");\nObject.defineProperty(exports, \"Scope\", { enumerable: true, get: function () { return scope_2.Scope; } });\nObject.defineProperty(exports, \"ValueScope\", { enumerable: true, get: function () { return scope_2.ValueScope; } });\nObject.defineProperty(exports, \"ValueScopeName\", { enumerable: true, get: function () { return scope_2.ValueScopeName; } });\nObject.defineProperty(exports, \"varKinds\", { enumerable: true, get: function () { return scope_2.varKinds; } });\nexports.operators = {\n    GT: new code_1._Code(\">\"),\n    GTE: new code_1._Code(\">=\"),\n    LT: new code_1._Code(\"<\"),\n    LTE: new code_1._Code(\"<=\"),\n    EQ: new code_1._Code(\"===\"),\n    NEQ: new code_1._Code(\"!==\"),\n    NOT: new code_1._Code(\"!\"),\n    OR: new code_1._Code(\"||\"),\n    AND: new code_1._Code(\"&&\"),\n    ADD: new code_1._Code(\"+\"),\n};\nclass Node {\n    optimizeNodes() {\n        return this;\n    }\n    optimizeNames(_names, _constants) {\n        return this;\n    }\n}\nclass Def extends Node {\n    constructor(varKind, name, rhs) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.rhs = rhs;\n    }\n    render({ es5, _n }) {\n        const varKind = es5 ? scope_1.varKinds.var : this.varKind;\n        const rhs = this.rhs === undefined ? \"\" : ` = ${this.rhs}`;\n        return `${varKind} ${this.name}${rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (!names[this.name.str])\n            return;\n        if (this.rhs)\n            this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        return this.rhs instanceof code_1._CodeOrName ? this.rhs.names : {};\n    }\n}\nclass Assign extends Node {\n    constructor(lhs, rhs, sideEffects) {\n        super();\n        this.lhs = lhs;\n        this.rhs = rhs;\n        this.sideEffects = sideEffects;\n    }\n    render({ _n }) {\n        return `${this.lhs} = ${this.rhs};` + _n;\n    }\n    optimizeNames(names, constants) {\n        if (this.lhs instanceof code_1.Name && !names[this.lhs.str] && !this.sideEffects)\n            return;\n        this.rhs = optimizeExpr(this.rhs, names, constants);\n        return this;\n    }\n    get names() {\n        const names = this.lhs instanceof code_1.Name ? {} : { ...this.lhs.names };\n        return addExprNames(names, this.rhs);\n    }\n}\nclass AssignOp extends Assign {\n    constructor(lhs, op, rhs, sideEffects) {\n        super(lhs, rhs, sideEffects);\n        this.op = op;\n    }\n    render({ _n }) {\n        return `${this.lhs} ${this.op}= ${this.rhs};` + _n;\n    }\n}\nclass Label extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        return `${this.label}:` + _n;\n    }\n}\nclass Break extends Node {\n    constructor(label) {\n        super();\n        this.label = label;\n        this.names = {};\n    }\n    render({ _n }) {\n        const label = this.label ? ` ${this.label}` : \"\";\n        return `break${label};` + _n;\n    }\n}\nclass Throw extends Node {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render({ _n }) {\n        return `throw ${this.error};` + _n;\n    }\n    get names() {\n        return this.error.names;\n    }\n}\nclass AnyCode extends Node {\n    constructor(code) {\n        super();\n        this.code = code;\n    }\n    render({ _n }) {\n        return `${this.code};` + _n;\n    }\n    optimizeNodes() {\n        return `${this.code}` ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        this.code = optimizeExpr(this.code, names, constants);\n        return this;\n    }\n    get names() {\n        return this.code instanceof code_1._CodeOrName ? this.code.names : {};\n    }\n}\nclass ParentNode extends Node {\n    constructor(nodes = []) {\n        super();\n        this.nodes = nodes;\n    }\n    render(opts) {\n        return this.nodes.reduce((code, n) => code + n.render(opts), \"\");\n    }\n    optimizeNodes() {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            const n = nodes[i].optimizeNodes();\n            if (Array.isArray(n))\n                nodes.splice(i, 1, ...n);\n            else if (n)\n                nodes[i] = n;\n            else\n                nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    optimizeNames(names, constants) {\n        const { nodes } = this;\n        let i = nodes.length;\n        while (i--) {\n            // iterating backwards improves 1-pass optimization\n            const n = nodes[i];\n            if (n.optimizeNames(names, constants))\n                continue;\n            subtractNames(names, n.names);\n            nodes.splice(i, 1);\n        }\n        return nodes.length > 0 ? this : undefined;\n    }\n    get names() {\n        return this.nodes.reduce((names, n) => addNames(names, n.names), {});\n    }\n}\nclass BlockNode extends ParentNode {\n    render(opts) {\n        return \"{\" + opts._n + super.render(opts) + \"}\" + opts._n;\n    }\n}\nclass Root extends ParentNode {\n}\nclass Else extends BlockNode {\n}\nElse.kind = \"else\";\nclass If extends BlockNode {\n    constructor(condition, nodes) {\n        super(nodes);\n        this.condition = condition;\n    }\n    render(opts) {\n        let code = `if(${this.condition})` + super.render(opts);\n        if (this.else)\n            code += \"else \" + this.else.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        super.optimizeNodes();\n        const cond = this.condition;\n        if (cond === true)\n            return this.nodes; // else is ignored here\n        let e = this.else;\n        if (e) {\n            const ns = e.optimizeNodes();\n            e = this.else = Array.isArray(ns) ? new Else(ns) : ns;\n        }\n        if (e) {\n            if (cond === false)\n                return e instanceof If ? e : e.nodes;\n            if (this.nodes.length)\n                return this;\n            return new If(not(cond), e instanceof If ? [e] : e.nodes);\n        }\n        if (cond === false || !this.nodes.length)\n            return undefined;\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a;\n        this.else = (_a = this.else) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        if (!(super.optimizeNames(names, constants) || this.else))\n            return;\n        this.condition = optimizeExpr(this.condition, names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        addExprNames(names, this.condition);\n        if (this.else)\n            addNames(names, this.else.names);\n        return names;\n    }\n}\nIf.kind = \"if\";\nclass For extends BlockNode {\n}\nFor.kind = \"for\";\nclass ForLoop extends For {\n    constructor(iteration) {\n        super();\n        this.iteration = iteration;\n    }\n    render(opts) {\n        return `for(${this.iteration})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iteration = optimizeExpr(this.iteration, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iteration.names);\n    }\n}\nclass ForRange extends For {\n    constructor(varKind, name, from, to) {\n        super();\n        this.varKind = varKind;\n        this.name = name;\n        this.from = from;\n        this.to = to;\n    }\n    render(opts) {\n        const varKind = opts.es5 ? scope_1.varKinds.var : this.varKind;\n        const { name, from, to } = this;\n        return `for(${varKind} ${name}=${from}; ${name}<${to}; ${name}++)` + super.render(opts);\n    }\n    get names() {\n        const names = addExprNames(super.names, this.from);\n        return addExprNames(names, this.to);\n    }\n}\nclass ForIter extends For {\n    constructor(loop, varKind, name, iterable) {\n        super();\n        this.loop = loop;\n        this.varKind = varKind;\n        this.name = name;\n        this.iterable = iterable;\n    }\n    render(opts) {\n        return `for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})` + super.render(opts);\n    }\n    optimizeNames(names, constants) {\n        if (!super.optimizeNames(names, constants))\n            return;\n        this.iterable = optimizeExpr(this.iterable, names, constants);\n        return this;\n    }\n    get names() {\n        return addNames(super.names, this.iterable.names);\n    }\n}\nclass Func extends BlockNode {\n    constructor(name, args, async) {\n        super();\n        this.name = name;\n        this.args = args;\n        this.async = async;\n    }\n    render(opts) {\n        const _async = this.async ? \"async \" : \"\";\n        return `${_async}function ${this.name}(${this.args})` + super.render(opts);\n    }\n}\nFunc.kind = \"func\";\nclass Return extends ParentNode {\n    render(opts) {\n        return \"return \" + super.render(opts);\n    }\n}\nReturn.kind = \"return\";\nclass Try extends BlockNode {\n    render(opts) {\n        let code = \"try\" + super.render(opts);\n        if (this.catch)\n            code += this.catch.render(opts);\n        if (this.finally)\n            code += this.finally.render(opts);\n        return code;\n    }\n    optimizeNodes() {\n        var _a, _b;\n        super.optimizeNodes();\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNodes();\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNodes();\n        return this;\n    }\n    optimizeNames(names, constants) {\n        var _a, _b;\n        super.optimizeNames(names, constants);\n        (_a = this.catch) === null || _a === void 0 ? void 0 : _a.optimizeNames(names, constants);\n        (_b = this.finally) === null || _b === void 0 ? void 0 : _b.optimizeNames(names, constants);\n        return this;\n    }\n    get names() {\n        const names = super.names;\n        if (this.catch)\n            addNames(names, this.catch.names);\n        if (this.finally)\n            addNames(names, this.finally.names);\n        return names;\n    }\n}\nclass Catch extends BlockNode {\n    constructor(error) {\n        super();\n        this.error = error;\n    }\n    render(opts) {\n        return `catch(${this.error})` + super.render(opts);\n    }\n}\nCatch.kind = \"catch\";\nclass Finally extends BlockNode {\n    render(opts) {\n        return \"finally\" + super.render(opts);\n    }\n}\nFinally.kind = \"finally\";\nclass CodeGen {\n    constructor(extScope, opts = {}) {\n        this._values = {};\n        this._blockStarts = [];\n        this._constants = {};\n        this.opts = { ...opts, _n: opts.lines ? \"\\n\" : \"\" };\n        this._extScope = extScope;\n        this._scope = new scope_1.Scope({ parent: extScope });\n        this._nodes = [new Root()];\n    }\n    toString() {\n        return this._root.render(this.opts);\n    }\n    // returns unique name in the internal scope\n    name(prefix) {\n        return this._scope.name(prefix);\n    }\n    // reserves unique name in the external scope\n    scopeName(prefix) {\n        return this._extScope.name(prefix);\n    }\n    // reserves unique name in the external scope and assigns value to it\n    scopeValue(prefixOrName, value) {\n        const name = this._extScope.value(prefixOrName, value);\n        const vs = this._values[name.prefix] || (this._values[name.prefix] = new Set());\n        vs.add(name);\n        return name;\n    }\n    getScopeValue(prefix, keyOrRef) {\n        return this._extScope.getValue(prefix, keyOrRef);\n    }\n    // return code that assigns values in the external scope to the names that are used internally\n    // (same names that were returned by gen.scopeName or gen.scopeValue)\n    scopeRefs(scopeName) {\n        return this._extScope.scopeRefs(scopeName, this._values);\n    }\n    scopeCode() {\n        return this._extScope.scopeCode(this._values);\n    }\n    _def(varKind, nameOrPrefix, rhs, constant) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (rhs !== undefined && constant)\n            this._constants[name.str] = rhs;\n        this._leafNode(new Def(varKind, name, rhs));\n        return name;\n    }\n    // `const` declaration (`var` in es5 mode)\n    const(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.const, nameOrPrefix, rhs, _constant);\n    }\n    // `let` declaration with optional assignment (`var` in es5 mode)\n    let(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.let, nameOrPrefix, rhs, _constant);\n    }\n    // `var` declaration with optional assignment\n    var(nameOrPrefix, rhs, _constant) {\n        return this._def(scope_1.varKinds.var, nameOrPrefix, rhs, _constant);\n    }\n    // assignment code\n    assign(lhs, rhs, sideEffects) {\n        return this._leafNode(new Assign(lhs, rhs, sideEffects));\n    }\n    // `+=` code\n    add(lhs, rhs) {\n        return this._leafNode(new AssignOp(lhs, exports.operators.ADD, rhs));\n    }\n    // appends passed SafeExpr to code or executes Block\n    code(c) {\n        if (typeof c == \"function\")\n            c();\n        else if (c !== code_1.nil)\n            this._leafNode(new AnyCode(c));\n        return this;\n    }\n    // returns code for object literal for the passed argument list of key-value pairs\n    object(...keyValues) {\n        const code = [\"{\"];\n        for (const [key, value] of keyValues) {\n            if (code.length > 1)\n                code.push(\",\");\n            code.push(key);\n            if (key !== value || this.opts.es5) {\n                code.push(\":\");\n                (0, code_1.addCodeArg)(code, value);\n            }\n        }\n        code.push(\"}\");\n        return new code_1._Code(code);\n    }\n    // `if` clause (or statement if `thenBody` and, optionally, `elseBody` are passed)\n    if(condition, thenBody, elseBody) {\n        this._blockNode(new If(condition));\n        if (thenBody && elseBody) {\n            this.code(thenBody).else().code(elseBody).endIf();\n        }\n        else if (thenBody) {\n            this.code(thenBody).endIf();\n        }\n        else if (elseBody) {\n            throw new Error('CodeGen: \"else\" body without \"then\" body');\n        }\n        return this;\n    }\n    // `else if` clause - invalid without `if` or after `else` clauses\n    elseIf(condition) {\n        return this._elseNode(new If(condition));\n    }\n    // `else` clause - only valid after `if` or `else if` clauses\n    else() {\n        return this._elseNode(new Else());\n    }\n    // end `if` statement (needed if gen.if was used only with condition)\n    endIf() {\n        return this._endBlockNode(If, Else);\n    }\n    _for(node, forBody) {\n        this._blockNode(node);\n        if (forBody)\n            this.code(forBody).endFor();\n        return this;\n    }\n    // a generic `for` clause (or statement if `forBody` is passed)\n    for(iteration, forBody) {\n        return this._for(new ForLoop(iteration), forBody);\n    }\n    // `for` statement for a range of values\n    forRange(nameOrPrefix, from, to, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.let) {\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForRange(varKind, name, from, to), () => forBody(name));\n    }\n    // `for-of` statement (in es5 mode replace with a normal for loop)\n    forOf(nameOrPrefix, iterable, forBody, varKind = scope_1.varKinds.const) {\n        const name = this._scope.toName(nameOrPrefix);\n        if (this.opts.es5) {\n            const arr = iterable instanceof code_1.Name ? iterable : this.var(\"_arr\", iterable);\n            return this.forRange(\"_i\", 0, (0, code_1._) `${arr}.length`, (i) => {\n                this.var(name, (0, code_1._) `${arr}[${i}]`);\n                forBody(name);\n            });\n        }\n        return this._for(new ForIter(\"of\", varKind, name, iterable), () => forBody(name));\n    }\n    // `for-in` statement.\n    // With option `ownProperties` replaced with a `for-of` loop for object keys\n    forIn(nameOrPrefix, obj, forBody, varKind = this.opts.es5 ? scope_1.varKinds.var : scope_1.varKinds.const) {\n        if (this.opts.ownProperties) {\n            return this.forOf(nameOrPrefix, (0, code_1._) `Object.keys(${obj})`, forBody);\n        }\n        const name = this._scope.toName(nameOrPrefix);\n        return this._for(new ForIter(\"in\", varKind, name, obj), () => forBody(name));\n    }\n    // end `for` loop\n    endFor() {\n        return this._endBlockNode(For);\n    }\n    // `label` statement\n    label(label) {\n        return this._leafNode(new Label(label));\n    }\n    // `break` statement\n    break(label) {\n        return this._leafNode(new Break(label));\n    }\n    // `return` statement\n    return(value) {\n        const node = new Return();\n        this._blockNode(node);\n        this.code(value);\n        if (node.nodes.length !== 1)\n            throw new Error('CodeGen: \"return\" should have one node');\n        return this._endBlockNode(Return);\n    }\n    // `try` statement\n    try(tryBody, catchCode, finallyCode) {\n        if (!catchCode && !finallyCode)\n            throw new Error('CodeGen: \"try\" without \"catch\" and \"finally\"');\n        const node = new Try();\n        this._blockNode(node);\n        this.code(tryBody);\n        if (catchCode) {\n            const error = this.name(\"e\");\n            this._currNode = node.catch = new Catch(error);\n            catchCode(error);\n        }\n        if (finallyCode) {\n            this._currNode = node.finally = new Finally();\n            this.code(finallyCode);\n        }\n        return this._endBlockNode(Catch, Finally);\n    }\n    // `throw` statement\n    throw(error) {\n        return this._leafNode(new Throw(error));\n    }\n    // start self-balancing block\n    block(body, nodeCount) {\n        this._blockStarts.push(this._nodes.length);\n        if (body)\n            this.code(body).endBlock(nodeCount);\n        return this;\n    }\n    // end the current self-balancing block\n    endBlock(nodeCount) {\n        const len = this._blockStarts.pop();\n        if (len === undefined)\n            throw new Error(\"CodeGen: not in self-balancing block\");\n        const toClose = this._nodes.length - len;\n        if (toClose < 0 || (nodeCount !== undefined && toClose !== nodeCount)) {\n            throw new Error(`CodeGen: wrong number of nodes: ${toClose} vs ${nodeCount} expected`);\n        }\n        this._nodes.length = len;\n        return this;\n    }\n    // `function` heading (or definition if funcBody is passed)\n    func(name, args = code_1.nil, async, funcBody) {\n        this._blockNode(new Func(name, args, async));\n        if (funcBody)\n            this.code(funcBody).endFunc();\n        return this;\n    }\n    // end function definition\n    endFunc() {\n        return this._endBlockNode(Func);\n    }\n    optimize(n = 1) {\n        while (n-- > 0) {\n            this._root.optimizeNodes();\n            this._root.optimizeNames(this._root.names, this._constants);\n        }\n    }\n    _leafNode(node) {\n        this._currNode.nodes.push(node);\n        return this;\n    }\n    _blockNode(node) {\n        this._currNode.nodes.push(node);\n        this._nodes.push(node);\n    }\n    _endBlockNode(N1, N2) {\n        const n = this._currNode;\n        if (n instanceof N1 || (N2 && n instanceof N2)) {\n            this._nodes.pop();\n            return this;\n        }\n        throw new Error(`CodeGen: not in block \"${N2 ? `${N1.kind}/${N2.kind}` : N1.kind}\"`);\n    }\n    _elseNode(node) {\n        const n = this._currNode;\n        if (!(n instanceof If)) {\n            throw new Error('CodeGen: \"else\" without \"if\"');\n        }\n        this._currNode = n.else = node;\n        return this;\n    }\n    get _root() {\n        return this._nodes[0];\n    }\n    get _currNode() {\n        const ns = this._nodes;\n        return ns[ns.length - 1];\n    }\n    set _currNode(node) {\n        const ns = this._nodes;\n        ns[ns.length - 1] = node;\n    }\n}\nexports.CodeGen = CodeGen;\nfunction addNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) + (from[n] || 0);\n    return names;\n}\nfunction addExprNames(names, from) {\n    return from instanceof code_1._CodeOrName ? addNames(names, from.names) : names;\n}\nfunction optimizeExpr(expr, names, constants) {\n    if (expr instanceof code_1.Name)\n        return replaceName(expr);\n    if (!canOptimize(expr))\n        return expr;\n    return new code_1._Code(expr._items.reduce((items, c) => {\n        if (c instanceof code_1.Name)\n            c = replaceName(c);\n        if (c instanceof code_1._Code)\n            items.push(...c._items);\n        else\n            items.push(c);\n        return items;\n    }, []));\n    function replaceName(n) {\n        const c = constants[n.str];\n        if (c === undefined || names[n.str] !== 1)\n            return n;\n        delete names[n.str];\n        return c;\n    }\n    function canOptimize(e) {\n        return (e instanceof code_1._Code &&\n            e._items.some((c) => c instanceof code_1.Name && names[c.str] === 1 && constants[c.str] !== undefined));\n    }\n}\nfunction subtractNames(names, from) {\n    for (const n in from)\n        names[n] = (names[n] || 0) - (from[n] || 0);\n}\nfunction not(x) {\n    return typeof x == \"boolean\" || typeof x == \"number\" || x === null ? !x : (0, code_1._) `!${par(x)}`;\n}\nexports.not = not;\nconst andCode = mappend(exports.operators.AND);\n// boolean AND (&&) expression with the passed arguments\nfunction and(...args) {\n    return args.reduce(andCode);\n}\nexports.and = and;\nconst orCode = mappend(exports.operators.OR);\n// boolean OR (||) expression with the passed arguments\nfunction or(...args) {\n    return args.reduce(orCode);\n}\nexports.or = or;\nfunction mappend(op) {\n    return (x, y) => (x === code_1.nil ? y : y === code_1.nil ? x : (0, code_1._) `${par(x)} ${op} ${par(y)}`);\n}\nfunction par(x) {\n    return x instanceof code_1.Name ? x : (0, code_1._) `(${x})`;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ValueScope = exports.ValueScopeName = exports.Scope = exports.varKinds = exports.UsedValueState = void 0;\nconst code_1 = require(\"./code\");\nclass ValueError extends Error {\n    constructor(name) {\n        super(`CodeGen: \"code\" for ${name} not defined`);\n        this.value = name.value;\n    }\n}\nvar UsedValueState;\n(function (UsedValueState) {\n    UsedValueState[UsedValueState[\"Started\"] = 0] = \"Started\";\n    UsedValueState[UsedValueState[\"Completed\"] = 1] = \"Completed\";\n})(UsedValueState = exports.UsedValueState || (exports.UsedValueState = {}));\nexports.varKinds = {\n    const: new code_1.Name(\"const\"),\n    let: new code_1.Name(\"let\"),\n    var: new code_1.Name(\"var\"),\n};\nclass Scope {\n    constructor({ prefixes, parent } = {}) {\n        this._names = {};\n        this._prefixes = prefixes;\n        this._parent = parent;\n    }\n    toName(nameOrPrefix) {\n        return nameOrPrefix instanceof code_1.Name ? nameOrPrefix : this.name(nameOrPrefix);\n    }\n    name(prefix) {\n        return new code_1.Name(this._newName(prefix));\n    }\n    _newName(prefix) {\n        const ng = this._names[prefix] || this._nameGroup(prefix);\n        return `${prefix}${ng.index++}`;\n    }\n    _nameGroup(prefix) {\n        var _a, _b;\n        if (((_b = (_a = this._parent) === null || _a === void 0 ? void 0 : _a._prefixes) === null || _b === void 0 ? void 0 : _b.has(prefix)) || (this._prefixes && !this._prefixes.has(prefix))) {\n            throw new Error(`CodeGen: prefix \"${prefix}\" is not allowed in this scope`);\n        }\n        return (this._names[prefix] = { prefix, index: 0 });\n    }\n}\nexports.Scope = Scope;\nclass ValueScopeName extends code_1.Name {\n    constructor(prefix, nameStr) {\n        super(nameStr);\n        this.prefix = prefix;\n    }\n    setValue(value, { property, itemIndex }) {\n        this.value = value;\n        this.scopePath = (0, code_1._) `.${new code_1.Name(property)}[${itemIndex}]`;\n    }\n}\nexports.ValueScopeName = ValueScopeName;\nconst line = (0, code_1._) `\\n`;\nclass ValueScope extends Scope {\n    constructor(opts) {\n        super(opts);\n        this._values = {};\n        this._scope = opts.scope;\n        this.opts = { ...opts, _n: opts.lines ? line : code_1.nil };\n    }\n    get() {\n        return this._scope;\n    }\n    name(prefix) {\n        return new ValueScopeName(prefix, this._newName(prefix));\n    }\n    value(nameOrPrefix, value) {\n        var _a;\n        if (value.ref === undefined)\n            throw new Error(\"CodeGen: ref must be passed in value\");\n        const name = this.toName(nameOrPrefix);\n        const { prefix } = name;\n        const valueKey = (_a = value.key) !== null && _a !== void 0 ? _a : value.ref;\n        let vs = this._values[prefix];\n        if (vs) {\n            const _name = vs.get(valueKey);\n            if (_name)\n                return _name;\n        }\n        else {\n            vs = this._values[prefix] = new Map();\n        }\n        vs.set(valueKey, name);\n        const s = this._scope[prefix] || (this._scope[prefix] = []);\n        const itemIndex = s.length;\n        s[itemIndex] = value.ref;\n        name.setValue(value, { property: prefix, itemIndex });\n        return name;\n    }\n    getValue(prefix, keyOrRef) {\n        const vs = this._values[prefix];\n        if (!vs)\n            return;\n        return vs.get(keyOrRef);\n    }\n    scopeRefs(scopeName, values = this._values) {\n        return this._reduceValues(values, (name) => {\n            if (name.scopePath === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return (0, code_1._) `${scopeName}${name.scopePath}`;\n        });\n    }\n    scopeCode(values = this._values, usedValues, getCode) {\n        return this._reduceValues(values, (name) => {\n            if (name.value === undefined)\n                throw new Error(`CodeGen: name \"${name}\" has no value`);\n            return name.value.code;\n        }, usedValues, getCode);\n    }\n    _reduceValues(values, valueCode, usedValues = {}, getCode) {\n        let code = code_1.nil;\n        for (const prefix in values) {\n            const vs = values[prefix];\n            if (!vs)\n                continue;\n            const nameSet = (usedValues[prefix] = usedValues[prefix] || new Map());\n            vs.forEach((name) => {\n                if (nameSet.has(name))\n                    return;\n                nameSet.set(name, UsedValueState.Started);\n                let c = valueCode(name);\n                if (c) {\n                    const def = this.opts.es5 ? exports.varKinds.var : exports.varKinds.const;\n                    code = (0, code_1._) `${code}${def} ${name} = ${c};${this.opts._n}`;\n                }\n                else if ((c = getCode === null || getCode === void 0 ? void 0 : getCode(name))) {\n                    code = (0, code_1._) `${code}${c}${this.opts._n}`;\n                }\n                else {\n                    throw new ValueError(name);\n                }\n                nameSet.set(name, UsedValueState.Completed);\n            });\n        }\n        return code;\n    }\n}\nexports.ValueScope = ValueScope;\n//# sourceMappingURL=scope.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendErrors = exports.resetErrorsCount = exports.reportExtraError = exports.reportError = exports.keyword$DataError = exports.keywordError = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst util_1 = require(\"./util\");\nconst names_1 = require(\"./names\");\nexports.keywordError = {\n    message: ({ keyword }) => (0, codegen_1.str) `must pass \"${keyword}\" keyword validation`,\n};\nexports.keyword$DataError = {\n    message: ({ keyword, schemaType }) => schemaType\n        ? (0, codegen_1.str) `\"${keyword}\" keyword must be ${schemaType} ($data)`\n        : (0, codegen_1.str) `\"${keyword}\" keyword is invalid ($data)`,\n};\nfunction reportError(cxt, error = exports.keywordError, errorPaths, overrideAllErrors) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    if (overrideAllErrors !== null && overrideAllErrors !== void 0 ? overrideAllErrors : (compositeRule || allErrors)) {\n        addError(gen, errObj);\n    }\n    else {\n        returnErrors(it, (0, codegen_1._) `[${errObj}]`);\n    }\n}\nexports.reportError = reportError;\nfunction reportExtraError(cxt, error = exports.keywordError, errorPaths) {\n    const { it } = cxt;\n    const { gen, compositeRule, allErrors } = it;\n    const errObj = errorObjectCode(cxt, error, errorPaths);\n    addError(gen, errObj);\n    if (!(compositeRule || allErrors)) {\n        returnErrors(it, names_1.default.vErrors);\n    }\n}\nexports.reportExtraError = reportExtraError;\nfunction resetErrorsCount(gen, errsCount) {\n    gen.assign(names_1.default.errors, errsCount);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} !== null`, () => gen.if(errsCount, () => gen.assign((0, codegen_1._) `${names_1.default.vErrors}.length`, errsCount), () => gen.assign(names_1.default.vErrors, null)));\n}\nexports.resetErrorsCount = resetErrorsCount;\nfunction extendErrors({ gen, keyword, schemaValue, data, errsCount, it, }) {\n    /* istanbul ignore if */\n    if (errsCount === undefined)\n        throw new Error(\"ajv implementation error\");\n    const err = gen.name(\"err\");\n    gen.forRange(\"i\", errsCount, names_1.default.errors, (i) => {\n        gen.const(err, (0, codegen_1._) `${names_1.default.vErrors}[${i}]`);\n        gen.if((0, codegen_1._) `${err}.instancePath === undefined`, () => gen.assign((0, codegen_1._) `${err}.instancePath`, (0, codegen_1.strConcat)(names_1.default.instancePath, it.errorPath)));\n        gen.assign((0, codegen_1._) `${err}.schemaPath`, (0, codegen_1.str) `${it.errSchemaPath}/${keyword}`);\n        if (it.opts.verbose) {\n            gen.assign((0, codegen_1._) `${err}.schema`, schemaValue);\n            gen.assign((0, codegen_1._) `${err}.data`, data);\n        }\n    });\n}\nexports.extendErrors = extendErrors;\nfunction addError(gen, errObj) {\n    const err = gen.const(\"err\", errObj);\n    gen.if((0, codegen_1._) `${names_1.default.vErrors} === null`, () => gen.assign(names_1.default.vErrors, (0, codegen_1._) `[${err}]`), (0, codegen_1._) `${names_1.default.vErrors}.push(${err})`);\n    gen.code((0, codegen_1._) `${names_1.default.errors}++`);\n}\nfunction returnErrors(it, errs) {\n    const { gen, validateName, schemaEnv } = it;\n    if (schemaEnv.$async) {\n        gen.throw((0, codegen_1._) `new ${it.ValidationError}(${errs})`);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, errs);\n        gen.return(false);\n    }\n}\nconst E = {\n    keyword: new codegen_1.Name(\"keyword\"),\n    schemaPath: new codegen_1.Name(\"schemaPath\"),\n    params: new codegen_1.Name(\"params\"),\n    propertyName: new codegen_1.Name(\"propertyName\"),\n    message: new codegen_1.Name(\"message\"),\n    schema: new codegen_1.Name(\"schema\"),\n    parentSchema: new codegen_1.Name(\"parentSchema\"),\n};\nfunction errorObjectCode(cxt, error, errorPaths) {\n    const { createErrors } = cxt.it;\n    if (createErrors === false)\n        return (0, codegen_1._) `{}`;\n    return errorObject(cxt, error, errorPaths);\n}\nfunction errorObject(cxt, error, errorPaths = {}) {\n    const { gen, it } = cxt;\n    const keyValues = [\n        errorInstancePath(it, errorPaths),\n        errorSchemaPath(cxt, errorPaths),\n    ];\n    extraErrorProps(cxt, error, keyValues);\n    return gen.object(...keyValues);\n}\nfunction errorInstancePath({ errorPath }, { instancePath }) {\n    const instPath = instancePath\n        ? (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(instancePath, util_1.Type.Str)}`\n        : errorPath;\n    return [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, instPath)];\n}\nfunction errorSchemaPath({ keyword, it: { errSchemaPath } }, { schemaPath, parentSchema }) {\n    let schPath = parentSchema ? errSchemaPath : (0, codegen_1.str) `${errSchemaPath}/${keyword}`;\n    if (schemaPath) {\n        schPath = (0, codegen_1.str) `${schPath}${(0, util_1.getErrorPath)(schemaPath, util_1.Type.Str)}`;\n    }\n    return [E.schemaPath, schPath];\n}\nfunction extraErrorProps(cxt, { params, message }, keyValues) {\n    const { keyword, data, schemaValue, it } = cxt;\n    const { opts, propertyName, topSchemaRef, schemaPath } = it;\n    keyValues.push([E.keyword, keyword], [E.params, typeof params == \"function\" ? params(cxt) : params || (0, codegen_1._) `{}`]);\n    if (opts.messages) {\n        keyValues.push([E.message, typeof message == \"function\" ? message(cxt) : message]);\n    }\n    if (opts.verbose) {\n        keyValues.push([E.schema, schemaValue], [E.parentSchema, (0, codegen_1._) `${topSchemaRef}${schemaPath}`], [names_1.default.data, data]);\n    }\n    if (propertyName)\n        keyValues.push([E.propertyName, propertyName]);\n}\n//# sourceMappingURL=errors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveSchema = exports.getCompilingSchema = exports.resolveRef = exports.compileSchema = exports.SchemaEnv = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst validation_error_1 = require(\"../runtime/validation_error\");\nconst names_1 = require(\"./names\");\nconst resolve_1 = require(\"./resolve\");\nconst util_1 = require(\"./util\");\nconst validate_1 = require(\"./validate\");\nconst URI = require(\"uri-js\");\nclass SchemaEnv {\n    constructor(env) {\n        var _a;\n        this.refs = {};\n        this.dynamicAnchors = {};\n        let schema;\n        if (typeof env.schema == \"object\")\n            schema = env.schema;\n        this.schema = env.schema;\n        this.schemaId = env.schemaId;\n        this.root = env.root || this;\n        this.baseId = (_a = env.baseId) !== null && _a !== void 0 ? _a : (0, resolve_1.normalizeId)(schema === null || schema === void 0 ? void 0 : schema[env.schemaId || \"$id\"]);\n        this.schemaPath = env.schemaPath;\n        this.localRefs = env.localRefs;\n        this.meta = env.meta;\n        this.$async = schema === null || schema === void 0 ? void 0 : schema.$async;\n        this.refs = {};\n    }\n}\nexports.SchemaEnv = SchemaEnv;\n// let codeSize = 0\n// let nodeCount = 0\n// Compiles schema in SchemaEnv\nfunction compileSchema(sch) {\n    // TODO refactor - remove compilations\n    const _sch = getCompilingSchema.call(this, sch);\n    if (_sch)\n        return _sch;\n    const rootId = (0, resolve_1.getFullPath)(sch.root.baseId); // TODO if getFullPath removed 1 tests fails\n    const { es5, lines } = this.opts.code;\n    const { ownProperties } = this.opts;\n    const gen = new codegen_1.CodeGen(this.scope, { es5, lines, ownProperties });\n    let _ValidationError;\n    if (sch.$async) {\n        _ValidationError = gen.scopeValue(\"Error\", {\n            ref: validation_error_1.default,\n            code: (0, codegen_1._) `require(\"ajv/dist/runtime/validation_error\").default`,\n        });\n    }\n    const validateName = gen.scopeName(\"validate\");\n    sch.validateName = validateName;\n    const schemaCxt = {\n        gen,\n        allErrors: this.opts.allErrors,\n        data: names_1.default.data,\n        parentData: names_1.default.parentData,\n        parentDataProperty: names_1.default.parentDataProperty,\n        dataNames: [names_1.default.data],\n        dataPathArr: [codegen_1.nil],\n        dataLevel: 0,\n        dataTypes: [],\n        definedProperties: new Set(),\n        topSchemaRef: gen.scopeValue(\"schema\", this.opts.code.source === true\n            ? { ref: sch.schema, code: (0, codegen_1.stringify)(sch.schema) }\n            : { ref: sch.schema }),\n        validateName,\n        ValidationError: _ValidationError,\n        schema: sch.schema,\n        schemaEnv: sch,\n        rootId,\n        baseId: sch.baseId || rootId,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: sch.schemaPath || (this.opts.jtd ? \"\" : \"#\"),\n        errorPath: (0, codegen_1._) `\"\"`,\n        opts: this.opts,\n        self: this,\n    };\n    let sourceCode;\n    try {\n        this._compilations.add(sch);\n        (0, validate_1.validateFunctionCode)(schemaCxt);\n        gen.optimize(this.opts.code.optimize);\n        // gen.optimize(1)\n        const validateCode = gen.toString();\n        sourceCode = `${gen.scopeRefs(names_1.default.scope)}return ${validateCode}`;\n        // console.log((codeSize += sourceCode.length), (nodeCount += gen.nodeCount))\n        if (this.opts.code.process)\n            sourceCode = this.opts.code.process(sourceCode, sch);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode)\n        const makeValidate = new Function(`${names_1.default.self}`, `${names_1.default.scope}`, sourceCode);\n        const validate = makeValidate(this, this.scope.get());\n        this.scope.value(validateName, { ref: validate });\n        validate.errors = null;\n        validate.schema = sch.schema;\n        validate.schemaEnv = sch;\n        if (sch.$async)\n            validate.$async = true;\n        if (this.opts.code.source === true) {\n            validate.source = { validateName, validateCode, scopeValues: gen._values };\n        }\n        if (this.opts.unevaluated) {\n            const { props, items } = schemaCxt;\n            validate.evaluated = {\n                props: props instanceof codegen_1.Name ? undefined : props,\n                items: items instanceof codegen_1.Name ? undefined : items,\n                dynamicProps: props instanceof codegen_1.Name,\n                dynamicItems: items instanceof codegen_1.Name,\n            };\n            if (validate.source)\n                validate.source.evaluated = (0, codegen_1.stringify)(validate.evaluated);\n        }\n        sch.validate = validate;\n        return sch;\n    }\n    catch (e) {\n        delete sch.validate;\n        delete sch.validateName;\n        if (sourceCode)\n            this.logger.error(\"Error compiling schema, function code:\", sourceCode);\n        // console.log(\"\\n\\n\\n *** \\n\", sourceCode, this.opts)\n        throw e;\n    }\n    finally {\n        this._compilations.delete(sch);\n    }\n}\nexports.compileSchema = compileSchema;\nfunction resolveRef(root, baseId, ref) {\n    var _a;\n    ref = (0, resolve_1.resolveUrl)(baseId, ref);\n    const schOrFunc = root.refs[ref];\n    if (schOrFunc)\n        return schOrFunc;\n    let _sch = resolve.call(this, root, ref);\n    if (_sch === undefined) {\n        const schema = (_a = root.localRefs) === null || _a === void 0 ? void 0 : _a[ref]; // TODO maybe localRefs should hold SchemaEnv\n        const { schemaId } = this.opts;\n        if (schema)\n            _sch = new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    if (_sch === undefined)\n        return;\n    return (root.refs[ref] = inlineOrCompile.call(this, _sch));\n}\nexports.resolveRef = resolveRef;\nfunction inlineOrCompile(sch) {\n    if ((0, resolve_1.inlineRef)(sch.schema, this.opts.inlineRefs))\n        return sch.schema;\n    return sch.validate ? sch : compileSchema.call(this, sch);\n}\n// Index of schema compilation in the currently compiled list\nfunction getCompilingSchema(schEnv) {\n    for (const sch of this._compilations) {\n        if (sameSchemaEnv(sch, schEnv))\n            return sch;\n    }\n}\nexports.getCompilingSchema = getCompilingSchema;\nfunction sameSchemaEnv(s1, s2) {\n    return s1.schema === s2.schema && s1.root === s2.root && s1.baseId === s2.baseId;\n}\n// resolve and compile the references ($ref)\n// TODO returns AnySchemaObject (if the schema can be inlined) or validation function\nfunction resolve(root, // information about the root schema for the current schema\nref // reference to resolve\n) {\n    let sch;\n    while (typeof (sch = this.refs[ref]) == \"string\")\n        ref = sch;\n    return sch || this.schemas[ref] || resolveSchema.call(this, root, ref);\n}\n// Resolve schema, its root and baseId\nfunction resolveSchema(root, // root object with properties schema, refs TODO below SchemaEnv is assigned to it\nref // reference to resolve\n) {\n    const p = URI.parse(ref);\n    const refPath = (0, resolve_1._getFullPath)(p);\n    let baseId = (0, resolve_1.getFullPath)(root.baseId);\n    // TODO `Object.keys(root.schema).length > 0` should not be needed - but removing breaks 2 tests\n    if (Object.keys(root.schema).length > 0 && refPath === baseId) {\n        return getJsonPointer.call(this, p, root);\n    }\n    const id = (0, resolve_1.normalizeId)(refPath);\n    const schOrRef = this.refs[id] || this.schemas[id];\n    if (typeof schOrRef == \"string\") {\n        const sch = resolveSchema.call(this, root, schOrRef);\n        if (typeof (sch === null || sch === void 0 ? void 0 : sch.schema) !== \"object\")\n            return;\n        return getJsonPointer.call(this, p, sch);\n    }\n    if (typeof (schOrRef === null || schOrRef === void 0 ? void 0 : schOrRef.schema) !== \"object\")\n        return;\n    if (!schOrRef.validate)\n        compileSchema.call(this, schOrRef);\n    if (id === (0, resolve_1.normalizeId)(ref)) {\n        const { schema } = schOrRef;\n        const { schemaId } = this.opts;\n        const schId = schema[schemaId];\n        if (schId)\n            baseId = (0, resolve_1.resolveUrl)(baseId, schId);\n        return new SchemaEnv({ schema, schemaId, root, baseId });\n    }\n    return getJsonPointer.call(this, p, schOrRef);\n}\nexports.resolveSchema = resolveSchema;\nconst PREVENT_SCOPE_CHANGE = new Set([\n    \"properties\",\n    \"patternProperties\",\n    \"enum\",\n    \"dependencies\",\n    \"definitions\",\n]);\nfunction getJsonPointer(parsedRef, { baseId, schema, root }) {\n    var _a;\n    if (((_a = parsedRef.fragment) === null || _a === void 0 ? void 0 : _a[0]) !== \"/\")\n        return;\n    for (const part of parsedRef.fragment.slice(1).split(\"/\")) {\n        if (typeof schema === \"boolean\")\n            return;\n        const partSchema = schema[(0, util_1.unescapeFragment)(part)];\n        if (partSchema === undefined)\n            return;\n        schema = partSchema;\n        // TODO PREVENT_SCOPE_CHANGE could be defined in keyword def?\n        const schId = typeof schema === \"object\" && schema[this.opts.schemaId];\n        if (!PREVENT_SCOPE_CHANGE.has(part) && schId) {\n            baseId = (0, resolve_1.resolveUrl)(baseId, schId);\n        }\n    }\n    let env;\n    if (typeof schema != \"boolean\" && schema.$ref && !(0, util_1.schemaHasRulesButRef)(schema, this.RULES)) {\n        const $ref = (0, resolve_1.resolveUrl)(baseId, schema.$ref);\n        env = resolveSchema.call(this, root, $ref);\n    }\n    // even though resolution failed we need to return SchemaEnv to throw exception\n    // so that compileAsync loads missing schema.\n    const { schemaId } = this.opts;\n    env = env || new SchemaEnv({ schema, schemaId, root, baseId });\n    if (env.schema !== env.root.schema)\n        return env;\n    return undefined;\n}\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"./codegen\");\nconst names = {\n    // validation function arguments\n    data: new codegen_1.Name(\"data\"),\n    // args passed from referencing schema\n    valCxt: new codegen_1.Name(\"valCxt\"),\n    instancePath: new codegen_1.Name(\"instancePath\"),\n    parentData: new codegen_1.Name(\"parentData\"),\n    parentDataProperty: new codegen_1.Name(\"parentDataProperty\"),\n    rootData: new codegen_1.Name(\"rootData\"),\n    dynamicAnchors: new codegen_1.Name(\"dynamicAnchors\"),\n    // function scoped variables\n    vErrors: new codegen_1.Name(\"vErrors\"),\n    errors: new codegen_1.Name(\"errors\"),\n    this: new codegen_1.Name(\"this\"),\n    // \"globals\"\n    self: new codegen_1.Name(\"self\"),\n    scope: new codegen_1.Name(\"scope\"),\n    // JTD serialize/parse name for JSON string and position\n    json: new codegen_1.Name(\"json\"),\n    jsonPos: new codegen_1.Name(\"jsonPos\"),\n    jsonLen: new codegen_1.Name(\"jsonLen\"),\n    jsonPart: new codegen_1.Name(\"jsonPart\"),\n};\nexports.default = names;\n//# sourceMappingURL=names.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst resolve_1 = require(\"./resolve\");\nclass MissingRefError extends Error {\n    constructor(baseId, ref, msg) {\n        super(msg || `can't resolve reference ${ref} from id ${baseId}`);\n        this.missingRef = (0, resolve_1.resolveUrl)(baseId, ref);\n        this.missingSchema = (0, resolve_1.normalizeId)((0, resolve_1.getFullPath)(this.missingRef));\n    }\n}\nexports.default = MissingRefError;\n//# sourceMappingURL=ref_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSchemaRefs = exports.resolveUrl = exports.normalizeId = exports._getFullPath = exports.getFullPath = exports.inlineRef = void 0;\nconst util_1 = require(\"./util\");\nconst equal = require(\"fast-deep-equal\");\nconst traverse = require(\"json-schema-traverse\");\nconst URI = require(\"uri-js\");\n// TODO refactor to use keyword definitions\nconst SIMPLE_INLINED = new Set([\n    \"type\",\n    \"format\",\n    \"pattern\",\n    \"maxLength\",\n    \"minLength\",\n    \"maxProperties\",\n    \"minProperties\",\n    \"maxItems\",\n    \"minItems\",\n    \"maximum\",\n    \"minimum\",\n    \"uniqueItems\",\n    \"multipleOf\",\n    \"required\",\n    \"enum\",\n    \"const\",\n]);\nfunction inlineRef(schema, limit = true) {\n    if (typeof schema == \"boolean\")\n        return true;\n    if (limit === true)\n        return !hasRef(schema);\n    if (!limit)\n        return false;\n    return countKeys(schema) <= limit;\n}\nexports.inlineRef = inlineRef;\nconst REF_KEYWORDS = new Set([\n    \"$ref\",\n    \"$recursiveRef\",\n    \"$recursiveAnchor\",\n    \"$dynamicRef\",\n    \"$dynamicAnchor\",\n]);\nfunction hasRef(schema) {\n    for (const key in schema) {\n        if (REF_KEYWORDS.has(key))\n            return true;\n        const sch = schema[key];\n        if (Array.isArray(sch) && sch.some(hasRef))\n            return true;\n        if (typeof sch == \"object\" && hasRef(sch))\n            return true;\n    }\n    return false;\n}\nfunction countKeys(schema) {\n    let count = 0;\n    for (const key in schema) {\n        if (key === \"$ref\")\n            return Infinity;\n        count++;\n        if (SIMPLE_INLINED.has(key))\n            continue;\n        if (typeof schema[key] == \"object\") {\n            (0, util_1.eachItem)(schema[key], (sch) => (count += countKeys(sch)));\n        }\n        if (count === Infinity)\n            return Infinity;\n    }\n    return count;\n}\nfunction getFullPath(id = \"\", normalize) {\n    if (normalize !== false)\n        id = normalizeId(id);\n    const p = URI.parse(id);\n    return _getFullPath(p);\n}\nexports.getFullPath = getFullPath;\nfunction _getFullPath(p) {\n    return URI.serialize(p).split(\"#\")[0] + \"#\";\n}\nexports._getFullPath = _getFullPath;\nconst TRAILING_SLASH_HASH = /#\\/?$/;\nfunction normalizeId(id) {\n    return id ? id.replace(TRAILING_SLASH_HASH, \"\") : \"\";\n}\nexports.normalizeId = normalizeId;\nfunction resolveUrl(baseId, id) {\n    id = normalizeId(id);\n    return URI.resolve(baseId, id);\n}\nexports.resolveUrl = resolveUrl;\nconst ANCHOR = /^[a-z_][-a-z0-9._]*$/i;\nfunction getSchemaRefs(schema, baseId) {\n    if (typeof schema == \"boolean\")\n        return {};\n    const { schemaId } = this.opts;\n    const schId = normalizeId(schema[schemaId] || baseId);\n    const baseIds = { \"\": schId };\n    const pathPrefix = getFullPath(schId, false);\n    const localRefs = {};\n    const schemaRefs = new Set();\n    traverse(schema, { allKeys: true }, (sch, jsonPtr, _, parentJsonPtr) => {\n        if (parentJsonPtr === undefined)\n            return;\n        const fullPath = pathPrefix + jsonPtr;\n        let baseId = baseIds[parentJsonPtr];\n        if (typeof sch[schemaId] == \"string\")\n            baseId = addRef.call(this, sch[schemaId]);\n        addAnchor.call(this, sch.$anchor);\n        addAnchor.call(this, sch.$dynamicAnchor);\n        baseIds[jsonPtr] = baseId;\n        function addRef(ref) {\n            ref = normalizeId(baseId ? URI.resolve(baseId, ref) : ref);\n            if (schemaRefs.has(ref))\n                throw ambiguos(ref);\n            schemaRefs.add(ref);\n            let schOrRef = this.refs[ref];\n            if (typeof schOrRef == \"string\")\n                schOrRef = this.refs[schOrRef];\n            if (typeof schOrRef == \"object\") {\n                checkAmbiguosRef(sch, schOrRef.schema, ref);\n            }\n            else if (ref !== normalizeId(fullPath)) {\n                if (ref[0] === \"#\") {\n                    checkAmbiguosRef(sch, localRefs[ref], ref);\n                    localRefs[ref] = sch;\n                }\n                else {\n                    this.refs[ref] = fullPath;\n                }\n            }\n            return ref;\n        }\n        function addAnchor(anchor) {\n            if (typeof anchor == \"string\") {\n                if (!ANCHOR.test(anchor))\n                    throw new Error(`invalid anchor \"${anchor}\"`);\n                addRef.call(this, `#${anchor}`);\n            }\n        }\n    });\n    return localRefs;\n    function checkAmbiguosRef(sch1, sch2, ref) {\n        if (sch2 !== undefined && !equal(sch1, sch2))\n            throw ambiguos(ref);\n    }\n    function ambiguos(ref) {\n        return new Error(`reference \"${ref}\" resolves to more than one schema`);\n    }\n}\nexports.getSchemaRefs = getSchemaRefs;\n//# sourceMappingURL=resolve.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRules = exports.isJSONType = void 0;\nconst _jsonTypes = [\"string\", \"number\", \"integer\", \"boolean\", \"null\", \"object\", \"array\"];\nconst jsonTypes = new Set(_jsonTypes);\nfunction isJSONType(x) {\n    return typeof x == \"string\" && jsonTypes.has(x);\n}\nexports.isJSONType = isJSONType;\nfunction getRules() {\n    const groups = {\n        number: { type: \"number\", rules: [] },\n        string: { type: \"string\", rules: [] },\n        array: { type: \"array\", rules: [] },\n        object: { type: \"object\", rules: [] },\n    };\n    return {\n        types: { ...groups, integer: true, boolean: true, null: true },\n        rules: [{ rules: [] }, groups.number, groups.string, groups.array, groups.object],\n        post: { rules: [] },\n        all: {},\n        keywords: {},\n    };\n}\nexports.getRules = getRules;\n//# sourceMappingURL=rules.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkStrictMode = exports.getErrorPath = exports.Type = exports.useFunc = exports.setEvaluated = exports.evaluatedPropsToName = exports.mergeEvaluated = exports.eachItem = exports.unescapeJsonPointer = exports.escapeJsonPointer = exports.escapeFragment = exports.unescapeFragment = exports.schemaRefOrVal = exports.schemaHasRulesButRef = exports.schemaHasRules = exports.checkUnknownRules = exports.alwaysValidSchema = exports.toHash = void 0;\nconst codegen_1 = require(\"./codegen\");\nconst code_1 = require(\"./codegen/code\");\n// TODO refactor to use Set\nfunction toHash(arr) {\n    const hash = {};\n    for (const item of arr)\n        hash[item] = true;\n    return hash;\n}\nexports.toHash = toHash;\nfunction alwaysValidSchema(it, schema) {\n    if (typeof schema == \"boolean\")\n        return schema;\n    if (Object.keys(schema).length === 0)\n        return true;\n    checkUnknownRules(it, schema);\n    return !schemaHasRules(schema, it.self.RULES.all);\n}\nexports.alwaysValidSchema = alwaysValidSchema;\nfunction checkUnknownRules(it, schema = it.schema) {\n    const { opts, self } = it;\n    if (!opts.strictSchema)\n        return;\n    if (typeof schema === \"boolean\")\n        return;\n    const rules = self.RULES.keywords;\n    for (const key in schema) {\n        if (!rules[key])\n            checkStrictMode(it, `unknown keyword: \"${key}\"`);\n    }\n}\nexports.checkUnknownRules = checkUnknownRules;\nfunction schemaHasRules(schema, rules) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (rules[key])\n            return true;\n    return false;\n}\nexports.schemaHasRules = schemaHasRules;\nfunction schemaHasRulesButRef(schema, RULES) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (key !== \"$ref\" && RULES.all[key])\n            return true;\n    return false;\n}\nexports.schemaHasRulesButRef = schemaHasRulesButRef;\nfunction schemaRefOrVal({ topSchemaRef, schemaPath }, schema, keyword, $data) {\n    if (!$data) {\n        if (typeof schema == \"number\" || typeof schema == \"boolean\")\n            return schema;\n        if (typeof schema == \"string\")\n            return (0, codegen_1._) `${schema}`;\n    }\n    return (0, codegen_1._) `${topSchemaRef}${schemaPath}${(0, codegen_1.getProperty)(keyword)}`;\n}\nexports.schemaRefOrVal = schemaRefOrVal;\nfunction unescapeFragment(str) {\n    return unescapeJsonPointer(decodeURIComponent(str));\n}\nexports.unescapeFragment = unescapeFragment;\nfunction escapeFragment(str) {\n    return encodeURIComponent(escapeJsonPointer(str));\n}\nexports.escapeFragment = escapeFragment;\nfunction escapeJsonPointer(str) {\n    if (typeof str == \"number\")\n        return `${str}`;\n    return str.replace(/~/g, \"~0\").replace(/\\//g, \"~1\");\n}\nexports.escapeJsonPointer = escapeJsonPointer;\nfunction unescapeJsonPointer(str) {\n    return str.replace(/~1/g, \"/\").replace(/~0/g, \"~\");\n}\nexports.unescapeJsonPointer = unescapeJsonPointer;\nfunction eachItem(xs, f) {\n    if (Array.isArray(xs)) {\n        for (const x of xs)\n            f(x);\n    }\n    else {\n        f(xs);\n    }\n}\nexports.eachItem = eachItem;\nfunction makeMergeEvaluated({ mergeNames, mergeToName, mergeValues, resultToName, }) {\n    return (gen, from, to, toName) => {\n        const res = to === undefined\n            ? from\n            : to instanceof codegen_1.Name\n                ? (from instanceof codegen_1.Name ? mergeNames(gen, from, to) : mergeToName(gen, from, to), to)\n                : from instanceof codegen_1.Name\n                    ? (mergeToName(gen, to, from), from)\n                    : mergeValues(from, to);\n        return toName === codegen_1.Name && !(res instanceof codegen_1.Name) ? resultToName(gen, res) : res;\n    };\n}\nexports.mergeEvaluated = {\n    props: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => {\n            gen.if((0, codegen_1._) `${from} === true`, () => gen.assign(to, true), () => gen.assign(to, (0, codegen_1._) `${to} || {}`).code((0, codegen_1._) `Object.assign(${to}, ${from})`));\n        }),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => {\n            if (from === true) {\n                gen.assign(to, true);\n            }\n            else {\n                gen.assign(to, (0, codegen_1._) `${to} || {}`);\n                setEvaluated(gen, to, from);\n            }\n        }),\n        mergeValues: (from, to) => (from === true ? true : { ...from, ...to }),\n        resultToName: evaluatedPropsToName,\n    }),\n    items: makeMergeEvaluated({\n        mergeNames: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true && ${from} !== undefined`, () => gen.assign(to, (0, codegen_1._) `${from} === true ? true : ${to} > ${from} ? ${to} : ${from}`)),\n        mergeToName: (gen, from, to) => gen.if((0, codegen_1._) `${to} !== true`, () => gen.assign(to, from === true ? true : (0, codegen_1._) `${to} > ${from} ? ${to} : ${from}`)),\n        mergeValues: (from, to) => (from === true ? true : Math.max(from, to)),\n        resultToName: (gen, items) => gen.var(\"items\", items),\n    }),\n};\nfunction evaluatedPropsToName(gen, ps) {\n    if (ps === true)\n        return gen.var(\"props\", true);\n    const props = gen.var(\"props\", (0, codegen_1._) `{}`);\n    if (ps !== undefined)\n        setEvaluated(gen, props, ps);\n    return props;\n}\nexports.evaluatedPropsToName = evaluatedPropsToName;\nfunction setEvaluated(gen, props, ps) {\n    Object.keys(ps).forEach((p) => gen.assign((0, codegen_1._) `${props}${(0, codegen_1.getProperty)(p)}`, true));\n}\nexports.setEvaluated = setEvaluated;\nconst snippets = {};\nfunction useFunc(gen, f) {\n    return gen.scopeValue(\"func\", {\n        ref: f,\n        code: snippets[f.code] || (snippets[f.code] = new code_1._Code(f.code)),\n    });\n}\nexports.useFunc = useFunc;\nvar Type;\n(function (Type) {\n    Type[Type[\"Num\"] = 0] = \"Num\";\n    Type[Type[\"Str\"] = 1] = \"Str\";\n})(Type = exports.Type || (exports.Type = {}));\nfunction getErrorPath(dataProp, dataPropType, jsPropertySyntax) {\n    // let path\n    if (dataProp instanceof codegen_1.Name) {\n        const isNumber = dataPropType === Type.Num;\n        return jsPropertySyntax\n            ? isNumber\n                ? (0, codegen_1._) `\"[\" + ${dataProp} + \"]\"`\n                : (0, codegen_1._) `\"['\" + ${dataProp} + \"']\"`\n            : isNumber\n                ? (0, codegen_1._) `\"/\" + ${dataProp}`\n                : (0, codegen_1._) `\"/\" + ${dataProp}.replace(/~/g, \"~0\").replace(/\\\\//g, \"~1\")`; // TODO maybe use global escapePointer\n    }\n    return jsPropertySyntax ? (0, codegen_1.getProperty)(dataProp).toString() : \"/\" + escapeJsonPointer(dataProp);\n}\nexports.getErrorPath = getErrorPath;\nfunction checkStrictMode(it, msg, mode = it.opts.strictSchema) {\n    if (!mode)\n        return;\n    msg = `strict mode: ${msg}`;\n    if (mode === true)\n        throw new Error(msg);\n    it.self.logger.warn(msg);\n}\nexports.checkStrictMode = checkStrictMode;\n//# sourceMappingURL=util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.shouldUseRule = exports.shouldUseGroup = exports.schemaHasRulesForType = void 0;\nfunction schemaHasRulesForType({ schema, self }, type) {\n    const group = self.RULES.types[type];\n    return group && group !== true && shouldUseGroup(schema, group);\n}\nexports.schemaHasRulesForType = schemaHasRulesForType;\nfunction shouldUseGroup(schema, group) {\n    return group.rules.some((rule) => shouldUseRule(schema, rule));\n}\nexports.shouldUseGroup = shouldUseGroup;\nfunction shouldUseRule(schema, rule) {\n    var _a;\n    return (schema[rule.keyword] !== undefined ||\n        ((_a = rule.definition.implements) === null || _a === void 0 ? void 0 : _a.some((kwd) => schema[kwd] !== undefined)));\n}\nexports.shouldUseRule = shouldUseRule;\n//# sourceMappingURL=applicability.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.boolOrEmptySchema = exports.topBoolOrEmptySchema = void 0;\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst boolError = {\n    message: \"boolean schema is false\",\n};\nfunction topBoolOrEmptySchema(it) {\n    const { gen, schema, validateName } = it;\n    if (schema === false) {\n        falseSchemaError(it, false);\n    }\n    else if (typeof schema == \"object\" && schema.$async === true) {\n        gen.return(names_1.default.data);\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, null);\n        gen.return(true);\n    }\n}\nexports.topBoolOrEmptySchema = topBoolOrEmptySchema;\nfunction boolOrEmptySchema(it, valid) {\n    const { gen, schema } = it;\n    if (schema === false) {\n        gen.var(valid, false); // TODO var\n        falseSchemaError(it);\n    }\n    else {\n        gen.var(valid, true); // TODO var\n    }\n}\nexports.boolOrEmptySchema = boolOrEmptySchema;\nfunction falseSchemaError(it, overrideAllErrors) {\n    const { gen, data } = it;\n    // TODO maybe some other interface should be used for non-keyword validation errors...\n    const cxt = {\n        gen,\n        keyword: \"false schema\",\n        data,\n        schema: false,\n        schemaCode: false,\n        schemaValue: false,\n        params: {},\n        it,\n    };\n    (0, errors_1.reportError)(cxt, boolError, undefined, overrideAllErrors);\n}\n//# sourceMappingURL=boolSchema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.reportTypeError = exports.checkDataTypes = exports.checkDataType = exports.coerceAndCheckDataType = exports.getJSONTypes = exports.getSchemaTypes = exports.DataType = void 0;\nconst rules_1 = require(\"../rules\");\nconst applicability_1 = require(\"./applicability\");\nconst errors_1 = require(\"../errors\");\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nvar DataType;\n(function (DataType) {\n    DataType[DataType[\"Correct\"] = 0] = \"Correct\";\n    DataType[DataType[\"Wrong\"] = 1] = \"Wrong\";\n})(DataType = exports.DataType || (exports.DataType = {}));\nfunction getSchemaTypes(schema) {\n    const types = getJSONTypes(schema.type);\n    const hasNull = types.includes(\"null\");\n    if (hasNull) {\n        if (schema.nullable === false)\n            throw new Error(\"type: null contradicts nullable: false\");\n    }\n    else {\n        if (!types.length && schema.nullable !== undefined) {\n            throw new Error('\"nullable\" cannot be used without \"type\"');\n        }\n        if (schema.nullable === true)\n            types.push(\"null\");\n    }\n    return types;\n}\nexports.getSchemaTypes = getSchemaTypes;\nfunction getJSONTypes(ts) {\n    const types = Array.isArray(ts) ? ts : ts ? [ts] : [];\n    if (types.every(rules_1.isJSONType))\n        return types;\n    throw new Error(\"type must be JSONType or JSONType[]: \" + types.join(\",\"));\n}\nexports.getJSONTypes = getJSONTypes;\nfunction coerceAndCheckDataType(it, types) {\n    const { gen, data, opts } = it;\n    const coerceTo = coerceToTypes(types, opts.coerceTypes);\n    const checkTypes = types.length > 0 &&\n        !(coerceTo.length === 0 && types.length === 1 && (0, applicability_1.schemaHasRulesForType)(it, types[0]));\n    if (checkTypes) {\n        const wrongType = checkDataTypes(types, data, opts.strictNumbers, DataType.Wrong);\n        gen.if(wrongType, () => {\n            if (coerceTo.length)\n                coerceData(it, types, coerceTo);\n            else\n                reportTypeError(it);\n        });\n    }\n    return checkTypes;\n}\nexports.coerceAndCheckDataType = coerceAndCheckDataType;\nconst COERCIBLE = new Set([\"string\", \"number\", \"integer\", \"boolean\", \"null\"]);\nfunction coerceToTypes(types, coerceTypes) {\n    return coerceTypes\n        ? types.filter((t) => COERCIBLE.has(t) || (coerceTypes === \"array\" && t === \"array\"))\n        : [];\n}\nfunction coerceData(it, types, coerceTo) {\n    const { gen, data, opts } = it;\n    const dataType = gen.let(\"dataType\", (0, codegen_1._) `typeof ${data}`);\n    const coerced = gen.let(\"coerced\", (0, codegen_1._) `undefined`);\n    if (opts.coerceTypes === \"array\") {\n        gen.if((0, codegen_1._) `${dataType} == 'object' && Array.isArray(${data}) && ${data}.length == 1`, () => gen\n            .assign(data, (0, codegen_1._) `${data}[0]`)\n            .assign(dataType, (0, codegen_1._) `typeof ${data}`)\n            .if(checkDataTypes(types, data, opts.strictNumbers), () => gen.assign(coerced, data)));\n    }\n    gen.if((0, codegen_1._) `${coerced} !== undefined`);\n    for (const t of coerceTo) {\n        if (COERCIBLE.has(t) || (t === \"array\" && opts.coerceTypes === \"array\")) {\n            coerceSpecificType(t);\n        }\n    }\n    gen.else();\n    reportTypeError(it);\n    gen.endIf();\n    gen.if((0, codegen_1._) `${coerced} !== undefined`, () => {\n        gen.assign(data, coerced);\n        assignParentData(it, coerced);\n    });\n    function coerceSpecificType(t) {\n        switch (t) {\n            case \"string\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"number\" || ${dataType} == \"boolean\"`)\n                    .assign(coerced, (0, codegen_1._) `\"\" + ${data}`)\n                    .elseIf((0, codegen_1._) `${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `\"\"`);\n                return;\n            case \"number\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} == \"boolean\" || ${data} === null\n              || (${dataType} == \"string\" && ${data} && ${data} == +${data})`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"integer\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"boolean\" || ${data} === null\n              || (${dataType} === \"string\" && ${data} && ${data} == +${data} && !(${data} % 1))`)\n                    .assign(coerced, (0, codegen_1._) `+${data}`);\n                return;\n            case \"boolean\":\n                gen\n                    .elseIf((0, codegen_1._) `${data} === \"false\" || ${data} === 0 || ${data} === null`)\n                    .assign(coerced, false)\n                    .elseIf((0, codegen_1._) `${data} === \"true\" || ${data} === 1`)\n                    .assign(coerced, true);\n                return;\n            case \"null\":\n                gen.elseIf((0, codegen_1._) `${data} === \"\" || ${data} === 0 || ${data} === false`);\n                gen.assign(coerced, null);\n                return;\n            case \"array\":\n                gen\n                    .elseIf((0, codegen_1._) `${dataType} === \"string\" || ${dataType} === \"number\"\n              || ${dataType} === \"boolean\" || ${data} === null`)\n                    .assign(coerced, (0, codegen_1._) `[${data}]`);\n        }\n    }\n}\nfunction assignParentData({ gen, parentData, parentDataProperty }, expr) {\n    // TODO use gen.property\n    gen.if((0, codegen_1._) `${parentData} !== undefined`, () => gen.assign((0, codegen_1._) `${parentData}[${parentDataProperty}]`, expr));\n}\nfunction checkDataType(dataType, data, strictNums, correct = DataType.Correct) {\n    const EQ = correct === DataType.Correct ? codegen_1.operators.EQ : codegen_1.operators.NEQ;\n    let cond;\n    switch (dataType) {\n        case \"null\":\n            return (0, codegen_1._) `${data} ${EQ} null`;\n        case \"array\":\n            cond = (0, codegen_1._) `Array.isArray(${data})`;\n            break;\n        case \"object\":\n            cond = (0, codegen_1._) `${data} && typeof ${data} == \"object\" && !Array.isArray(${data})`;\n            break;\n        case \"integer\":\n            cond = numCond((0, codegen_1._) `!(${data} % 1) && !isNaN(${data})`);\n            break;\n        case \"number\":\n            cond = numCond();\n            break;\n        default:\n            return (0, codegen_1._) `typeof ${data} ${EQ} ${dataType}`;\n    }\n    return correct === DataType.Correct ? cond : (0, codegen_1.not)(cond);\n    function numCond(_cond = codegen_1.nil) {\n        return (0, codegen_1.and)((0, codegen_1._) `typeof ${data} == \"number\"`, _cond, strictNums ? (0, codegen_1._) `isFinite(${data})` : codegen_1.nil);\n    }\n}\nexports.checkDataType = checkDataType;\nfunction checkDataTypes(dataTypes, data, strictNums, correct) {\n    if (dataTypes.length === 1) {\n        return checkDataType(dataTypes[0], data, strictNums, correct);\n    }\n    let cond;\n    const types = (0, util_1.toHash)(dataTypes);\n    if (types.array && types.object) {\n        const notObj = (0, codegen_1._) `typeof ${data} != \"object\"`;\n        cond = types.null ? notObj : (0, codegen_1._) `!${data} || ${notObj}`;\n        delete types.null;\n        delete types.array;\n        delete types.object;\n    }\n    else {\n        cond = codegen_1.nil;\n    }\n    if (types.number)\n        delete types.integer;\n    for (const t in types)\n        cond = (0, codegen_1.and)(cond, checkDataType(t, data, strictNums, correct));\n    return cond;\n}\nexports.checkDataTypes = checkDataTypes;\nconst typeError = {\n    message: ({ schema }) => `must be ${schema}`,\n    params: ({ schema, schemaValue }) => typeof schema == \"string\" ? (0, codegen_1._) `{type: ${schema}}` : (0, codegen_1._) `{type: ${schemaValue}}`,\n};\nfunction reportTypeError(it) {\n    const cxt = getTypeErrorContext(it);\n    (0, errors_1.reportError)(cxt, typeError);\n}\nexports.reportTypeError = reportTypeError;\nfunction getTypeErrorContext(it) {\n    const { gen, data, schema } = it;\n    const schemaCode = (0, util_1.schemaRefOrVal)(it, schema, \"type\");\n    return {\n        gen,\n        keyword: \"type\",\n        data,\n        schema: schema.type,\n        schemaCode,\n        schemaValue: schemaCode,\n        parentSchema: schema,\n        params: {},\n        it,\n    };\n}\n//# sourceMappingURL=dataType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.assignDefaults = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction assignDefaults(it, ty) {\n    const { properties, items } = it.schema;\n    if (ty === \"object\" && properties) {\n        for (const key in properties) {\n            assignDefault(it, key, properties[key].default);\n        }\n    }\n    else if (ty === \"array\" && Array.isArray(items)) {\n        items.forEach((sch, i) => assignDefault(it, i, sch.default));\n    }\n}\nexports.assignDefaults = assignDefaults;\nfunction assignDefault(it, prop, defaultValue) {\n    const { gen, compositeRule, data, opts } = it;\n    if (defaultValue === undefined)\n        return;\n    const childData = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(prop)}`;\n    if (compositeRule) {\n        (0, util_1.checkStrictMode)(it, `default is ignored for: ${childData}`);\n        return;\n    }\n    let condition = (0, codegen_1._) `${childData} === undefined`;\n    if (opts.useDefaults === \"empty\") {\n        condition = (0, codegen_1._) `${condition} || ${childData} === null || ${childData} === \"\"`;\n    }\n    // `${childData} === undefined` +\n    // (opts.useDefaults === \"empty\" ? ` || ${childData} === null || ${childData} === \"\"` : \"\")\n    gen.if(condition, (0, codegen_1._) `${childData} = ${(0, codegen_1.stringify)(defaultValue)}`);\n}\n//# sourceMappingURL=defaults.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getData = exports.KeywordCxt = exports.validateFunctionCode = void 0;\nconst boolSchema_1 = require(\"./boolSchema\");\nconst dataType_1 = require(\"./dataType\");\nconst applicability_1 = require(\"./applicability\");\nconst dataType_2 = require(\"./dataType\");\nconst defaults_1 = require(\"./defaults\");\nconst keyword_1 = require(\"./keyword\");\nconst subschema_1 = require(\"./subschema\");\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst resolve_1 = require(\"../resolve\");\nconst util_1 = require(\"../util\");\nconst errors_1 = require(\"../errors\");\n// schema compilation - generates validation function, subschemaCode (below) is used for subschemas\nfunction validateFunctionCode(it) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            topSchemaObjCode(it);\n            return;\n        }\n    }\n    validateFunction(it, () => (0, boolSchema_1.topBoolOrEmptySchema)(it));\n}\nexports.validateFunctionCode = validateFunctionCode;\nfunction validateFunction({ gen, validateName, schema, schemaEnv, opts }, body) {\n    if (opts.code.es5) {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${names_1.default.valCxt}`, schemaEnv.$async, () => {\n            gen.code((0, codegen_1._) `\"use strict\"; ${funcSourceUrl(schema, opts)}`);\n            destructureValCxtES5(gen, opts);\n            gen.code(body);\n        });\n    }\n    else {\n        gen.func(validateName, (0, codegen_1._) `${names_1.default.data}, ${destructureValCxt(opts)}`, schemaEnv.$async, () => gen.code(funcSourceUrl(schema, opts)).code(body));\n    }\n}\nfunction destructureValCxt(opts) {\n    return (0, codegen_1._) `{${names_1.default.instancePath}=\"\", ${names_1.default.parentData}, ${names_1.default.parentDataProperty}, ${names_1.default.rootData}=${names_1.default.data}${opts.dynamicRef ? (0, codegen_1._) `, ${names_1.default.dynamicAnchors}={}` : codegen_1.nil}}={}`;\n}\nfunction destructureValCxtES5(gen, opts) {\n    gen.if(names_1.default.valCxt, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.instancePath}`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentData}`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.parentDataProperty}`);\n        gen.var(names_1.default.rootData, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.rootData}`);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `${names_1.default.valCxt}.${names_1.default.dynamicAnchors}`);\n    }, () => {\n        gen.var(names_1.default.instancePath, (0, codegen_1._) `\"\"`);\n        gen.var(names_1.default.parentData, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.parentDataProperty, (0, codegen_1._) `undefined`);\n        gen.var(names_1.default.rootData, names_1.default.data);\n        if (opts.dynamicRef)\n            gen.var(names_1.default.dynamicAnchors, (0, codegen_1._) `{}`);\n    });\n}\nfunction topSchemaObjCode(it) {\n    const { schema, opts, gen } = it;\n    validateFunction(it, () => {\n        if (opts.$comment && schema.$comment)\n            commentKeyword(it);\n        checkNoDefault(it);\n        gen.let(names_1.default.vErrors, null);\n        gen.let(names_1.default.errors, 0);\n        if (opts.unevaluated)\n            resetEvaluated(it);\n        typeAndKeywords(it);\n        returnResults(it);\n    });\n    return;\n}\nfunction resetEvaluated(it) {\n    // TODO maybe some hook to execute it in the end to check whether props/items are Name, as in assignEvaluated\n    const { gen, validateName } = it;\n    it.evaluated = gen.const(\"evaluated\", (0, codegen_1._) `${validateName}.evaluated`);\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicProps`, () => gen.assign((0, codegen_1._) `${it.evaluated}.props`, (0, codegen_1._) `undefined`));\n    gen.if((0, codegen_1._) `${it.evaluated}.dynamicItems`, () => gen.assign((0, codegen_1._) `${it.evaluated}.items`, (0, codegen_1._) `undefined`));\n}\nfunction funcSourceUrl(schema, opts) {\n    const schId = typeof schema == \"object\" && schema[opts.schemaId];\n    return schId && (opts.code.source || opts.code.process) ? (0, codegen_1._) `/*# sourceURL=${schId} */` : codegen_1.nil;\n}\n// schema compilation - this function is used recursively to generate code for sub-schemas\nfunction subschemaCode(it, valid) {\n    if (isSchemaObj(it)) {\n        checkKeywords(it);\n        if (schemaCxtHasRules(it)) {\n            subSchemaObjCode(it, valid);\n            return;\n        }\n    }\n    (0, boolSchema_1.boolOrEmptySchema)(it, valid);\n}\nfunction schemaCxtHasRules({ schema, self }) {\n    if (typeof schema == \"boolean\")\n        return !schema;\n    for (const key in schema)\n        if (self.RULES.all[key])\n            return true;\n    return false;\n}\nfunction isSchemaObj(it) {\n    return typeof it.schema != \"boolean\";\n}\nfunction subSchemaObjCode(it, valid) {\n    const { schema, gen, opts } = it;\n    if (opts.$comment && schema.$comment)\n        commentKeyword(it);\n    updateContext(it);\n    checkAsyncSchema(it);\n    const errsCount = gen.const(\"_errs\", names_1.default.errors);\n    typeAndKeywords(it, errsCount);\n    // TODO var\n    gen.var(valid, (0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n}\nfunction checkKeywords(it) {\n    (0, util_1.checkUnknownRules)(it);\n    checkRefsAndKeywords(it);\n}\nfunction typeAndKeywords(it, errsCount) {\n    if (it.opts.jtd)\n        return schemaKeywords(it, [], false, errsCount);\n    const types = (0, dataType_1.getSchemaTypes)(it.schema);\n    const checkedTypes = (0, dataType_1.coerceAndCheckDataType)(it, types);\n    schemaKeywords(it, types, !checkedTypes, errsCount);\n}\nfunction checkRefsAndKeywords(it) {\n    const { schema, errSchemaPath, opts, self } = it;\n    if (schema.$ref && opts.ignoreKeywordsWithRef && (0, util_1.schemaHasRulesButRef)(schema, self.RULES)) {\n        self.logger.warn(`$ref: keywords ignored in schema at path \"${errSchemaPath}\"`);\n    }\n}\nfunction checkNoDefault(it) {\n    const { schema, opts } = it;\n    if (schema.default !== undefined && opts.useDefaults && opts.strictSchema) {\n        (0, util_1.checkStrictMode)(it, \"default is ignored in the schema root\");\n    }\n}\nfunction updateContext(it) {\n    const schId = it.schema[it.opts.schemaId];\n    if (schId)\n        it.baseId = (0, resolve_1.resolveUrl)(it.baseId, schId);\n}\nfunction checkAsyncSchema(it) {\n    if (it.schema.$async && !it.schemaEnv.$async)\n        throw new Error(\"async schema in sync schema\");\n}\nfunction commentKeyword({ gen, schemaEnv, schema, errSchemaPath, opts }) {\n    const msg = schema.$comment;\n    if (opts.$comment === true) {\n        gen.code((0, codegen_1._) `${names_1.default.self}.logger.log(${msg})`);\n    }\n    else if (typeof opts.$comment == \"function\") {\n        const schemaPath = (0, codegen_1.str) `${errSchemaPath}/$comment`;\n        const rootName = gen.scopeValue(\"root\", { ref: schemaEnv.root });\n        gen.code((0, codegen_1._) `${names_1.default.self}.opts.$comment(${msg}, ${schemaPath}, ${rootName}.schema)`);\n    }\n}\nfunction returnResults(it) {\n    const { gen, schemaEnv, validateName, ValidationError, opts } = it;\n    if (schemaEnv.$async) {\n        // TODO assign unevaluated\n        gen.if((0, codegen_1._) `${names_1.default.errors} === 0`, () => gen.return(names_1.default.data), () => gen.throw((0, codegen_1._) `new ${ValidationError}(${names_1.default.vErrors})`));\n    }\n    else {\n        gen.assign((0, codegen_1._) `${validateName}.errors`, names_1.default.vErrors);\n        if (opts.unevaluated)\n            assignEvaluated(it);\n        gen.return((0, codegen_1._) `${names_1.default.errors} === 0`);\n    }\n}\nfunction assignEvaluated({ gen, evaluated, props, items }) {\n    if (props instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.props`, props);\n    if (items instanceof codegen_1.Name)\n        gen.assign((0, codegen_1._) `${evaluated}.items`, items);\n}\nfunction schemaKeywords(it, types, typeErrors, errsCount) {\n    const { gen, schema, data, allErrors, opts, self } = it;\n    const { RULES } = self;\n    if (schema.$ref && (opts.ignoreKeywordsWithRef || !(0, util_1.schemaHasRulesButRef)(schema, RULES))) {\n        gen.block(() => keywordCode(it, \"$ref\", RULES.all.$ref.definition)); // TODO typecast\n        return;\n    }\n    if (!opts.jtd)\n        checkStrictTypes(it, types);\n    gen.block(() => {\n        for (const group of RULES.rules)\n            groupKeywords(group);\n        groupKeywords(RULES.post);\n    });\n    function groupKeywords(group) {\n        if (!(0, applicability_1.shouldUseGroup)(schema, group))\n            return;\n        if (group.type) {\n            gen.if((0, dataType_2.checkDataType)(group.type, data, opts.strictNumbers));\n            iterateKeywords(it, group);\n            if (types.length === 1 && types[0] === group.type && typeErrors) {\n                gen.else();\n                (0, dataType_2.reportTypeError)(it);\n            }\n            gen.endIf();\n        }\n        else {\n            iterateKeywords(it, group);\n        }\n        // TODO make it \"ok\" call?\n        if (!allErrors)\n            gen.if((0, codegen_1._) `${names_1.default.errors} === ${errsCount || 0}`);\n    }\n}\nfunction iterateKeywords(it, group) {\n    const { gen, schema, opts: { useDefaults }, } = it;\n    if (useDefaults)\n        (0, defaults_1.assignDefaults)(it, group.type);\n    gen.block(() => {\n        for (const rule of group.rules) {\n            if ((0, applicability_1.shouldUseRule)(schema, rule)) {\n                keywordCode(it, rule.keyword, rule.definition, group.type);\n            }\n        }\n    });\n}\nfunction checkStrictTypes(it, types) {\n    if (it.schemaEnv.meta || !it.opts.strictTypes)\n        return;\n    checkContextTypes(it, types);\n    if (!it.opts.allowUnionTypes)\n        checkMultipleTypes(it, types);\n    checkKeywordTypes(it, it.dataTypes);\n}\nfunction checkContextTypes(it, types) {\n    if (!types.length)\n        return;\n    if (!it.dataTypes.length) {\n        it.dataTypes = types;\n        return;\n    }\n    types.forEach((t) => {\n        if (!includesType(it.dataTypes, t)) {\n            strictTypesError(it, `type \"${t}\" not allowed by context \"${it.dataTypes.join(\",\")}\"`);\n        }\n    });\n    it.dataTypes = it.dataTypes.filter((t) => includesType(types, t));\n}\nfunction checkMultipleTypes(it, ts) {\n    if (ts.length > 1 && !(ts.length === 2 && ts.includes(\"null\"))) {\n        strictTypesError(it, \"use allowUnionTypes to allow union type keyword\");\n    }\n}\nfunction checkKeywordTypes(it, ts) {\n    const rules = it.self.RULES.all;\n    for (const keyword in rules) {\n        const rule = rules[keyword];\n        if (typeof rule == \"object\" && (0, applicability_1.shouldUseRule)(it.schema, rule)) {\n            const { type } = rule.definition;\n            if (type.length && !type.some((t) => hasApplicableType(ts, t))) {\n                strictTypesError(it, `missing type \"${type.join(\",\")}\" for keyword \"${keyword}\"`);\n            }\n        }\n    }\n}\nfunction hasApplicableType(schTs, kwdT) {\n    return schTs.includes(kwdT) || (kwdT === \"number\" && schTs.includes(\"integer\"));\n}\nfunction includesType(ts, t) {\n    return ts.includes(t) || (t === \"integer\" && ts.includes(\"number\"));\n}\nfunction strictTypesError(it, msg) {\n    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n    msg += ` at \"${schemaPath}\" (strictTypes)`;\n    (0, util_1.checkStrictMode)(it, msg, it.opts.strictTypes);\n}\nclass KeywordCxt {\n    constructor(it, def, keyword) {\n        (0, keyword_1.validateKeywordUsage)(it, def, keyword);\n        this.gen = it.gen;\n        this.allErrors = it.allErrors;\n        this.keyword = keyword;\n        this.data = it.data;\n        this.schema = it.schema[keyword];\n        this.$data = def.$data && it.opts.$data && this.schema && this.schema.$data;\n        this.schemaValue = (0, util_1.schemaRefOrVal)(it, this.schema, keyword, this.$data);\n        this.schemaType = def.schemaType;\n        this.parentSchema = it.schema;\n        this.params = {};\n        this.it = it;\n        this.def = def;\n        if (this.$data) {\n            this.schemaCode = it.gen.const(\"vSchema\", getData(this.$data, it));\n        }\n        else {\n            this.schemaCode = this.schemaValue;\n            if (!(0, keyword_1.validSchemaType)(this.schema, def.schemaType, def.allowUndefined)) {\n                throw new Error(`${keyword} value must be ${JSON.stringify(def.schemaType)}`);\n            }\n        }\n        if (\"code\" in def ? def.trackErrors : def.errors !== false) {\n            this.errsCount = it.gen.const(\"_errs\", names_1.default.errors);\n        }\n    }\n    result(condition, successAction, failAction) {\n        this.failResult((0, codegen_1.not)(condition), successAction, failAction);\n    }\n    failResult(condition, successAction, failAction) {\n        this.gen.if(condition);\n        if (failAction)\n            failAction();\n        else\n            this.error();\n        if (successAction) {\n            this.gen.else();\n            successAction();\n            if (this.allErrors)\n                this.gen.endIf();\n        }\n        else {\n            if (this.allErrors)\n                this.gen.endIf();\n            else\n                this.gen.else();\n        }\n    }\n    pass(condition, failAction) {\n        this.failResult((0, codegen_1.not)(condition), undefined, failAction);\n    }\n    fail(condition) {\n        if (condition === undefined) {\n            this.error();\n            if (!this.allErrors)\n                this.gen.if(false); // this branch will be removed by gen.optimize\n            return;\n        }\n        this.gen.if(condition);\n        this.error();\n        if (this.allErrors)\n            this.gen.endIf();\n        else\n            this.gen.else();\n    }\n    fail$data(condition) {\n        if (!this.$data)\n            return this.fail(condition);\n        const { schemaCode } = this;\n        this.fail((0, codegen_1._) `${schemaCode} !== undefined && (${(0, codegen_1.or)(this.invalid$data(), condition)})`);\n    }\n    error(append, errorParams, errorPaths) {\n        if (errorParams) {\n            this.setParams(errorParams);\n            this._error(append, errorPaths);\n            this.setParams({});\n            return;\n        }\n        this._error(append, errorPaths);\n    }\n    _error(append, errorPaths) {\n        ;\n        (append ? errors_1.reportExtraError : errors_1.reportError)(this, this.def.error, errorPaths);\n    }\n    $dataError() {\n        (0, errors_1.reportError)(this, this.def.$dataError || errors_1.keyword$DataError);\n    }\n    reset() {\n        if (this.errsCount === undefined)\n            throw new Error('add \"trackErrors\" to keyword definition');\n        (0, errors_1.resetErrorsCount)(this.gen, this.errsCount);\n    }\n    ok(cond) {\n        if (!this.allErrors)\n            this.gen.if(cond);\n    }\n    setParams(obj, assign) {\n        if (assign)\n            Object.assign(this.params, obj);\n        else\n            this.params = obj;\n    }\n    block$data(valid, codeBlock, $dataValid = codegen_1.nil) {\n        this.gen.block(() => {\n            this.check$data(valid, $dataValid);\n            codeBlock();\n        });\n    }\n    check$data(valid = codegen_1.nil, $dataValid = codegen_1.nil) {\n        if (!this.$data)\n            return;\n        const { gen, schemaCode, schemaType, def } = this;\n        gen.if((0, codegen_1.or)((0, codegen_1._) `${schemaCode} === undefined`, $dataValid));\n        if (valid !== codegen_1.nil)\n            gen.assign(valid, true);\n        if (schemaType.length || def.validateSchema) {\n            gen.elseIf(this.invalid$data());\n            this.$dataError();\n            if (valid !== codegen_1.nil)\n                gen.assign(valid, false);\n        }\n        gen.else();\n    }\n    invalid$data() {\n        const { gen, schemaCode, schemaType, def, it } = this;\n        return (0, codegen_1.or)(wrong$DataType(), invalid$DataSchema());\n        function wrong$DataType() {\n            if (schemaType.length) {\n                /* istanbul ignore if */\n                if (!(schemaCode instanceof codegen_1.Name))\n                    throw new Error(\"ajv implementation error\");\n                const st = Array.isArray(schemaType) ? schemaType : [schemaType];\n                return (0, codegen_1._) `${(0, dataType_2.checkDataTypes)(st, schemaCode, it.opts.strictNumbers, dataType_2.DataType.Wrong)}`;\n            }\n            return codegen_1.nil;\n        }\n        function invalid$DataSchema() {\n            if (def.validateSchema) {\n                const validateSchemaRef = gen.scopeValue(\"validate$data\", { ref: def.validateSchema }); // TODO value.code for standalone\n                return (0, codegen_1._) `!${validateSchemaRef}(${schemaCode})`;\n            }\n            return codegen_1.nil;\n        }\n    }\n    subschema(appl, valid) {\n        const subschema = (0, subschema_1.getSubschema)(this.it, appl);\n        (0, subschema_1.extendSubschemaData)(subschema, this.it, appl);\n        (0, subschema_1.extendSubschemaMode)(subschema, appl);\n        const nextContext = { ...this.it, ...subschema, items: undefined, props: undefined };\n        subschemaCode(nextContext, valid);\n        return nextContext;\n    }\n    mergeEvaluated(schemaCxt, toName) {\n        const { it, gen } = this;\n        if (!it.opts.unevaluated)\n            return;\n        if (it.props !== true && schemaCxt.props !== undefined) {\n            it.props = util_1.mergeEvaluated.props(gen, schemaCxt.props, it.props, toName);\n        }\n        if (it.items !== true && schemaCxt.items !== undefined) {\n            it.items = util_1.mergeEvaluated.items(gen, schemaCxt.items, it.items, toName);\n        }\n    }\n    mergeValidEvaluated(schemaCxt, valid) {\n        const { it, gen } = this;\n        if (it.opts.unevaluated && (it.props !== true || it.items !== true)) {\n            gen.if(valid, () => this.mergeEvaluated(schemaCxt, codegen_1.Name));\n            return true;\n        }\n    }\n}\nexports.KeywordCxt = KeywordCxt;\nfunction keywordCode(it, keyword, def, ruleType) {\n    const cxt = new KeywordCxt(it, def, keyword);\n    if (\"code\" in def) {\n        def.code(cxt, ruleType);\n    }\n    else if (cxt.$data && def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n    else if (\"macro\" in def) {\n        (0, keyword_1.macroKeywordCode)(cxt, def);\n    }\n    else if (def.compile || def.validate) {\n        (0, keyword_1.funcKeywordCode)(cxt, def);\n    }\n}\nconst JSON_POINTER = /^\\/(?:[^~]|~0|~1)*$/;\nconst RELATIVE_JSON_POINTER = /^([0-9]+)(#|\\/(?:[^~]|~0|~1)*)?$/;\nfunction getData($data, { dataLevel, dataNames, dataPathArr }) {\n    let jsonPointer;\n    let data;\n    if ($data === \"\")\n        return names_1.default.rootData;\n    if ($data[0] === \"/\") {\n        if (!JSON_POINTER.test($data))\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        jsonPointer = $data;\n        data = names_1.default.rootData;\n    }\n    else {\n        const matches = RELATIVE_JSON_POINTER.exec($data);\n        if (!matches)\n            throw new Error(`Invalid JSON-pointer: ${$data}`);\n        const up = +matches[1];\n        jsonPointer = matches[2];\n        if (jsonPointer === \"#\") {\n            if (up >= dataLevel)\n                throw new Error(errorMsg(\"property/index\", up));\n            return dataPathArr[dataLevel - up];\n        }\n        if (up > dataLevel)\n            throw new Error(errorMsg(\"data\", up));\n        data = dataNames[dataLevel - up];\n        if (!jsonPointer)\n            return data;\n    }\n    let expr = data;\n    const segments = jsonPointer.split(\"/\");\n    for (const segment of segments) {\n        if (segment) {\n            data = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)((0, util_1.unescapeJsonPointer)(segment))}`;\n            expr = (0, codegen_1._) `${expr} && ${data}`;\n        }\n    }\n    return expr;\n    function errorMsg(pointerType, up) {\n        return `Cannot access ${pointerType} ${up} levels up, current level is ${dataLevel}`;\n    }\n}\nexports.getData = getData;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateKeywordUsage = exports.validSchemaType = exports.funcKeywordCode = exports.macroKeywordCode = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst names_1 = require(\"../names\");\nconst code_1 = require(\"../../vocabularies/code\");\nconst errors_1 = require(\"../errors\");\nfunction macroKeywordCode(cxt, def) {\n    const { gen, keyword, schema, parentSchema, it } = cxt;\n    const macroSchema = def.macro.call(it.self, schema, parentSchema, it);\n    const schemaRef = useKeyword(gen, keyword, macroSchema);\n    if (it.opts.validateSchema !== false)\n        it.self.validateSchema(macroSchema, true);\n    const valid = gen.name(\"valid\");\n    cxt.subschema({\n        schema: macroSchema,\n        schemaPath: codegen_1.nil,\n        errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n        topSchemaRef: schemaRef,\n        compositeRule: true,\n    }, valid);\n    cxt.pass(valid, () => cxt.error(true));\n}\nexports.macroKeywordCode = macroKeywordCode;\nfunction funcKeywordCode(cxt, def) {\n    var _a;\n    const { gen, keyword, schema, parentSchema, $data, it } = cxt;\n    checkAsyncKeyword(it, def);\n    const validate = !$data && def.compile ? def.compile.call(it.self, schema, parentSchema, it) : def.validate;\n    const validateRef = useKeyword(gen, keyword, validate);\n    const valid = gen.let(\"valid\");\n    cxt.block$data(valid, validateKeyword);\n    cxt.ok((_a = def.valid) !== null && _a !== void 0 ? _a : valid);\n    function validateKeyword() {\n        if (def.errors === false) {\n            assignValid();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => cxt.error());\n        }\n        else {\n            const ruleErrs = def.async ? validateAsync() : validateSync();\n            if (def.modifying)\n                modifyData(cxt);\n            reportErrs(() => addErrs(cxt, ruleErrs));\n        }\n    }\n    function validateAsync() {\n        const ruleErrs = gen.let(\"ruleErrs\", null);\n        gen.try(() => assignValid((0, codegen_1._) `await `), (e) => gen.assign(valid, false).if((0, codegen_1._) `${e} instanceof ${it.ValidationError}`, () => gen.assign(ruleErrs, (0, codegen_1._) `${e}.errors`), () => gen.throw(e)));\n        return ruleErrs;\n    }\n    function validateSync() {\n        const validateErrs = (0, codegen_1._) `${validateRef}.errors`;\n        gen.assign(validateErrs, null);\n        assignValid(codegen_1.nil);\n        return validateErrs;\n    }\n    function assignValid(_await = def.async ? (0, codegen_1._) `await ` : codegen_1.nil) {\n        const passCxt = it.opts.passContext ? names_1.default.this : names_1.default.self;\n        const passSchema = !((\"compile\" in def && !$data) || def.schema === false);\n        gen.assign(valid, (0, codegen_1._) `${_await}${(0, code_1.callValidateCode)(cxt, validateRef, passCxt, passSchema)}`, def.modifying);\n    }\n    function reportErrs(errors) {\n        var _a;\n        gen.if((0, codegen_1.not)((_a = def.valid) !== null && _a !== void 0 ? _a : valid), errors);\n    }\n}\nexports.funcKeywordCode = funcKeywordCode;\nfunction modifyData(cxt) {\n    const { gen, data, it } = cxt;\n    gen.if(it.parentData, () => gen.assign(data, (0, codegen_1._) `${it.parentData}[${it.parentDataProperty}]`));\n}\nfunction addErrs(cxt, errs) {\n    const { gen } = cxt;\n    gen.if((0, codegen_1._) `Array.isArray(${errs})`, () => {\n        gen\n            .assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`)\n            .assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n        (0, errors_1.extendErrors)(cxt);\n    }, () => cxt.error());\n}\nfunction checkAsyncKeyword({ schemaEnv }, def) {\n    if (def.async && !schemaEnv.$async)\n        throw new Error(\"async keyword in sync schema\");\n}\nfunction useKeyword(gen, keyword, result) {\n    if (result === undefined)\n        throw new Error(`keyword \"${keyword}\" failed to compile`);\n    return gen.scopeValue(\"keyword\", typeof result == \"function\" ? { ref: result } : { ref: result, code: (0, codegen_1.stringify)(result) });\n}\nfunction validSchemaType(schema, schemaType, allowUndefined = false) {\n    // TODO add tests\n    return (!schemaType.length ||\n        schemaType.some((st) => st === \"array\"\n            ? Array.isArray(schema)\n            : st === \"object\"\n                ? schema && typeof schema == \"object\" && !Array.isArray(schema)\n                : typeof schema == st || (allowUndefined && typeof schema == \"undefined\")));\n}\nexports.validSchemaType = validSchemaType;\nfunction validateKeywordUsage({ schema, opts, self, errSchemaPath }, def, keyword) {\n    /* istanbul ignore if */\n    if (Array.isArray(def.keyword) ? !def.keyword.includes(keyword) : def.keyword !== keyword) {\n        throw new Error(\"ajv implementation error\");\n    }\n    const deps = def.dependencies;\n    if (deps === null || deps === void 0 ? void 0 : deps.some((kwd) => !Object.prototype.hasOwnProperty.call(schema, kwd))) {\n        throw new Error(`parent schema must have dependencies of ${keyword}: ${deps.join(\",\")}`);\n    }\n    if (def.validateSchema) {\n        const valid = def.validateSchema(schema[keyword]);\n        if (!valid) {\n            const msg = `keyword \"${keyword}\" value is invalid at path \"${errSchemaPath}\": ` +\n                self.errorsText(def.validateSchema.errors);\n            if (opts.validateSchema === \"log\")\n                self.logger.error(msg);\n            else\n                throw new Error(msg);\n        }\n    }\n}\nexports.validateKeywordUsage = validateKeywordUsage;\n//# sourceMappingURL=keyword.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.extendSubschemaMode = exports.extendSubschemaData = exports.getSubschema = void 0;\nconst codegen_1 = require(\"../codegen\");\nconst util_1 = require(\"../util\");\nfunction getSubschema(it, { keyword, schemaProp, schema, schemaPath, errSchemaPath, topSchemaRef }) {\n    if (keyword !== undefined && schema !== undefined) {\n        throw new Error('both \"keyword\" and \"schema\" passed, only one allowed');\n    }\n    if (keyword !== undefined) {\n        const sch = it.schema[keyword];\n        return schemaProp === undefined\n            ? {\n                schema: sch,\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}`,\n            }\n            : {\n                schema: sch[schemaProp],\n                schemaPath: (0, codegen_1._) `${it.schemaPath}${(0, codegen_1.getProperty)(keyword)}${(0, codegen_1.getProperty)(schemaProp)}`,\n                errSchemaPath: `${it.errSchemaPath}/${keyword}/${(0, util_1.escapeFragment)(schemaProp)}`,\n            };\n    }\n    if (schema !== undefined) {\n        if (schemaPath === undefined || errSchemaPath === undefined || topSchemaRef === undefined) {\n            throw new Error('\"schemaPath\", \"errSchemaPath\" and \"topSchemaRef\" are required with \"schema\"');\n        }\n        return {\n            schema,\n            schemaPath,\n            topSchemaRef,\n            errSchemaPath,\n        };\n    }\n    throw new Error('either \"keyword\" or \"schema\" must be passed');\n}\nexports.getSubschema = getSubschema;\nfunction extendSubschemaData(subschema, it, { dataProp, dataPropType: dpType, data, dataTypes, propertyName }) {\n    if (data !== undefined && dataProp !== undefined) {\n        throw new Error('both \"data\" and \"dataProp\" passed, only one allowed');\n    }\n    const { gen } = it;\n    if (dataProp !== undefined) {\n        const { errorPath, dataPathArr, opts } = it;\n        const nextData = gen.let(\"data\", (0, codegen_1._) `${it.data}${(0, codegen_1.getProperty)(dataProp)}`, true);\n        dataContextProps(nextData);\n        subschema.errorPath = (0, codegen_1.str) `${errorPath}${(0, util_1.getErrorPath)(dataProp, dpType, opts.jsPropertySyntax)}`;\n        subschema.parentDataProperty = (0, codegen_1._) `${dataProp}`;\n        subschema.dataPathArr = [...dataPathArr, subschema.parentDataProperty];\n    }\n    if (data !== undefined) {\n        const nextData = data instanceof codegen_1.Name ? data : gen.let(\"data\", data, true); // replaceable if used once?\n        dataContextProps(nextData);\n        if (propertyName !== undefined)\n            subschema.propertyName = propertyName;\n        // TODO something is possibly wrong here with not changing parentDataProperty and not appending dataPathArr\n    }\n    if (dataTypes)\n        subschema.dataTypes = dataTypes;\n    function dataContextProps(_nextData) {\n        subschema.data = _nextData;\n        subschema.dataLevel = it.dataLevel + 1;\n        subschema.dataTypes = [];\n        it.definedProperties = new Set();\n        subschema.parentData = it.data;\n        subschema.dataNames = [...it.dataNames, _nextData];\n    }\n}\nexports.extendSubschemaData = extendSubschemaData;\nfunction extendSubschemaMode(subschema, { jtdDiscriminator, jtdMetadata, compositeRule, createErrors, allErrors }) {\n    if (compositeRule !== undefined)\n        subschema.compositeRule = compositeRule;\n    if (createErrors !== undefined)\n        subschema.createErrors = createErrors;\n    if (allErrors !== undefined)\n        subschema.allErrors = allErrors;\n    subschema.jtdDiscriminator = jtdDiscriminator; // not inherited\n    subschema.jtdMetadata = jtdMetadata; // not inherited\n}\nexports.extendSubschemaMode = extendSubschemaMode;\n//# sourceMappingURL=subschema.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeGen = exports.Name = exports.nil = exports.stringify = exports.str = exports._ = exports.KeywordCxt = void 0;\nvar validate_1 = require(\"./compile/validate\");\nObject.defineProperty(exports, \"KeywordCxt\", { enumerable: true, get: function () { return validate_1.KeywordCxt; } });\nvar codegen_1 = require(\"./compile/codegen\");\nObject.defineProperty(exports, \"_\", { enumerable: true, get: function () { return codegen_1._; } });\nObject.defineProperty(exports, \"str\", { enumerable: true, get: function () { return codegen_1.str; } });\nObject.defineProperty(exports, \"stringify\", { enumerable: true, get: function () { return codegen_1.stringify; } });\nObject.defineProperty(exports, \"nil\", { enumerable: true, get: function () { return codegen_1.nil; } });\nObject.defineProperty(exports, \"Name\", { enumerable: true, get: function () { return codegen_1.Name; } });\nObject.defineProperty(exports, \"CodeGen\", { enumerable: true, get: function () { return codegen_1.CodeGen; } });\nconst validation_error_1 = require(\"./runtime/validation_error\");\nconst ref_error_1 = require(\"./compile/ref_error\");\nconst rules_1 = require(\"./compile/rules\");\nconst compile_1 = require(\"./compile\");\nconst codegen_2 = require(\"./compile/codegen\");\nconst resolve_1 = require(\"./compile/resolve\");\nconst dataType_1 = require(\"./compile/validate/dataType\");\nconst util_1 = require(\"./compile/util\");\nconst $dataRefSchema = require(\"./refs/data.json\");\nconst META_IGNORE_OPTIONS = [\"removeAdditional\", \"useDefaults\", \"coerceTypes\"];\nconst EXT_SCOPE_NAMES = new Set([\n    \"validate\",\n    \"serialize\",\n    \"parse\",\n    \"wrapper\",\n    \"root\",\n    \"schema\",\n    \"keyword\",\n    \"pattern\",\n    \"formats\",\n    \"validate$data\",\n    \"func\",\n    \"obj\",\n    \"Error\",\n]);\nconst removedOptions = {\n    errorDataPath: \"\",\n    format: \"`validateFormats: false` can be used instead.\",\n    nullable: '\"nullable\" keyword is supported by default.',\n    jsonPointers: \"Deprecated jsPropertySyntax can be used instead.\",\n    extendRefs: \"Deprecated ignoreKeywordsWithRef can be used instead.\",\n    missingRefs: \"Pass empty schema with $id that should be ignored to ajv.addSchema.\",\n    processCode: \"Use option `code: {process: (code, schemaEnv: object) => string}`\",\n    sourceCode: \"Use option `code: {source: true}`\",\n    strictDefaults: \"It is default now, see option `strict`.\",\n    strictKeywords: \"It is default now, see option `strict`.\",\n    uniqueItems: '\"uniqueItems\" keyword is always validated.',\n    unknownFormats: \"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).\",\n    cache: \"Map is used as cache, schema object as key.\",\n    serialize: \"Map is used as cache, schema object as key.\",\n    ajvErrors: \"It is default now.\",\n};\nconst deprecatedOptions = {\n    ignoreKeywordsWithRef: \"\",\n    jsPropertySyntax: \"\",\n    unicode: '\"minLength\"/\"maxLength\" account for unicode characters by default.',\n};\nconst MAX_EXPRESSION = 200;\n// eslint-disable-next-line complexity\nfunction requiredOptions(o) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x;\n    const s = o.strict;\n    const _optz = (_a = o.code) === null || _a === void 0 ? void 0 : _a.optimize;\n    const optimize = _optz === true || _optz === undefined ? 1 : _optz || 0;\n    return {\n        strictSchema: (_c = (_b = o.strictSchema) !== null && _b !== void 0 ? _b : s) !== null && _c !== void 0 ? _c : true,\n        strictNumbers: (_e = (_d = o.strictNumbers) !== null && _d !== void 0 ? _d : s) !== null && _e !== void 0 ? _e : true,\n        strictTypes: (_g = (_f = o.strictTypes) !== null && _f !== void 0 ? _f : s) !== null && _g !== void 0 ? _g : \"log\",\n        strictTuples: (_j = (_h = o.strictTuples) !== null && _h !== void 0 ? _h : s) !== null && _j !== void 0 ? _j : \"log\",\n        strictRequired: (_l = (_k = o.strictRequired) !== null && _k !== void 0 ? _k : s) !== null && _l !== void 0 ? _l : false,\n        code: o.code ? { ...o.code, optimize } : { optimize },\n        loopRequired: (_m = o.loopRequired) !== null && _m !== void 0 ? _m : MAX_EXPRESSION,\n        loopEnum: (_o = o.loopEnum) !== null && _o !== void 0 ? _o : MAX_EXPRESSION,\n        meta: (_p = o.meta) !== null && _p !== void 0 ? _p : true,\n        messages: (_q = o.messages) !== null && _q !== void 0 ? _q : true,\n        inlineRefs: (_r = o.inlineRefs) !== null && _r !== void 0 ? _r : true,\n        schemaId: (_s = o.schemaId) !== null && _s !== void 0 ? _s : \"$id\",\n        addUsedSchema: (_t = o.addUsedSchema) !== null && _t !== void 0 ? _t : true,\n        validateSchema: (_u = o.validateSchema) !== null && _u !== void 0 ? _u : true,\n        validateFormats: (_v = o.validateFormats) !== null && _v !== void 0 ? _v : true,\n        unicodeRegExp: (_w = o.unicodeRegExp) !== null && _w !== void 0 ? _w : true,\n        int32range: (_x = o.int32range) !== null && _x !== void 0 ? _x : true,\n    };\n}\nclass Ajv {\n    constructor(opts = {}) {\n        this.schemas = {};\n        this.refs = {};\n        this.formats = {};\n        this._compilations = new Set();\n        this._loading = {};\n        this._cache = new Map();\n        opts = this.opts = { ...opts, ...requiredOptions(opts) };\n        const { es5, lines } = this.opts.code;\n        this.scope = new codegen_2.ValueScope({ scope: {}, prefixes: EXT_SCOPE_NAMES, es5, lines });\n        this.logger = getLogger(opts.logger);\n        const formatOpt = opts.validateFormats;\n        opts.validateFormats = false;\n        this.RULES = (0, rules_1.getRules)();\n        checkOptions.call(this, removedOptions, opts, \"NOT SUPPORTED\");\n        checkOptions.call(this, deprecatedOptions, opts, \"DEPRECATED\", \"warn\");\n        this._metaOpts = getMetaSchemaOptions.call(this);\n        if (opts.formats)\n            addInitialFormats.call(this);\n        this._addVocabularies();\n        this._addDefaultMetaSchema();\n        if (opts.keywords)\n            addInitialKeywords.call(this, opts.keywords);\n        if (typeof opts.meta == \"object\")\n            this.addMetaSchema(opts.meta);\n        addInitialSchemas.call(this);\n        opts.validateFormats = formatOpt;\n    }\n    _addVocabularies() {\n        this.addKeyword(\"$async\");\n    }\n    _addDefaultMetaSchema() {\n        const { $data, meta, schemaId } = this.opts;\n        let _dataRefSchema = $dataRefSchema;\n        if (schemaId === \"id\") {\n            _dataRefSchema = { ...$dataRefSchema };\n            _dataRefSchema.id = _dataRefSchema.$id;\n            delete _dataRefSchema.$id;\n        }\n        if (meta && $data)\n            this.addMetaSchema(_dataRefSchema, _dataRefSchema[schemaId], false);\n    }\n    defaultMeta() {\n        const { meta, schemaId } = this.opts;\n        return (this.opts.defaultMeta = typeof meta == \"object\" ? meta[schemaId] || meta : undefined);\n    }\n    validate(schemaKeyRef, // key, ref or schema object\n    data // to be validated\n    ) {\n        let v;\n        if (typeof schemaKeyRef == \"string\") {\n            v = this.getSchema(schemaKeyRef);\n            if (!v)\n                throw new Error(`no schema with key or ref \"${schemaKeyRef}\"`);\n        }\n        else {\n            v = this.compile(schemaKeyRef);\n        }\n        const valid = v(data);\n        if (!(\"$async\" in v))\n            this.errors = v.errors;\n        return valid;\n    }\n    compile(schema, _meta) {\n        const sch = this._addSchema(schema, _meta);\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    compileAsync(schema, meta) {\n        if (typeof this.opts.loadSchema != \"function\") {\n            throw new Error(\"options.loadSchema should be a function\");\n        }\n        const { loadSchema } = this.opts;\n        return runCompileAsync.call(this, schema, meta);\n        async function runCompileAsync(_schema, _meta) {\n            await loadMetaSchema.call(this, _schema.$schema);\n            const sch = this._addSchema(_schema, _meta);\n            return sch.validate || _compileAsync.call(this, sch);\n        }\n        async function loadMetaSchema($ref) {\n            if ($ref && !this.getSchema($ref)) {\n                await runCompileAsync.call(this, { $ref }, true);\n            }\n        }\n        async function _compileAsync(sch) {\n            try {\n                return this._compileSchemaEnv(sch);\n            }\n            catch (e) {\n                if (!(e instanceof ref_error_1.default))\n                    throw e;\n                checkLoaded.call(this, e);\n                await loadMissingSchema.call(this, e.missingSchema);\n                return _compileAsync.call(this, sch);\n            }\n        }\n        function checkLoaded({ missingSchema: ref, missingRef }) {\n            if (this.refs[ref]) {\n                throw new Error(`AnySchema ${ref} is loaded but ${missingRef} cannot be resolved`);\n            }\n        }\n        async function loadMissingSchema(ref) {\n            const _schema = await _loadSchema.call(this, ref);\n            if (!this.refs[ref])\n                await loadMetaSchema.call(this, _schema.$schema);\n            if (!this.refs[ref])\n                this.addSchema(_schema, ref, meta);\n        }\n        async function _loadSchema(ref) {\n            const p = this._loading[ref];\n            if (p)\n                return p;\n            try {\n                return await (this._loading[ref] = loadSchema(ref));\n            }\n            finally {\n                delete this._loading[ref];\n            }\n        }\n    }\n    // Adds schema to the instance\n    addSchema(schema, // If array is passed, `key` will be ignored\n    key, // Optional schema key. Can be passed to `validate` method instead of schema object or id/ref. One schema per instance can have empty `id` and `key`.\n    _meta, // true if schema is a meta-schema. Used internally, addMetaSchema should be used instead.\n    _validateSchema = this.opts.validateSchema // false to skip schema validation. Used internally, option validateSchema should be used instead.\n    ) {\n        if (Array.isArray(schema)) {\n            for (const sch of schema)\n                this.addSchema(sch, undefined, _meta, _validateSchema);\n            return this;\n        }\n        let id;\n        if (typeof schema === \"object\") {\n            const { schemaId } = this.opts;\n            id = schema[schemaId];\n            if (id !== undefined && typeof id != \"string\") {\n                throw new Error(`schema ${schemaId} must be string`);\n            }\n        }\n        key = (0, resolve_1.normalizeId)(key || id);\n        this._checkUnique(key);\n        this.schemas[key] = this._addSchema(schema, _meta, key, _validateSchema, true);\n        return this;\n    }\n    // Add schema that will be used to validate other schemas\n    // options in META_IGNORE_OPTIONS are alway set to false\n    addMetaSchema(schema, key, // schema key\n    _validateSchema = this.opts.validateSchema // false to skip schema validation, can be used to override validateSchema option for meta-schema\n    ) {\n        this.addSchema(schema, key, true, _validateSchema);\n        return this;\n    }\n    //  Validate schema against its meta-schema\n    validateSchema(schema, throwOrLogError) {\n        if (typeof schema == \"boolean\")\n            return true;\n        let $schema;\n        $schema = schema.$schema;\n        if ($schema !== undefined && typeof $schema != \"string\") {\n            throw new Error(\"$schema must be a string\");\n        }\n        $schema = $schema || this.opts.defaultMeta || this.defaultMeta();\n        if (!$schema) {\n            this.logger.warn(\"meta-schema not available\");\n            this.errors = null;\n            return true;\n        }\n        const valid = this.validate($schema, schema);\n        if (!valid && throwOrLogError) {\n            const message = \"schema is invalid: \" + this.errorsText();\n            if (this.opts.validateSchema === \"log\")\n                this.logger.error(message);\n            else\n                throw new Error(message);\n        }\n        return valid;\n    }\n    // Get compiled schema by `key` or `ref`.\n    // (`key` that was passed to `addSchema` or full schema reference - `schema.$id` or resolved id)\n    getSchema(keyRef) {\n        let sch;\n        while (typeof (sch = getSchEnv.call(this, keyRef)) == \"string\")\n            keyRef = sch;\n        if (sch === undefined) {\n            const { schemaId } = this.opts;\n            const root = new compile_1.SchemaEnv({ schema: {}, schemaId });\n            sch = compile_1.resolveSchema.call(this, root, keyRef);\n            if (!sch)\n                return;\n            this.refs[keyRef] = sch;\n        }\n        return (sch.validate || this._compileSchemaEnv(sch));\n    }\n    // Remove cached schema(s).\n    // If no parameter is passed all schemas but meta-schemas are removed.\n    // If RegExp is passed all schemas with key/id matching pattern but meta-schemas are removed.\n    // Even if schema is referenced by other schemas it still can be removed as other schemas have local references.\n    removeSchema(schemaKeyRef) {\n        if (schemaKeyRef instanceof RegExp) {\n            this._removeAllSchemas(this.schemas, schemaKeyRef);\n            this._removeAllSchemas(this.refs, schemaKeyRef);\n            return this;\n        }\n        switch (typeof schemaKeyRef) {\n            case \"undefined\":\n                this._removeAllSchemas(this.schemas);\n                this._removeAllSchemas(this.refs);\n                this._cache.clear();\n                return this;\n            case \"string\": {\n                const sch = getSchEnv.call(this, schemaKeyRef);\n                if (typeof sch == \"object\")\n                    this._cache.delete(sch.schema);\n                delete this.schemas[schemaKeyRef];\n                delete this.refs[schemaKeyRef];\n                return this;\n            }\n            case \"object\": {\n                const cacheKey = schemaKeyRef;\n                this._cache.delete(cacheKey);\n                let id = schemaKeyRef[this.opts.schemaId];\n                if (id) {\n                    id = (0, resolve_1.normalizeId)(id);\n                    delete this.schemas[id];\n                    delete this.refs[id];\n                }\n                return this;\n            }\n            default:\n                throw new Error(\"ajv.removeSchema: invalid parameter\");\n        }\n    }\n    // add \"vocabulary\" - a collection of keywords\n    addVocabulary(definitions) {\n        for (const def of definitions)\n            this.addKeyword(def);\n        return this;\n    }\n    addKeyword(kwdOrDef, def // deprecated\n    ) {\n        let keyword;\n        if (typeof kwdOrDef == \"string\") {\n            keyword = kwdOrDef;\n            if (typeof def == \"object\") {\n                this.logger.warn(\"these parameters are deprecated, see docs for addKeyword\");\n                def.keyword = keyword;\n            }\n        }\n        else if (typeof kwdOrDef == \"object\" && def === undefined) {\n            def = kwdOrDef;\n            keyword = def.keyword;\n            if (Array.isArray(keyword) && !keyword.length) {\n                throw new Error(\"addKeywords: keyword must be string or non-empty array\");\n            }\n        }\n        else {\n            throw new Error(\"invalid addKeywords parameters\");\n        }\n        checkKeyword.call(this, keyword, def);\n        if (!def) {\n            (0, util_1.eachItem)(keyword, (kwd) => addRule.call(this, kwd));\n            return this;\n        }\n        keywordMetaschema.call(this, def);\n        const definition = {\n            ...def,\n            type: (0, dataType_1.getJSONTypes)(def.type),\n            schemaType: (0, dataType_1.getJSONTypes)(def.schemaType),\n        };\n        (0, util_1.eachItem)(keyword, definition.type.length === 0\n            ? (k) => addRule.call(this, k, definition)\n            : (k) => definition.type.forEach((t) => addRule.call(this, k, definition, t)));\n        return this;\n    }\n    getKeyword(keyword) {\n        const rule = this.RULES.all[keyword];\n        return typeof rule == \"object\" ? rule.definition : !!rule;\n    }\n    // Remove keyword\n    removeKeyword(keyword) {\n        // TODO return type should be Ajv\n        const { RULES } = this;\n        delete RULES.keywords[keyword];\n        delete RULES.all[keyword];\n        for (const group of RULES.rules) {\n            const i = group.rules.findIndex((rule) => rule.keyword === keyword);\n            if (i >= 0)\n                group.rules.splice(i, 1);\n        }\n        return this;\n    }\n    // Add format\n    addFormat(name, format) {\n        if (typeof format == \"string\")\n            format = new RegExp(format);\n        this.formats[name] = format;\n        return this;\n    }\n    errorsText(errors = this.errors, // optional array of validation errors\n    { separator = \", \", dataVar = \"data\" } = {} // optional options with properties `separator` and `dataVar`\n    ) {\n        if (!errors || errors.length === 0)\n            return \"No errors\";\n        return errors\n            .map((e) => `${dataVar}${e.instancePath} ${e.message}`)\n            .reduce((text, msg) => text + separator + msg);\n    }\n    $dataMetaSchema(metaSchema, keywordsJsonPointers) {\n        const rules = this.RULES.all;\n        metaSchema = JSON.parse(JSON.stringify(metaSchema));\n        for (const jsonPointer of keywordsJsonPointers) {\n            const segments = jsonPointer.split(\"/\").slice(1); // first segment is an empty string\n            let keywords = metaSchema;\n            for (const seg of segments)\n                keywords = keywords[seg];\n            for (const key in rules) {\n                const rule = rules[key];\n                if (typeof rule != \"object\")\n                    continue;\n                const { $data } = rule.definition;\n                const schema = keywords[key];\n                if ($data && schema)\n                    keywords[key] = schemaOrData(schema);\n            }\n        }\n        return metaSchema;\n    }\n    _removeAllSchemas(schemas, regex) {\n        for (const keyRef in schemas) {\n            const sch = schemas[keyRef];\n            if (!regex || regex.test(keyRef)) {\n                if (typeof sch == \"string\") {\n                    delete schemas[keyRef];\n                }\n                else if (sch && !sch.meta) {\n                    this._cache.delete(sch.schema);\n                    delete schemas[keyRef];\n                }\n            }\n        }\n    }\n    _addSchema(schema, meta, baseId, validateSchema = this.opts.validateSchema, addSchema = this.opts.addUsedSchema) {\n        let id;\n        const { schemaId } = this.opts;\n        if (typeof schema == \"object\") {\n            id = schema[schemaId];\n        }\n        else {\n            if (this.opts.jtd)\n                throw new Error(\"schema must be object\");\n            else if (typeof schema != \"boolean\")\n                throw new Error(\"schema must be object or boolean\");\n        }\n        let sch = this._cache.get(schema);\n        if (sch !== undefined)\n            return sch;\n        baseId = (0, resolve_1.normalizeId)(id || baseId);\n        const localRefs = resolve_1.getSchemaRefs.call(this, schema, baseId);\n        sch = new compile_1.SchemaEnv({ schema, schemaId, meta, baseId, localRefs });\n        this._cache.set(sch.schema, sch);\n        if (addSchema && !baseId.startsWith(\"#\")) {\n            // TODO atm it is allowed to overwrite schemas without id (instead of not adding them)\n            if (baseId)\n                this._checkUnique(baseId);\n            this.refs[baseId] = sch;\n        }\n        if (validateSchema)\n            this.validateSchema(schema, true);\n        return sch;\n    }\n    _checkUnique(id) {\n        if (this.schemas[id] || this.refs[id]) {\n            throw new Error(`schema with key or id \"${id}\" already exists`);\n        }\n    }\n    _compileSchemaEnv(sch) {\n        if (sch.meta)\n            this._compileMetaSchema(sch);\n        else\n            compile_1.compileSchema.call(this, sch);\n        /* istanbul ignore if */\n        if (!sch.validate)\n            throw new Error(\"ajv implementation error\");\n        return sch.validate;\n    }\n    _compileMetaSchema(sch) {\n        const currentOpts = this.opts;\n        this.opts = this._metaOpts;\n        try {\n            compile_1.compileSchema.call(this, sch);\n        }\n        finally {\n            this.opts = currentOpts;\n        }\n    }\n}\nexports.default = Ajv;\nAjv.ValidationError = validation_error_1.default;\nAjv.MissingRefError = ref_error_1.default;\nfunction checkOptions(checkOpts, options, msg, log = \"error\") {\n    for (const key in checkOpts) {\n        const opt = key;\n        if (opt in options)\n            this.logger[log](`${msg}: option ${key}. ${checkOpts[opt]}`);\n    }\n}\nfunction getSchEnv(keyRef) {\n    keyRef = (0, resolve_1.normalizeId)(keyRef); // TODO tests fail without this line\n    return this.schemas[keyRef] || this.refs[keyRef];\n}\nfunction addInitialSchemas() {\n    const optsSchemas = this.opts.schemas;\n    if (!optsSchemas)\n        return;\n    if (Array.isArray(optsSchemas))\n        this.addSchema(optsSchemas);\n    else\n        for (const key in optsSchemas)\n            this.addSchema(optsSchemas[key], key);\n}\nfunction addInitialFormats() {\n    for (const name in this.opts.formats) {\n        const format = this.opts.formats[name];\n        if (format)\n            this.addFormat(name, format);\n    }\n}\nfunction addInitialKeywords(defs) {\n    if (Array.isArray(defs)) {\n        this.addVocabulary(defs);\n        return;\n    }\n    this.logger.warn(\"keywords option as map is deprecated, pass array\");\n    for (const keyword in defs) {\n        const def = defs[keyword];\n        if (!def.keyword)\n            def.keyword = keyword;\n        this.addKeyword(def);\n    }\n}\nfunction getMetaSchemaOptions() {\n    const metaOpts = { ...this.opts };\n    for (const opt of META_IGNORE_OPTIONS)\n        delete metaOpts[opt];\n    return metaOpts;\n}\nconst noLogs = { log() { }, warn() { }, error() { } };\nfunction getLogger(logger) {\n    if (logger === false)\n        return noLogs;\n    if (logger === undefined)\n        return console;\n    if (logger.log && logger.warn && logger.error)\n        return logger;\n    throw new Error(\"logger must implement log, warn and error methods\");\n}\nconst KEYWORD_NAME = /^[a-z_$][a-z0-9_$:-]*$/i;\nfunction checkKeyword(keyword, def) {\n    const { RULES } = this;\n    (0, util_1.eachItem)(keyword, (kwd) => {\n        if (RULES.keywords[kwd])\n            throw new Error(`Keyword ${kwd} is already defined`);\n        if (!KEYWORD_NAME.test(kwd))\n            throw new Error(`Keyword ${kwd} has invalid name`);\n    });\n    if (!def)\n        return;\n    if (def.$data && !(\"code\" in def || \"validate\" in def)) {\n        throw new Error('$data keyword must have \"code\" or \"validate\" function');\n    }\n}\nfunction addRule(keyword, definition, dataType) {\n    var _a;\n    const post = definition === null || definition === void 0 ? void 0 : definition.post;\n    if (dataType && post)\n        throw new Error('keyword with \"post\" flag cannot have \"type\"');\n    const { RULES } = this;\n    let ruleGroup = post ? RULES.post : RULES.rules.find(({ type: t }) => t === dataType);\n    if (!ruleGroup) {\n        ruleGroup = { type: dataType, rules: [] };\n        RULES.rules.push(ruleGroup);\n    }\n    RULES.keywords[keyword] = true;\n    if (!definition)\n        return;\n    const rule = {\n        keyword,\n        definition: {\n            ...definition,\n            type: (0, dataType_1.getJSONTypes)(definition.type),\n            schemaType: (0, dataType_1.getJSONTypes)(definition.schemaType),\n        },\n    };\n    if (definition.before)\n        addBeforeRule.call(this, ruleGroup, rule, definition.before);\n    else\n        ruleGroup.rules.push(rule);\n    RULES.all[keyword] = rule;\n    (_a = definition.implements) === null || _a === void 0 ? void 0 : _a.forEach((kwd) => this.addKeyword(kwd));\n}\nfunction addBeforeRule(ruleGroup, rule, before) {\n    const i = ruleGroup.rules.findIndex((_rule) => _rule.keyword === before);\n    if (i >= 0) {\n        ruleGroup.rules.splice(i, 0, rule);\n    }\n    else {\n        ruleGroup.rules.push(rule);\n        this.logger.warn(`rule ${before} is not defined`);\n    }\n}\nfunction keywordMetaschema(def) {\n    let { metaSchema } = def;\n    if (metaSchema === undefined)\n        return;\n    if (def.$data && this.opts.$data)\n        metaSchema = schemaOrData(metaSchema);\n    def.validateSchema = this.compile(metaSchema, true);\n}\nconst $dataRef = {\n    $ref: \"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#\",\n};\nfunction schemaOrData(schema) {\n    return { anyOf: [schema, $dataRef] };\n}\n//# sourceMappingURL=core.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://github.com/ajv-validator/ajv/issues/889\nconst equal = require(\"fast-deep-equal\");\nequal.code = 'require(\"ajv/dist/runtime/equal\").default';\nexports.default = equal;\n//# sourceMappingURL=equal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// https://mathiasbynens.be/notes/javascript-encoding\n// https://github.com/bestiejs/punycode.js - punycode.ucs2.decode\nfunction ucs2length(str) {\n    const len = str.length;\n    let length = 0;\n    let pos = 0;\n    let value;\n    while (pos < len) {\n        length++;\n        value = str.charCodeAt(pos++);\n        if (value >= 0xd800 && value <= 0xdbff && pos < len) {\n            // high surrogate, and there is a next character\n            value = str.charCodeAt(pos);\n            if ((value & 0xfc00) === 0xdc00)\n                pos++; // low surrogate\n        }\n    }\n    return length;\n}\nexports.default = ucs2length;\nucs2length.code = 'require(\"ajv/dist/runtime/ucs2length\").default';\n//# sourceMappingURL=ucs2length.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ValidationError extends Error {\n    constructor(errors) {\n        super(\"validation failed\");\n        this.errors = errors;\n        this.ajv = this.validation = true;\n    }\n}\nexports.default = ValidationError;\n//# sourceMappingURL=validation_error.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateAdditionalItems = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"additionalItems\",\n    type: \"array\",\n    schemaType: [\"boolean\", \"object\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { parentSchema, it } = cxt;\n        const { items } = parentSchema;\n        if (!Array.isArray(items)) {\n            (0, util_1.checkStrictMode)(it, '\"additionalItems\" is ignored when \"items\" is not an array of schemas');\n            return;\n        }\n        validateAdditionalItems(cxt, items);\n    },\n};\nfunction validateAdditionalItems(cxt, items) {\n    const { gen, schema, data, keyword, it } = cxt;\n    it.items = true;\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    if (schema === false) {\n        cxt.setParams({ len: items.length });\n        cxt.pass((0, codegen_1._) `${len} <= ${items.length}`);\n    }\n    else if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n        const valid = gen.var(\"valid\", (0, codegen_1._) `${len} <= ${items.length}`); // TODO var\n        gen.if((0, codegen_1.not)(valid), () => validateItems(valid));\n        cxt.ok(valid);\n    }\n    function validateItems(valid) {\n        gen.forRange(\"i\", items.length, len, (i) => {\n            cxt.subschema({ keyword, dataProp: i, dataPropType: util_1.Type.Num }, valid);\n            if (!it.allErrors)\n                gen.if((0, codegen_1.not)(valid), () => gen.break());\n        });\n    }\n}\nexports.validateAdditionalItems = validateAdditionalItems;\nexports.default = def;\n//# sourceMappingURL=additionalItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must NOT have additional properties\",\n    params: ({ params }) => (0, codegen_1._) `{additionalProperty: ${params.additionalProperty}}`,\n};\nconst def = {\n    keyword: \"additionalProperties\",\n    type: [\"object\"],\n    schemaType: [\"boolean\", \"object\"],\n    allowUndefined: true,\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, errsCount, it } = cxt;\n        /* istanbul ignore if */\n        if (!errsCount)\n            throw new Error(\"ajv implementation error\");\n        const { allErrors, opts } = it;\n        it.props = true;\n        if (opts.removeAdditional !== \"all\" && (0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const props = (0, code_1.allSchemaProperties)(parentSchema.properties);\n        const patProps = (0, code_1.allSchemaProperties)(parentSchema.patternProperties);\n        checkAdditionalProperties();\n        cxt.ok((0, codegen_1._) `${errsCount} === ${names_1.default.errors}`);\n        function checkAdditionalProperties() {\n            gen.forIn(\"key\", data, (key) => {\n                if (!props.length && !patProps.length)\n                    additionalPropertyCode(key);\n                else\n                    gen.if(isAdditional(key), () => additionalPropertyCode(key));\n            });\n        }\n        function isAdditional(key) {\n            let definedProp;\n            if (props.length > 8) {\n                // TODO maybe an option instead of hard-coded 8?\n                const propsSchema = (0, util_1.schemaRefOrVal)(it, parentSchema.properties, \"properties\");\n                definedProp = (0, code_1.isOwnProperty)(gen, propsSchema, key);\n            }\n            else if (props.length) {\n                definedProp = (0, codegen_1.or)(...props.map((p) => (0, codegen_1._) `${key} === ${p}`));\n            }\n            else {\n                definedProp = codegen_1.nil;\n            }\n            if (patProps.length) {\n                definedProp = (0, codegen_1.or)(definedProp, ...patProps.map((p) => (0, codegen_1._) `${(0, code_1.usePattern)(cxt, p)}.test(${key})`));\n            }\n            return (0, codegen_1.not)(definedProp);\n        }\n        function deleteAdditional(key) {\n            gen.code((0, codegen_1._) `delete ${data}[${key}]`);\n        }\n        function additionalPropertyCode(key) {\n            if (opts.removeAdditional === \"all\" || (opts.removeAdditional && schema === false)) {\n                deleteAdditional(key);\n                return;\n            }\n            if (schema === false) {\n                cxt.setParams({ additionalProperty: key });\n                cxt.error();\n                if (!allErrors)\n                    gen.break();\n                return;\n            }\n            if (typeof schema == \"object\" && !(0, util_1.alwaysValidSchema)(it, schema)) {\n                const valid = gen.name(\"valid\");\n                if (opts.removeAdditional === \"failing\") {\n                    applyAdditionalSchema(key, valid, false);\n                    gen.if((0, codegen_1.not)(valid), () => {\n                        cxt.reset();\n                        deleteAdditional(key);\n                    });\n                }\n                else {\n                    applyAdditionalSchema(key, valid);\n                    if (!allErrors)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                }\n            }\n        }\n        function applyAdditionalSchema(key, valid, errors) {\n            const subschema = {\n                keyword: \"additionalProperties\",\n                dataProp: key,\n                dataPropType: util_1.Type.Str,\n            };\n            if (errors === false) {\n                Object.assign(subschema, {\n                    compositeRule: true,\n                    createErrors: false,\n                    allErrors: false,\n                });\n            }\n            cxt.subschema(subschema, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=additionalProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"allOf\",\n    schemaType: \"array\",\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        const valid = gen.name(\"valid\");\n        schema.forEach((sch, i) => {\n            if ((0, util_1.alwaysValidSchema)(it, sch))\n                return;\n            const schCxt = cxt.subschema({ keyword: \"allOf\", schemaProp: i }, valid);\n            cxt.ok(valid);\n            cxt.mergeEvaluated(schCxt);\n        });\n    },\n};\nexports.default = def;\n//# sourceMappingURL=allOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"anyOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    code: code_1.validateUnion,\n    error: { message: \"must match a schema in anyOf\" },\n};\nexports.default = def;\n//# sourceMappingURL=anyOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { min, max } }) => max === undefined\n        ? (0, codegen_1.str) `must contain at least ${min} valid item(s)`\n        : (0, codegen_1.str) `must contain at least ${min} and no more than ${max} valid item(s)`,\n    params: ({ params: { min, max } }) => max === undefined ? (0, codegen_1._) `{minContains: ${min}}` : (0, codegen_1._) `{minContains: ${min}, maxContains: ${max}}`,\n};\nconst def = {\n    keyword: \"contains\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        let min;\n        let max;\n        const { minContains, maxContains } = parentSchema;\n        if (it.opts.next) {\n            min = minContains === undefined ? 1 : minContains;\n            max = maxContains;\n        }\n        else {\n            min = 1;\n        }\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        cxt.setParams({ min, max });\n        if (max === undefined && min === 0) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" == 0 without \"maxContains\": \"contains\" keyword ignored`);\n            return;\n        }\n        if (max !== undefined && min > max) {\n            (0, util_1.checkStrictMode)(it, `\"minContains\" > \"maxContains\" is always invalid`);\n            cxt.fail();\n            return;\n        }\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            let cond = (0, codegen_1._) `${len} >= ${min}`;\n            if (max !== undefined)\n                cond = (0, codegen_1._) `${cond} && ${len} <= ${max}`;\n            cxt.pass(cond);\n            return;\n        }\n        it.items = true;\n        const valid = gen.name(\"valid\");\n        if (max === undefined && min === 1) {\n            validateItems(valid, () => gen.if(valid, () => gen.break()));\n        }\n        else {\n            gen.let(valid, false);\n            const schValid = gen.name(\"_valid\");\n            const count = gen.let(\"count\", 0);\n            validateItems(schValid, () => gen.if(schValid, () => checkLimits(count)));\n        }\n        cxt.result(valid, () => cxt.reset());\n        function validateItems(_valid, block) {\n            gen.forRange(\"i\", 0, len, (i) => {\n                cxt.subschema({\n                    keyword: \"contains\",\n                    dataProp: i,\n                    dataPropType: util_1.Type.Num,\n                    compositeRule: true,\n                }, _valid);\n                block();\n            });\n        }\n        function checkLimits(count) {\n            gen.code((0, codegen_1._) `${count}++`);\n            if (max === undefined) {\n                gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true).break());\n            }\n            else {\n                gen.if((0, codegen_1._) `${count} > ${max}`, () => gen.assign(valid, false).break());\n                if (min === 1)\n                    gen.assign(valid, true);\n                else\n                    gen.if((0, codegen_1._) `${count} >= ${min}`, () => gen.assign(valid, true));\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=contains.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateSchemaDeps = exports.validatePropertyDeps = exports.error = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nexports.error = {\n    message: ({ params: { property, depsCount, deps } }) => {\n        const property_ies = depsCount === 1 ? \"property\" : \"properties\";\n        return (0, codegen_1.str) `must have ${property_ies} ${deps} when property ${property} is present`;\n    },\n    params: ({ params: { property, depsCount, deps, missingProperty } }) => (0, codegen_1._) `{property: ${property},\n    missingProperty: ${missingProperty},\n    depsCount: ${depsCount},\n    deps: ${deps}}`, // TODO change to reference\n};\nconst def = {\n    keyword: \"dependencies\",\n    type: \"object\",\n    schemaType: \"object\",\n    error: exports.error,\n    code(cxt) {\n        const [propDeps, schDeps] = splitDependencies(cxt);\n        validatePropertyDeps(cxt, propDeps);\n        validateSchemaDeps(cxt, schDeps);\n    },\n};\nfunction splitDependencies({ schema }) {\n    const propertyDeps = {};\n    const schemaDeps = {};\n    for (const key in schema) {\n        if (key === \"__proto__\")\n            continue;\n        const deps = Array.isArray(schema[key]) ? propertyDeps : schemaDeps;\n        deps[key] = schema[key];\n    }\n    return [propertyDeps, schemaDeps];\n}\nfunction validatePropertyDeps(cxt, propertyDeps = cxt.schema) {\n    const { gen, data, it } = cxt;\n    if (Object.keys(propertyDeps).length === 0)\n        return;\n    const missing = gen.let(\"missing\");\n    for (const prop in propertyDeps) {\n        const deps = propertyDeps[prop];\n        if (deps.length === 0)\n            continue;\n        const hasProperty = (0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties);\n        cxt.setParams({\n            property: prop,\n            depsCount: deps.length,\n            deps: deps.join(\", \"),\n        });\n        if (it.allErrors) {\n            gen.if(hasProperty, () => {\n                for (const depProp of deps) {\n                    (0, code_1.checkReportMissingProp)(cxt, depProp);\n                }\n            });\n        }\n        else {\n            gen.if((0, codegen_1._) `${hasProperty} && (${(0, code_1.checkMissingProp)(cxt, deps, missing)})`);\n            (0, code_1.reportMissingProp)(cxt, missing);\n            gen.else();\n        }\n    }\n}\nexports.validatePropertyDeps = validatePropertyDeps;\nfunction validateSchemaDeps(cxt, schemaDeps = cxt.schema) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    for (const prop in schemaDeps) {\n        if ((0, util_1.alwaysValidSchema)(it, schemaDeps[prop]))\n            continue;\n        gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties), () => {\n            const schCxt = cxt.subschema({ keyword, schemaProp: prop }, valid);\n            cxt.mergeValidEvaluated(schCxt, valid);\n        }, () => gen.var(valid, true) // TODO var\n        );\n        cxt.ok(valid);\n    }\n}\nexports.validateSchemaDeps = validateSchemaDeps;\nexports.default = def;\n//# sourceMappingURL=dependencies.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params }) => (0, codegen_1.str) `must match \"${params.ifClause}\" schema`,\n    params: ({ params }) => (0, codegen_1._) `{failingKeyword: ${params.ifClause}}`,\n};\nconst def = {\n    keyword: \"if\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, parentSchema, it } = cxt;\n        if (parentSchema.then === undefined && parentSchema.else === undefined) {\n            (0, util_1.checkStrictMode)(it, '\"if\" without \"then\" and \"else\" is ignored');\n        }\n        const hasThen = hasSchema(it, \"then\");\n        const hasElse = hasSchema(it, \"else\");\n        if (!hasThen && !hasElse)\n            return;\n        const valid = gen.let(\"valid\", true);\n        const schValid = gen.name(\"_valid\");\n        validateIf();\n        cxt.reset();\n        if (hasThen && hasElse) {\n            const ifClause = gen.let(\"ifClause\");\n            cxt.setParams({ ifClause });\n            gen.if(schValid, validateClause(\"then\", ifClause), validateClause(\"else\", ifClause));\n        }\n        else if (hasThen) {\n            gen.if(schValid, validateClause(\"then\"));\n        }\n        else {\n            gen.if((0, codegen_1.not)(schValid), validateClause(\"else\"));\n        }\n        cxt.pass(valid, () => cxt.error(true));\n        function validateIf() {\n            const schCxt = cxt.subschema({\n                keyword: \"if\",\n                compositeRule: true,\n                createErrors: false,\n                allErrors: false,\n            }, schValid);\n            cxt.mergeEvaluated(schCxt);\n        }\n        function validateClause(keyword, ifClause) {\n            return () => {\n                const schCxt = cxt.subschema({ keyword }, schValid);\n                gen.assign(valid, schValid);\n                cxt.mergeValidEvaluated(schCxt, valid);\n                if (ifClause)\n                    gen.assign(ifClause, (0, codegen_1._) `${keyword}`);\n                else\n                    cxt.setParams({ ifClause: keyword });\n            };\n        }\n    },\n};\nfunction hasSchema(it, keyword) {\n    const schema = it.schema[keyword];\n    return schema !== undefined && !(0, util_1.alwaysValidSchema)(it, schema);\n}\nexports.default = def;\n//# sourceMappingURL=if.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst additionalItems_1 = require(\"./additionalItems\");\nconst prefixItems_1 = require(\"./prefixItems\");\nconst items_1 = require(\"./items\");\nconst items2020_1 = require(\"./items2020\");\nconst contains_1 = require(\"./contains\");\nconst dependencies_1 = require(\"./dependencies\");\nconst propertyNames_1 = require(\"./propertyNames\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst properties_1 = require(\"./properties\");\nconst patternProperties_1 = require(\"./patternProperties\");\nconst not_1 = require(\"./not\");\nconst anyOf_1 = require(\"./anyOf\");\nconst oneOf_1 = require(\"./oneOf\");\nconst allOf_1 = require(\"./allOf\");\nconst if_1 = require(\"./if\");\nconst thenElse_1 = require(\"./thenElse\");\nfunction getApplicator(draft2020 = false) {\n    const applicator = [\n        // any\n        not_1.default,\n        anyOf_1.default,\n        oneOf_1.default,\n        allOf_1.default,\n        if_1.default,\n        thenElse_1.default,\n        // object\n        propertyNames_1.default,\n        additionalProperties_1.default,\n        dependencies_1.default,\n        properties_1.default,\n        patternProperties_1.default,\n    ];\n    // array\n    if (draft2020)\n        applicator.push(prefixItems_1.default, items2020_1.default);\n    else\n        applicator.push(additionalItems_1.default, items_1.default);\n    applicator.push(contains_1.default);\n    return applicator;\n}\nexports.default = getApplicator;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateTuple = void 0;\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"array\", \"boolean\"],\n    before: \"uniqueItems\",\n    code(cxt) {\n        const { schema, it } = cxt;\n        if (Array.isArray(schema))\n            return validateTuple(cxt, \"additionalItems\", schema);\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nfunction validateTuple(cxt, extraItems, schArr = cxt.schema) {\n    const { gen, parentSchema, data, keyword, it } = cxt;\n    checkStrictTuple(parentSchema);\n    if (it.opts.unevaluated && schArr.length && it.items !== true) {\n        it.items = util_1.mergeEvaluated.items(gen, schArr.length, it.items);\n    }\n    const valid = gen.name(\"valid\");\n    const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n    schArr.forEach((sch, i) => {\n        if ((0, util_1.alwaysValidSchema)(it, sch))\n            return;\n        gen.if((0, codegen_1._) `${len} > ${i}`, () => cxt.subschema({\n            keyword,\n            schemaProp: i,\n            dataProp: i,\n        }, valid));\n        cxt.ok(valid);\n    });\n    function checkStrictTuple(sch) {\n        const { opts, errSchemaPath } = it;\n        const l = schArr.length;\n        const fullTuple = l === sch.minItems && (l === sch.maxItems || sch[extraItems] === false);\n        if (opts.strictTuples && !fullTuple) {\n            const msg = `\"${keyword}\" is ${l}-tuple, but minItems or maxItems/${extraItems} are not specified or different at path \"${errSchemaPath}\"`;\n            (0, util_1.checkStrictMode)(it, msg, opts.strictTuples);\n        }\n    }\n}\nexports.validateTuple = validateTuple;\nexports.default = def;\n//# sourceMappingURL=items.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst code_1 = require(\"../code\");\nconst additionalItems_1 = require(\"./additionalItems\");\nconst error = {\n    message: ({ params: { len } }) => (0, codegen_1.str) `must NOT have more than ${len} items`,\n    params: ({ params: { len } }) => (0, codegen_1._) `{limit: ${len}}`,\n};\nconst def = {\n    keyword: \"items\",\n    type: \"array\",\n    schemaType: [\"object\", \"boolean\"],\n    before: \"uniqueItems\",\n    error,\n    code(cxt) {\n        const { schema, parentSchema, it } = cxt;\n        const { prefixItems } = parentSchema;\n        it.items = true;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        if (prefixItems)\n            (0, additionalItems_1.validateAdditionalItems)(cxt, prefixItems);\n        else\n            cxt.ok((0, code_1.validateArray)(cxt));\n    },\n};\nexports.default = def;\n//# sourceMappingURL=items2020.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"not\",\n    schemaType: [\"object\", \"boolean\"],\n    trackErrors: true,\n    code(cxt) {\n        const { gen, schema, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema)) {\n            cxt.fail();\n            return;\n        }\n        const valid = gen.name(\"valid\");\n        cxt.subschema({\n            keyword: \"not\",\n            compositeRule: true,\n            createErrors: false,\n            allErrors: false,\n        }, valid);\n        cxt.failResult(valid, () => cxt.reset(), () => cxt.error());\n    },\n    error: { message: \"must NOT be valid\" },\n};\nexports.default = def;\n//# sourceMappingURL=not.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"must match exactly one schema in oneOf\",\n    params: ({ params }) => (0, codegen_1._) `{passingSchemas: ${params.passing}}`,\n};\nconst def = {\n    keyword: \"oneOf\",\n    schemaType: \"array\",\n    trackErrors: true,\n    error,\n    code(cxt) {\n        const { gen, schema, parentSchema, it } = cxt;\n        /* istanbul ignore if */\n        if (!Array.isArray(schema))\n            throw new Error(\"ajv implementation error\");\n        if (it.opts.discriminator && parentSchema.discriminator)\n            return;\n        const schArr = schema;\n        const valid = gen.let(\"valid\", false);\n        const passing = gen.let(\"passing\", null);\n        const schValid = gen.name(\"_valid\");\n        cxt.setParams({ passing });\n        // TODO possibly fail straight away (with warning or exception) if there are two empty always valid schemas\n        gen.block(validateOneOf);\n        cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n        function validateOneOf() {\n            schArr.forEach((sch, i) => {\n                let schCxt;\n                if ((0, util_1.alwaysValidSchema)(it, sch)) {\n                    gen.var(schValid, true);\n                }\n                else {\n                    schCxt = cxt.subschema({\n                        keyword: \"oneOf\",\n                        schemaProp: i,\n                        compositeRule: true,\n                    }, schValid);\n                }\n                if (i > 0) {\n                    gen\n                        .if((0, codegen_1._) `${schValid} && ${valid}`)\n                        .assign(valid, false)\n                        .assign(passing, (0, codegen_1._) `[${passing}, ${i}]`)\n                        .else();\n                }\n                gen.if(schValid, () => {\n                    gen.assign(valid, true);\n                    gen.assign(passing, i);\n                    if (schCxt)\n                        cxt.mergeEvaluated(schCxt, codegen_1.Name);\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=oneOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst util_2 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"patternProperties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, data, parentSchema, it } = cxt;\n        const { opts } = it;\n        const patterns = (0, code_1.allSchemaProperties)(schema);\n        const alwaysValidPatterns = patterns.filter((p) => (0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (patterns.length === 0 ||\n            (alwaysValidPatterns.length === patterns.length &&\n                (!it.opts.unevaluated || it.props === true))) {\n            return;\n        }\n        const checkProperties = opts.strictSchema && !opts.allowMatchingProperties && parentSchema.properties;\n        const valid = gen.name(\"valid\");\n        if (it.props !== true && !(it.props instanceof codegen_1.Name)) {\n            it.props = (0, util_2.evaluatedPropsToName)(gen, it.props);\n        }\n        const { props } = it;\n        validatePatternProperties();\n        function validatePatternProperties() {\n            for (const pat of patterns) {\n                if (checkProperties)\n                    checkMatchingProperties(pat);\n                if (it.allErrors) {\n                    validateProperties(pat);\n                }\n                else {\n                    gen.var(valid, true); // TODO var\n                    validateProperties(pat);\n                    gen.if(valid);\n                }\n            }\n        }\n        function checkMatchingProperties(pat) {\n            for (const prop in checkProperties) {\n                if (new RegExp(pat).test(prop)) {\n                    (0, util_1.checkStrictMode)(it, `property ${prop} matches pattern ${pat} (use allowMatchingProperties)`);\n                }\n            }\n        }\n        function validateProperties(pat) {\n            gen.forIn(\"key\", data, (key) => {\n                gen.if((0, codegen_1._) `${(0, code_1.usePattern)(cxt, pat)}.test(${key})`, () => {\n                    const alwaysValid = alwaysValidPatterns.includes(pat);\n                    if (!alwaysValid) {\n                        cxt.subschema({\n                            keyword: \"patternProperties\",\n                            schemaProp: pat,\n                            dataProp: key,\n                            dataPropType: util_2.Type.Str,\n                        }, valid);\n                    }\n                    if (it.opts.unevaluated && props !== true) {\n                        gen.assign((0, codegen_1._) `${props}[${key}]`, true);\n                    }\n                    else if (!alwaysValid && !it.allErrors) {\n                        // can short-circuit if `unevaluatedProperties` is not supported (opts.next === false)\n                        // or if all properties were evaluated (props === true)\n                        gen.if((0, codegen_1.not)(valid), () => gen.break());\n                    }\n                });\n            });\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=patternProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst items_1 = require(\"./items\");\nconst def = {\n    keyword: \"prefixItems\",\n    type: \"array\",\n    schemaType: [\"array\"],\n    before: \"uniqueItems\",\n    code: (cxt) => (0, items_1.validateTuple)(cxt, \"items\"),\n};\nexports.default = def;\n//# sourceMappingURL=prefixItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst validate_1 = require(\"../../compile/validate\");\nconst code_1 = require(\"../code\");\nconst util_1 = require(\"../../compile/util\");\nconst additionalProperties_1 = require(\"./additionalProperties\");\nconst def = {\n    keyword: \"properties\",\n    type: \"object\",\n    schemaType: \"object\",\n    code(cxt) {\n        const { gen, schema, parentSchema, data, it } = cxt;\n        if (it.opts.removeAdditional === \"all\" && parentSchema.additionalProperties === undefined) {\n            additionalProperties_1.default.code(new validate_1.KeywordCxt(it, additionalProperties_1.default, \"additionalProperties\"));\n        }\n        const allProps = (0, code_1.allSchemaProperties)(schema);\n        for (const prop of allProps) {\n            it.definedProperties.add(prop);\n        }\n        if (it.opts.unevaluated && allProps.length && it.props !== true) {\n            it.props = util_1.mergeEvaluated.props(gen, (0, util_1.toHash)(allProps), it.props);\n        }\n        const properties = allProps.filter((p) => !(0, util_1.alwaysValidSchema)(it, schema[p]));\n        if (properties.length === 0)\n            return;\n        const valid = gen.name(\"valid\");\n        for (const prop of properties) {\n            if (hasDefault(prop)) {\n                applyPropertySchema(prop);\n            }\n            else {\n                gen.if((0, code_1.propertyInData)(gen, data, prop, it.opts.ownProperties));\n                applyPropertySchema(prop);\n                if (!it.allErrors)\n                    gen.else().var(valid, true);\n                gen.endIf();\n            }\n            cxt.it.definedProperties.add(prop);\n            cxt.ok(valid);\n        }\n        function hasDefault(prop) {\n            return it.opts.useDefaults && !it.compositeRule && schema[prop].default !== undefined;\n        }\n        function applyPropertySchema(prop) {\n            cxt.subschema({\n                keyword: \"properties\",\n                schemaProp: prop,\n                dataProp: prop,\n            }, valid);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=properties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: \"property name must be valid\",\n    params: ({ params }) => (0, codegen_1._) `{propertyName: ${params.propertyName}}`,\n};\nconst def = {\n    keyword: \"propertyNames\",\n    type: \"object\",\n    schemaType: [\"object\", \"boolean\"],\n    error,\n    code(cxt) {\n        const { gen, schema, data, it } = cxt;\n        if ((0, util_1.alwaysValidSchema)(it, schema))\n            return;\n        const valid = gen.name(\"valid\");\n        gen.forIn(\"key\", data, (key) => {\n            cxt.setParams({ propertyName: key });\n            cxt.subschema({\n                keyword: \"propertyNames\",\n                data: key,\n                dataTypes: [\"string\"],\n                propertyName: key,\n                compositeRule: true,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), () => {\n                cxt.error(true);\n                if (!it.allErrors)\n                    gen.break();\n            });\n        });\n        cxt.ok(valid);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=propertyNames.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: [\"then\", \"else\"],\n    schemaType: [\"object\", \"boolean\"],\n    code({ keyword, parentSchema, it }) {\n        if (parentSchema.if === undefined)\n            (0, util_1.checkStrictMode)(it, `\"${keyword}\" without \"if\" is ignored`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=thenElse.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateUnion = exports.validateArray = exports.usePattern = exports.callValidateCode = exports.schemaProperties = exports.allSchemaProperties = exports.noPropertyInData = exports.propertyInData = exports.isOwnProperty = exports.hasPropFunc = exports.reportMissingProp = exports.checkMissingProp = exports.checkReportMissingProp = void 0;\nconst codegen_1 = require(\"../compile/codegen\");\nconst util_1 = require(\"../compile/util\");\nconst names_1 = require(\"../compile/names\");\nfunction checkReportMissingProp(cxt, prop) {\n    const { gen, data, it } = cxt;\n    gen.if(noPropertyInData(gen, data, prop, it.opts.ownProperties), () => {\n        cxt.setParams({ missingProperty: (0, codegen_1._) `${prop}` }, true);\n        cxt.error();\n    });\n}\nexports.checkReportMissingProp = checkReportMissingProp;\nfunction checkMissingProp({ gen, data, it: { opts } }, properties, missing) {\n    return (0, codegen_1.or)(...properties.map((prop) => (0, codegen_1.and)(noPropertyInData(gen, data, prop, opts.ownProperties), (0, codegen_1._) `${missing} = ${prop}`)));\n}\nexports.checkMissingProp = checkMissingProp;\nfunction reportMissingProp(cxt, missing) {\n    cxt.setParams({ missingProperty: missing }, true);\n    cxt.error();\n}\nexports.reportMissingProp = reportMissingProp;\nfunction hasPropFunc(gen) {\n    return gen.scopeValue(\"func\", {\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        ref: Object.prototype.hasOwnProperty,\n        code: (0, codegen_1._) `Object.prototype.hasOwnProperty`,\n    });\n}\nexports.hasPropFunc = hasPropFunc;\nfunction isOwnProperty(gen, data, property) {\n    return (0, codegen_1._) `${hasPropFunc(gen)}.call(${data}, ${property})`;\n}\nexports.isOwnProperty = isOwnProperty;\nfunction propertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} !== undefined`;\n    return ownProperties ? (0, codegen_1._) `${cond} && ${isOwnProperty(gen, data, property)}` : cond;\n}\nexports.propertyInData = propertyInData;\nfunction noPropertyInData(gen, data, property, ownProperties) {\n    const cond = (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(property)} === undefined`;\n    return ownProperties ? (0, codegen_1.or)(cond, (0, codegen_1.not)(isOwnProperty(gen, data, property))) : cond;\n}\nexports.noPropertyInData = noPropertyInData;\nfunction allSchemaProperties(schemaMap) {\n    return schemaMap ? Object.keys(schemaMap).filter((p) => p !== \"__proto__\") : [];\n}\nexports.allSchemaProperties = allSchemaProperties;\nfunction schemaProperties(it, schemaMap) {\n    return allSchemaProperties(schemaMap).filter((p) => !(0, util_1.alwaysValidSchema)(it, schemaMap[p]));\n}\nexports.schemaProperties = schemaProperties;\nfunction callValidateCode({ schemaCode, data, it: { gen, topSchemaRef, schemaPath, errorPath }, it }, func, context, passSchema) {\n    const dataAndSchema = passSchema ? (0, codegen_1._) `${schemaCode}, ${data}, ${topSchemaRef}${schemaPath}` : data;\n    const valCxt = [\n        [names_1.default.instancePath, (0, codegen_1.strConcat)(names_1.default.instancePath, errorPath)],\n        [names_1.default.parentData, it.parentData],\n        [names_1.default.parentDataProperty, it.parentDataProperty],\n        [names_1.default.rootData, names_1.default.rootData],\n    ];\n    if (it.opts.dynamicRef)\n        valCxt.push([names_1.default.dynamicAnchors, names_1.default.dynamicAnchors]);\n    const args = (0, codegen_1._) `${dataAndSchema}, ${gen.object(...valCxt)}`;\n    return context !== codegen_1.nil ? (0, codegen_1._) `${func}.call(${context}, ${args})` : (0, codegen_1._) `${func}(${args})`;\n}\nexports.callValidateCode = callValidateCode;\nfunction usePattern({ gen, it: { opts } }, pattern) {\n    const u = opts.unicodeRegExp ? \"u\" : \"\";\n    return gen.scopeValue(\"pattern\", {\n        key: pattern,\n        ref: new RegExp(pattern, u),\n        code: (0, codegen_1._) `new RegExp(${pattern}, ${u})`,\n    });\n}\nexports.usePattern = usePattern;\nfunction validateArray(cxt) {\n    const { gen, data, keyword, it } = cxt;\n    const valid = gen.name(\"valid\");\n    if (it.allErrors) {\n        const validArr = gen.let(\"valid\", true);\n        validateItems(() => gen.assign(validArr, false));\n        return validArr;\n    }\n    gen.var(valid, true);\n    validateItems(() => gen.break());\n    return valid;\n    function validateItems(notValid) {\n        const len = gen.const(\"len\", (0, codegen_1._) `${data}.length`);\n        gen.forRange(\"i\", 0, len, (i) => {\n            cxt.subschema({\n                keyword,\n                dataProp: i,\n                dataPropType: util_1.Type.Num,\n            }, valid);\n            gen.if((0, codegen_1.not)(valid), notValid);\n        });\n    }\n}\nexports.validateArray = validateArray;\nfunction validateUnion(cxt) {\n    const { gen, schema, keyword, it } = cxt;\n    /* istanbul ignore if */\n    if (!Array.isArray(schema))\n        throw new Error(\"ajv implementation error\");\n    const alwaysValid = schema.some((sch) => (0, util_1.alwaysValidSchema)(it, sch));\n    if (alwaysValid && !it.opts.unevaluated)\n        return;\n    const valid = gen.let(\"valid\", false);\n    const schValid = gen.name(\"_valid\");\n    gen.block(() => schema.forEach((_sch, i) => {\n        const schCxt = cxt.subschema({\n            keyword,\n            schemaProp: i,\n            compositeRule: true,\n        }, schValid);\n        gen.assign(valid, (0, codegen_1._) `${valid} || ${schValid}`);\n        const merged = cxt.mergeValidEvaluated(schCxt, schValid);\n        // can short-circuit if `unevaluatedProperties/Items` not supported (opts.unevaluated !== true)\n        // or if all properties and items were evaluated (it.props === true && it.items === true)\n        if (!merged)\n            gen.if((0, codegen_1.not)(valid));\n    }));\n    cxt.result(valid, () => cxt.reset(), () => cxt.error(true));\n}\nexports.validateUnion = validateUnion;\n//# sourceMappingURL=code.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst def = {\n    keyword: \"id\",\n    code() {\n        throw new Error('NOT SUPPORTED: keyword \"id\", use \"$id\" for schema ID');\n    },\n};\nexports.default = def;\n//# sourceMappingURL=id.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst id_1 = require(\"./id\");\nconst ref_1 = require(\"./ref\");\nconst core = [\n    \"$schema\",\n    \"$id\",\n    \"$defs\",\n    \"$vocabulary\",\n    { keyword: \"$comment\" },\n    \"definitions\",\n    id_1.default,\n    ref_1.default,\n];\nexports.default = core;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.callRef = exports.getValidate = void 0;\nconst ref_error_1 = require(\"../../compile/ref_error\");\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst names_1 = require(\"../../compile/names\");\nconst compile_1 = require(\"../../compile\");\nconst util_1 = require(\"../../compile/util\");\nconst def = {\n    keyword: \"$ref\",\n    schemaType: \"string\",\n    code(cxt) {\n        const { gen, schema: $ref, it } = cxt;\n        const { baseId, schemaEnv: env, validateName, opts, self } = it;\n        const { root } = env;\n        if (($ref === \"#\" || $ref === \"#/\") && baseId === root.baseId)\n            return callRootRef();\n        const schOrEnv = compile_1.resolveRef.call(self, root, baseId, $ref);\n        if (schOrEnv === undefined)\n            throw new ref_error_1.default(baseId, $ref);\n        if (schOrEnv instanceof compile_1.SchemaEnv)\n            return callValidate(schOrEnv);\n        return inlineRefSchema(schOrEnv);\n        function callRootRef() {\n            if (env === root)\n                return callRef(cxt, validateName, env, env.$async);\n            const rootName = gen.scopeValue(\"root\", { ref: root });\n            return callRef(cxt, (0, codegen_1._) `${rootName}.validate`, root, root.$async);\n        }\n        function callValidate(sch) {\n            const v = getValidate(cxt, sch);\n            callRef(cxt, v, sch, sch.$async);\n        }\n        function inlineRefSchema(sch) {\n            const schName = gen.scopeValue(\"schema\", opts.code.source === true ? { ref: sch, code: (0, codegen_1.stringify)(sch) } : { ref: sch });\n            const valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({\n                schema: sch,\n                dataTypes: [],\n                schemaPath: codegen_1.nil,\n                topSchemaRef: schName,\n                errSchemaPath: $ref,\n            }, valid);\n            cxt.mergeEvaluated(schCxt);\n            cxt.ok(valid);\n        }\n    },\n};\nfunction getValidate(cxt, sch) {\n    const { gen } = cxt;\n    return sch.validate\n        ? gen.scopeValue(\"validate\", { ref: sch.validate })\n        : (0, codegen_1._) `${gen.scopeValue(\"wrapper\", { ref: sch })}.validate`;\n}\nexports.getValidate = getValidate;\nfunction callRef(cxt, v, sch, $async) {\n    const { gen, it } = cxt;\n    const { allErrors, schemaEnv: env, opts } = it;\n    const passCxt = opts.passContext ? names_1.default.this : codegen_1.nil;\n    if ($async)\n        callAsyncRef();\n    else\n        callSyncRef();\n    function callAsyncRef() {\n        if (!env.$async)\n            throw new Error(\"async schema referenced by sync schema\");\n        const valid = gen.let(\"valid\");\n        gen.try(() => {\n            gen.code((0, codegen_1._) `await ${(0, code_1.callValidateCode)(cxt, v, passCxt)}`);\n            addEvaluatedFrom(v); // TODO will not work with async, it has to be returned with the result\n            if (!allErrors)\n                gen.assign(valid, true);\n        }, (e) => {\n            gen.if((0, codegen_1._) `!(${e} instanceof ${it.ValidationError})`, () => gen.throw(e));\n            addErrorsFrom(e);\n            if (!allErrors)\n                gen.assign(valid, false);\n        });\n        cxt.ok(valid);\n    }\n    function callSyncRef() {\n        cxt.result((0, code_1.callValidateCode)(cxt, v, passCxt), () => addEvaluatedFrom(v), () => addErrorsFrom(v));\n    }\n    function addErrorsFrom(source) {\n        const errs = (0, codegen_1._) `${source}.errors`;\n        gen.assign(names_1.default.vErrors, (0, codegen_1._) `${names_1.default.vErrors} === null ? ${errs} : ${names_1.default.vErrors}.concat(${errs})`); // TODO tagged\n        gen.assign(names_1.default.errors, (0, codegen_1._) `${names_1.default.vErrors}.length`);\n    }\n    function addEvaluatedFrom(source) {\n        var _a;\n        if (!it.opts.unevaluated)\n            return;\n        const schEvaluated = (_a = sch === null || sch === void 0 ? void 0 : sch.validate) === null || _a === void 0 ? void 0 : _a.evaluated;\n        // TODO refactor\n        if (it.props !== true) {\n            if (schEvaluated && !schEvaluated.dynamicProps) {\n                if (schEvaluated.props !== undefined) {\n                    it.props = util_1.mergeEvaluated.props(gen, schEvaluated.props, it.props);\n                }\n            }\n            else {\n                const props = gen.var(\"props\", (0, codegen_1._) `${source}.evaluated.props`);\n                it.props = util_1.mergeEvaluated.props(gen, props, it.props, codegen_1.Name);\n            }\n        }\n        if (it.items !== true) {\n            if (schEvaluated && !schEvaluated.dynamicItems) {\n                if (schEvaluated.items !== undefined) {\n                    it.items = util_1.mergeEvaluated.items(gen, schEvaluated.items, it.items);\n                }\n            }\n            else {\n                const items = gen.var(\"items\", (0, codegen_1._) `${source}.evaluated.items`);\n                it.items = util_1.mergeEvaluated.items(gen, items, it.items, codegen_1.Name);\n            }\n        }\n    }\n}\nexports.callRef = callRef;\nexports.default = def;\n//# sourceMappingURL=ref.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst types_1 = require(\"../discriminator/types\");\nconst error = {\n    message: ({ params: { discrError, tagName } }) => discrError === types_1.DiscrError.Tag\n        ? `tag \"${tagName}\" must be string`\n        : `value of tag \"${tagName}\" must be in oneOf`,\n    params: ({ params: { discrError, tag, tagName } }) => (0, codegen_1._) `{error: ${discrError}, tag: ${tagName}, tagValue: ${tag}}`,\n};\nconst def = {\n    keyword: \"discriminator\",\n    type: \"object\",\n    schemaType: \"object\",\n    error,\n    code(cxt) {\n        const { gen, data, schema, parentSchema, it } = cxt;\n        const { oneOf } = parentSchema;\n        if (!it.opts.discriminator) {\n            throw new Error(\"discriminator: requires discriminator option\");\n        }\n        const tagName = schema.propertyName;\n        if (typeof tagName != \"string\")\n            throw new Error(\"discriminator: requires propertyName\");\n        if (schema.mapping)\n            throw new Error(\"discriminator: mapping is not supported\");\n        if (!oneOf)\n            throw new Error(\"discriminator: requires oneOf keyword\");\n        const valid = gen.let(\"valid\", false);\n        const tag = gen.const(\"tag\", (0, codegen_1._) `${data}${(0, codegen_1.getProperty)(tagName)}`);\n        gen.if((0, codegen_1._) `typeof ${tag} == \"string\"`, () => validateMapping(), () => cxt.error(false, { discrError: types_1.DiscrError.Tag, tag, tagName }));\n        cxt.ok(valid);\n        function validateMapping() {\n            const mapping = getMapping();\n            gen.if(false);\n            for (const tagValue in mapping) {\n                gen.elseIf((0, codegen_1._) `${tag} === ${tagValue}`);\n                gen.assign(valid, applyTagSchema(mapping[tagValue]));\n            }\n            gen.else();\n            cxt.error(false, { discrError: types_1.DiscrError.Mapping, tag, tagName });\n            gen.endIf();\n        }\n        function applyTagSchema(schemaProp) {\n            const _valid = gen.name(\"valid\");\n            const schCxt = cxt.subschema({ keyword: \"oneOf\", schemaProp }, _valid);\n            cxt.mergeEvaluated(schCxt, codegen_1.Name);\n            return _valid;\n        }\n        function getMapping() {\n            var _a;\n            const oneOfMapping = {};\n            const topRequired = hasRequired(parentSchema);\n            let tagRequired = true;\n            for (let i = 0; i < oneOf.length; i++) {\n                const sch = oneOf[i];\n                const propSch = (_a = sch.properties) === null || _a === void 0 ? void 0 : _a[tagName];\n                if (typeof propSch != \"object\") {\n                    throw new Error(`discriminator: oneOf schemas must have \"properties/${tagName}\"`);\n                }\n                tagRequired = tagRequired && (topRequired || hasRequired(sch));\n                addMappings(propSch, i);\n            }\n            if (!tagRequired)\n                throw new Error(`discriminator: \"${tagName}\" must be required`);\n            return oneOfMapping;\n            function hasRequired({ required }) {\n                return Array.isArray(required) && required.includes(tagName);\n            }\n            function addMappings(sch, i) {\n                if (sch.const) {\n                    addMapping(sch.const, i);\n                }\n                else if (sch.enum) {\n                    for (const tagValue of sch.enum) {\n                        addMapping(tagValue, i);\n                    }\n                }\n                else {\n                    throw new Error(`discriminator: \"properties/${tagName}\" must have \"const\" or \"enum\"`);\n                }\n            }\n            function addMapping(tagValue, i) {\n                if (typeof tagValue != \"string\" || tagValue in oneOfMapping) {\n                    throw new Error(`discriminator: \"${tagName}\" values must be unique strings`);\n                }\n                oneOfMapping[tagValue] = i;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiscrError = void 0;\nvar DiscrError;\n(function (DiscrError) {\n    DiscrError[\"Tag\"] = \"tag\";\n    DiscrError[\"Mapping\"] = \"mapping\";\n})(DiscrError = exports.DiscrError || (exports.DiscrError = {}));\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst core_1 = require(\"./core\");\nconst validation_1 = require(\"./validation\");\nconst applicator_1 = require(\"./applicator\");\nconst format_1 = require(\"./format\");\nconst metadata_1 = require(\"./metadata\");\nconst draft7Vocabularies = [\n    core_1.default,\n    validation_1.default,\n    (0, applicator_1.default)(),\n    format_1.default,\n    metadata_1.metadataVocabulary,\n    metadata_1.contentVocabulary,\n];\nexports.default = draft7Vocabularies;\n//# sourceMappingURL=draft7.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match format \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{format: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"format\",\n    type: [\"number\", \"string\"],\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt, ruleType) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        const { opts, errSchemaPath, schemaEnv, self } = it;\n        if (!opts.validateFormats)\n            return;\n        if ($data)\n            validate$DataFormat();\n        else\n            validateFormat();\n        function validate$DataFormat() {\n            const fmts = gen.scopeValue(\"formats\", {\n                ref: self.formats,\n                code: opts.code.formats,\n            });\n            const fDef = gen.const(\"fDef\", (0, codegen_1._) `${fmts}[${schemaCode}]`);\n            const fType = gen.let(\"fType\");\n            const format = gen.let(\"format\");\n            // TODO simplify\n            gen.if((0, codegen_1._) `typeof ${fDef} == \"object\" && !(${fDef} instanceof RegExp)`, () => gen.assign(fType, (0, codegen_1._) `${fDef}.type || \"string\"`).assign(format, (0, codegen_1._) `${fDef}.validate`), () => gen.assign(fType, (0, codegen_1._) `\"string\"`).assign(format, fDef));\n            cxt.fail$data((0, codegen_1.or)(unknownFmt(), invalidFmt()));\n            function unknownFmt() {\n                if (opts.strictSchema === false)\n                    return codegen_1.nil;\n                return (0, codegen_1._) `${schemaCode} && !${format}`;\n            }\n            function invalidFmt() {\n                const callFormat = schemaEnv.$async\n                    ? (0, codegen_1._) `(${fDef}.async ? await ${format}(${data}) : ${format}(${data}))`\n                    : (0, codegen_1._) `${format}(${data})`;\n                const validData = (0, codegen_1._) `(typeof ${format} == \"function\" ? ${callFormat} : ${format}.test(${data}))`;\n                return (0, codegen_1._) `${format} && ${format} !== true && ${fType} === ${ruleType} && !${validData}`;\n            }\n        }\n        function validateFormat() {\n            const formatDef = self.formats[schema];\n            if (!formatDef) {\n                unknownFormat();\n                return;\n            }\n            if (formatDef === true)\n                return;\n            const [fmtType, format, fmtRef] = getFormat(formatDef);\n            if (fmtType === ruleType)\n                cxt.pass(validCondition());\n            function unknownFormat() {\n                if (opts.strictSchema === false) {\n                    self.logger.warn(unknownMsg());\n                    return;\n                }\n                throw new Error(unknownMsg());\n                function unknownMsg() {\n                    return `unknown format \"${schema}\" ignored in schema at path \"${errSchemaPath}\"`;\n                }\n            }\n            function getFormat(fmtDef) {\n                const code = fmtDef instanceof RegExp\n                    ? (0, codegen_1.regexpCode)(fmtDef)\n                    : opts.code.formats\n                        ? (0, codegen_1._) `${opts.code.formats}${(0, codegen_1.getProperty)(schema)}`\n                        : undefined;\n                const fmt = gen.scopeValue(\"formats\", { key: schema, ref: fmtDef, code });\n                if (typeof fmtDef == \"object\" && !(fmtDef instanceof RegExp)) {\n                    return [fmtDef.type || \"string\", fmtDef.validate, (0, codegen_1._) `${fmt}.validate`];\n                }\n                return [\"string\", fmtDef, fmt];\n            }\n            function validCondition() {\n                if (typeof formatDef == \"object\" && !(formatDef instanceof RegExp) && formatDef.async) {\n                    if (!schemaEnv.$async)\n                        throw new Error(\"async format in sync schema\");\n                    return (0, codegen_1._) `await ${fmtRef}(${data})`;\n                }\n                return typeof format == \"function\" ? (0, codegen_1._) `${fmtRef}(${data})` : (0, codegen_1._) `${fmtRef}.test(${data})`;\n            }\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=format.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst format_1 = require(\"./format\");\nconst format = [format_1.default];\nexports.default = format;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.contentVocabulary = exports.metadataVocabulary = void 0;\nexports.metadataVocabulary = [\n    \"title\",\n    \"description\",\n    \"default\",\n    \"deprecated\",\n    \"readOnly\",\n    \"writeOnly\",\n    \"examples\",\n];\nexports.contentVocabulary = [\n    \"contentMediaType\",\n    \"contentEncoding\",\n    \"contentSchema\",\n];\n//# sourceMappingURL=metadata.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to constant\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValue: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"const\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schemaCode, schema } = cxt;\n        if ($data || (schema && typeof schema == \"object\")) {\n            cxt.fail$data((0, codegen_1._) `!${(0, util_1.useFunc)(gen, equal_1.default)}(${data}, ${schemaCode})`);\n        }\n        else {\n            cxt.fail((0, codegen_1._) `${schema} !== ${data}`);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=const.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: \"must be equal to one of the allowed values\",\n    params: ({ schemaCode }) => (0, codegen_1._) `{allowedValues: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"enum\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, schemaCode, it } = cxt;\n        if (!$data && schema.length === 0)\n            throw new Error(\"enum must have non-empty array\");\n        const useLoop = schema.length >= it.opts.loopEnum;\n        const eql = (0, util_1.useFunc)(gen, equal_1.default);\n        let valid;\n        if (useLoop || $data) {\n            valid = gen.let(\"valid\");\n            cxt.block$data(valid, loopEnum);\n        }\n        else {\n            /* istanbul ignore if */\n            if (!Array.isArray(schema))\n                throw new Error(\"ajv implementation error\");\n            const vSchema = gen.const(\"vSchema\", schemaCode);\n            valid = (0, codegen_1.or)(...schema.map((_x, i) => equalCode(vSchema, i)));\n        }\n        cxt.pass(valid);\n        function loopEnum() {\n            gen.assign(valid, false);\n            gen.forOf(\"v\", schemaCode, (v) => gen.if((0, codegen_1._) `${eql}(${data}, ${v})`, () => gen.assign(valid, true).break()));\n        }\n        function equalCode(vSchema, i) {\n            const sch = schema[i];\n            return typeof sch === \"object\" && sch !== null\n                ? (0, codegen_1._) `${eql}(${data}, ${vSchema}[${i}])`\n                : (0, codegen_1._) `${data} === ${sch}`;\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=enum.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst limitNumber_1 = require(\"./limitNumber\");\nconst multipleOf_1 = require(\"./multipleOf\");\nconst limitLength_1 = require(\"./limitLength\");\nconst pattern_1 = require(\"./pattern\");\nconst limitProperties_1 = require(\"./limitProperties\");\nconst required_1 = require(\"./required\");\nconst limitItems_1 = require(\"./limitItems\");\nconst uniqueItems_1 = require(\"./uniqueItems\");\nconst const_1 = require(\"./const\");\nconst enum_1 = require(\"./enum\");\nconst validation = [\n    // number\n    limitNumber_1.default,\n    multipleOf_1.default,\n    // string\n    limitLength_1.default,\n    pattern_1.default,\n    // object\n    limitProperties_1.default,\n    required_1.default,\n    // array\n    limitItems_1.default,\n    uniqueItems_1.default,\n    // any\n    { keyword: \"type\", schemaType: [\"string\", \"array\"] },\n    { keyword: \"nullable\", schemaType: \"boolean\" },\n    const_1.default,\n    enum_1.default,\n];\nexports.default = validation;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxItems\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} items`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxItems\", \"minItems\"],\n    type: \"array\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxItems\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `${data}.length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitItems.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst ucs2length_1 = require(\"../../runtime/ucs2length\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxLength\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} characters`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxLength\", \"minLength\"],\n    type: \"string\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode, it } = cxt;\n        const op = keyword === \"maxLength\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        const len = it.opts.unicode === false ? (0, codegen_1._) `${data}.length` : (0, codegen_1._) `${(0, util_1.useFunc)(cxt.gen, ucs2length_1.default)}(${data})`;\n        cxt.fail$data((0, codegen_1._) `${len} ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitLength.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst ops = codegen_1.operators;\nconst KWDs = {\n    maximum: { okStr: \"<=\", ok: ops.LTE, fail: ops.GT },\n    minimum: { okStr: \">=\", ok: ops.GTE, fail: ops.LT },\n    exclusiveMaximum: { okStr: \"<\", ok: ops.LT, fail: ops.GTE },\n    exclusiveMinimum: { okStr: \">\", ok: ops.GT, fail: ops.LTE },\n};\nconst error = {\n    message: ({ keyword, schemaCode }) => (0, codegen_1.str) `must be ${KWDs[keyword].okStr} ${schemaCode}`,\n    params: ({ keyword, schemaCode }) => (0, codegen_1._) `{comparison: ${KWDs[keyword].okStr}, limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: Object.keys(KWDs),\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        cxt.fail$data((0, codegen_1._) `${data} ${KWDs[keyword].fail} ${schemaCode} || isNaN(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitNumber.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message({ keyword, schemaCode }) {\n        const comp = keyword === \"maxProperties\" ? \"more\" : \"fewer\";\n        return (0, codegen_1.str) `must NOT have ${comp} than ${schemaCode} items`;\n    },\n    params: ({ schemaCode }) => (0, codegen_1._) `{limit: ${schemaCode}}`,\n};\nconst def = {\n    keyword: [\"maxProperties\", \"minProperties\"],\n    type: \"object\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { keyword, data, schemaCode } = cxt;\n        const op = keyword === \"maxProperties\" ? codegen_1.operators.GT : codegen_1.operators.LT;\n        cxt.fail$data((0, codegen_1._) `Object.keys(${data}).length ${op} ${schemaCode}`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=limitProperties.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must be multiple of ${schemaCode}`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{multipleOf: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"multipleOf\",\n    type: \"number\",\n    schemaType: \"number\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, schemaCode, it } = cxt;\n        // const bdt = bad$DataType(schemaCode, <string>def.schemaType, $data)\n        const prec = it.opts.multipleOfPrecision;\n        const res = gen.let(\"res\");\n        const invalid = prec\n            ? (0, codegen_1._) `Math.abs(Math.round(${res}) - ${res}) > 1e-${prec}`\n            : (0, codegen_1._) `${res} !== parseInt(${res})`;\n        cxt.fail$data((0, codegen_1._) `(${schemaCode} === 0 || (${res} = ${data}/${schemaCode}, ${invalid}))`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=multipleOf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst error = {\n    message: ({ schemaCode }) => (0, codegen_1.str) `must match pattern \"${schemaCode}\"`,\n    params: ({ schemaCode }) => (0, codegen_1._) `{pattern: ${schemaCode}}`,\n};\nconst def = {\n    keyword: \"pattern\",\n    type: \"string\",\n    schemaType: \"string\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { data, $data, schema, schemaCode, it } = cxt;\n        // TODO regexp should be wrapped in try/catchs\n        const u = it.opts.unicodeRegExp ? \"u\" : \"\";\n        const regExp = $data ? (0, codegen_1._) `(new RegExp(${schemaCode}, ${u}))` : (0, code_1.usePattern)(cxt, schema);\n        cxt.fail$data((0, codegen_1._) `!${regExp}.test(${data})`);\n    },\n};\nexports.default = def;\n//# sourceMappingURL=pattern.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code_1 = require(\"../code\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst error = {\n    message: ({ params: { missingProperty } }) => (0, codegen_1.str) `must have required property '${missingProperty}'`,\n    params: ({ params: { missingProperty } }) => (0, codegen_1._) `{missingProperty: ${missingProperty}}`,\n};\nconst def = {\n    keyword: \"required\",\n    type: \"object\",\n    schemaType: \"array\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, schema, schemaCode, data, $data, it } = cxt;\n        const { opts } = it;\n        if (!$data && schema.length === 0)\n            return;\n        const useLoop = schema.length >= opts.loopRequired;\n        if (it.allErrors)\n            allErrorsMode();\n        else\n            exitOnErrorMode();\n        if (opts.strictRequired) {\n            const props = cxt.parentSchema.properties;\n            const { definedProperties } = cxt.it;\n            for (const requiredKey of schema) {\n                if ((props === null || props === void 0 ? void 0 : props[requiredKey]) === undefined && !definedProperties.has(requiredKey)) {\n                    const schemaPath = it.schemaEnv.baseId + it.errSchemaPath;\n                    const msg = `required property \"${requiredKey}\" is not defined at \"${schemaPath}\" (strictRequired)`;\n                    (0, util_1.checkStrictMode)(it, msg, it.opts.strictRequired);\n                }\n            }\n        }\n        function allErrorsMode() {\n            if (useLoop || $data) {\n                cxt.block$data(codegen_1.nil, loopAllRequired);\n            }\n            else {\n                for (const prop of schema) {\n                    (0, code_1.checkReportMissingProp)(cxt, prop);\n                }\n            }\n        }\n        function exitOnErrorMode() {\n            const missing = gen.let(\"missing\");\n            if (useLoop || $data) {\n                const valid = gen.let(\"valid\", true);\n                cxt.block$data(valid, () => loopUntilMissing(missing, valid));\n                cxt.ok(valid);\n            }\n            else {\n                gen.if((0, code_1.checkMissingProp)(cxt, schema, missing));\n                (0, code_1.reportMissingProp)(cxt, missing);\n                gen.else();\n            }\n        }\n        function loopAllRequired() {\n            gen.forOf(\"prop\", schemaCode, (prop) => {\n                cxt.setParams({ missingProperty: prop });\n                gen.if((0, code_1.noPropertyInData)(gen, data, prop, opts.ownProperties), () => cxt.error());\n            });\n        }\n        function loopUntilMissing(missing, valid) {\n            cxt.setParams({ missingProperty: missing });\n            gen.forOf(missing, schemaCode, () => {\n                gen.assign(valid, (0, code_1.propertyInData)(gen, data, missing, opts.ownProperties));\n                gen.if((0, codegen_1.not)(valid), () => {\n                    cxt.error();\n                    gen.break();\n                });\n            }, codegen_1.nil);\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=required.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dataType_1 = require(\"../../compile/validate/dataType\");\nconst codegen_1 = require(\"../../compile/codegen\");\nconst util_1 = require(\"../../compile/util\");\nconst equal_1 = require(\"../../runtime/equal\");\nconst error = {\n    message: ({ params: { i, j } }) => (0, codegen_1.str) `must NOT have duplicate items (items ## ${j} and ${i} are identical)`,\n    params: ({ params: { i, j } }) => (0, codegen_1._) `{i: ${i}, j: ${j}}`,\n};\nconst def = {\n    keyword: \"uniqueItems\",\n    type: \"array\",\n    schemaType: \"boolean\",\n    $data: true,\n    error,\n    code(cxt) {\n        const { gen, data, $data, schema, parentSchema, schemaCode, it } = cxt;\n        if (!$data && !schema)\n            return;\n        const valid = gen.let(\"valid\");\n        const itemTypes = parentSchema.items ? (0, dataType_1.getSchemaTypes)(parentSchema.items) : [];\n        cxt.block$data(valid, validateUniqueItems, (0, codegen_1._) `${schemaCode} === false`);\n        cxt.ok(valid);\n        function validateUniqueItems() {\n            const i = gen.let(\"i\", (0, codegen_1._) `${data}.length`);\n            const j = gen.let(\"j\");\n            cxt.setParams({ i, j });\n            gen.assign(valid, true);\n            gen.if((0, codegen_1._) `${i} > 1`, () => (canOptimize() ? loopN : loopN2)(i, j));\n        }\n        function canOptimize() {\n            return itemTypes.length > 0 && !itemTypes.some((t) => t === \"object\" || t === \"array\");\n        }\n        function loopN(i, j) {\n            const item = gen.name(\"item\");\n            const wrongType = (0, dataType_1.checkDataTypes)(itemTypes, item, it.opts.strictNumbers, dataType_1.DataType.Wrong);\n            const indices = gen.const(\"indices\", (0, codegen_1._) `{}`);\n            gen.for((0, codegen_1._) `;${i}--;`, () => {\n                gen.let(item, (0, codegen_1._) `${data}[${i}]`);\n                gen.if(wrongType, (0, codegen_1._) `continue`);\n                if (itemTypes.length > 1)\n                    gen.if((0, codegen_1._) `typeof ${item} == \"string\"`, (0, codegen_1._) `${item} += \"_\"`);\n                gen\n                    .if((0, codegen_1._) `typeof ${indices}[${item}] == \"number\"`, () => {\n                    gen.assign(j, (0, codegen_1._) `${indices}[${item}]`);\n                    cxt.error();\n                    gen.assign(valid, false).break();\n                })\n                    .code((0, codegen_1._) `${indices}[${item}] = ${i}`);\n            });\n        }\n        function loopN2(i, j) {\n            const eql = (0, util_1.useFunc)(gen, equal_1.default);\n            const outer = gen.name(\"outer\");\n            gen.label(outer).for((0, codegen_1._) `;${i}--;`, () => gen.for((0, codegen_1._) `${j} = ${i}; ${j}--;`, () => gen.if((0, codegen_1._) `${eql}(${data}[${i}], ${data}[${j}])`, () => {\n                cxt.error();\n                gen.assign(valid, false).break(outer);\n            })));\n        }\n    },\n};\nexports.default = def;\n//# sourceMappingURL=uniqueItems.js.map","'use strict';\n\nvar traverse = module.exports = function (schema, opts, cb) {\n  // Legacy support for v0.3.1 and earlier.\n  if (typeof opts == 'function') {\n    cb = opts;\n    opts = {};\n  }\n\n  cb = opts.cb || cb;\n  var pre = (typeof cb == 'function') ? cb : cb.pre || function() {};\n  var post = cb.post || function() {};\n\n  _traverse(opts, pre, post, schema, '', schema);\n};\n\n\ntraverse.keywords = {\n  additionalItems: true,\n  items: true,\n  contains: true,\n  additionalProperties: true,\n  propertyNames: true,\n  not: true,\n  if: true,\n  then: true,\n  else: true\n};\n\ntraverse.arrayKeywords = {\n  items: true,\n  allOf: true,\n  anyOf: true,\n  oneOf: true\n};\n\ntraverse.propsKeywords = {\n  $defs: true,\n  definitions: true,\n  properties: true,\n  patternProperties: true,\n  dependencies: true\n};\n\ntraverse.skipKeywords = {\n  default: true,\n  enum: true,\n  const: true,\n  required: true,\n  maximum: true,\n  minimum: true,\n  exclusiveMaximum: true,\n  exclusiveMinimum: true,\n  multipleOf: true,\n  maxLength: true,\n  minLength: true,\n  pattern: true,\n  format: true,\n  maxItems: true,\n  minItems: true,\n  uniqueItems: true,\n  maxProperties: true,\n  minProperties: true\n};\n\n\nfunction _traverse(opts, pre, post, schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex) {\n  if (schema && typeof schema == 'object' && !Array.isArray(schema)) {\n    pre(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n    for (var key in schema) {\n      var sch = schema[key];\n      if (Array.isArray(sch)) {\n        if (key in traverse.arrayKeywords) {\n          for (var i=0; i<sch.length; i++)\n            _traverse(opts, pre, post, sch[i], jsonPtr + '/' + key + '/' + i, rootSchema, jsonPtr, key, schema, i);\n        }\n      } else if (key in traverse.propsKeywords) {\n        if (sch && typeof sch == 'object') {\n          for (var prop in sch)\n            _traverse(opts, pre, post, sch[prop], jsonPtr + '/' + key + '/' + escapeJsonPtr(prop), rootSchema, jsonPtr, key, schema, prop);\n        }\n      } else if (key in traverse.keywords || (opts.allKeys && !(key in traverse.skipKeywords))) {\n        _traverse(opts, pre, post, sch, jsonPtr + '/' + key, rootSchema, jsonPtr, key, schema);\n      }\n    }\n    post(schema, jsonPtr, rootSchema, parentJsonPtr, parentKeyword, parentSchema, keyIndex);\n  }\n}\n\n\nfunction escapeJsonPtr(str) {\n  return str.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst stringifyValue = (value) => {\n    if (typeof value === 'boolean' || typeof value === 'number') {\n        return String(value);\n    }\n    return `\"${value}\"`;\n};\nconst fqlExpression = (name, operator, value) => {\n    switch (operator) {\n        case 'contains':\n            return `contains(${name}, ${stringifyValue(value)})`;\n        case 'not_contains':\n            return `!contains(${name}, ${stringifyValue(value)})`;\n        case 'exists':\n            return `${name} != null`;\n        case 'not_exists':\n            return `${name} = null`;\n        case 'starts_with':\n            return `match(${name}, \"${String(value)}*\")`;\n        case 'not_starts_with':\n            return `!match(${name}, \"${String(value)}*\")`;\n        case 'ends_with':\n            return `match(${name}, \"*${String(value)}\")`;\n        case 'not_ends_with':\n            return `!match(${name}, \"*${String(value)}\")`;\n        case '<':\n        case '>':\n        case '<=':\n        case '>=':\n            return `${name} ${operator} ${Number(value)}`;\n        default:\n            return `${name} ${operator} ${stringifyValue(value)}`;\n    }\n};\nconst stringifyGroupNode = (node) => {\n    return node.children\n        .map(childNode => {\n        if (childNode.type === 'group') {\n            return `(${stringifyGroupNode(childNode)})`;\n        }\n        return stringifyChildNode(childNode);\n    })\n        .join(` ${node.operator} `);\n};\nconst stringifyChildNode = (node) => {\n    let result = '';\n    switch (node.type) {\n        case 'name':\n        case 'userId':\n        case 'event': {\n            result += fqlExpression(node.type, node.operator, node.value);\n            break;\n        }\n        case 'event-type': {\n            result += fqlExpression('type', node.operator, node.value);\n            break;\n        }\n        case 'event-property': {\n            result += fqlExpression(`properties.${node.name}`, node.operator, node.value);\n            break;\n        }\n        case 'event-trait': {\n            result += fqlExpression(`traits.${node.name}`, node.operator, node.value);\n            break;\n        }\n        case 'event-context': {\n            result += fqlExpression(`context.${node.name}`, node.operator, node.value);\n            break;\n        }\n        default:\n            throw new Error('Unknown condition type');\n    }\n    return result;\n};\nconst numberOfParens = (string) => {\n    let parens = 0;\n    for (const char of string.split('')) {\n        if (char === '(' || char === ')') {\n            parens++;\n        }\n    }\n    return parens;\n};\nconst generateFql = (ast) => {\n    if (ast.error) {\n        throw ast.error;\n    }\n    const fql = stringifyGroupNode(ast);\n    if (fql.startsWith('(') && fql.endsWith(')') && numberOfParens(fql) === 2) {\n        return fql.slice(1, -1);\n    }\n    return fql;\n};\nexports.default = generateFql;\n//# sourceMappingURL=generate-fql.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.get = void 0;\nfunction get(object, path, defValue) {\n    if (!path)\n        return defValue;\n    const pathArray = Array.isArray(path)\n        ? path\n        : path.match(/([^[.\\]])+/g);\n    const value = pathArray.reduce((previousObject, key) => previousObject && previousObject[key], object);\n    return typeof value === 'undefined' ? defValue : value;\n}\nexports.get = get;\n//# sourceMappingURL=get.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseFql = exports.generateFql = exports.validate = void 0;\n__exportStar(require(\"./types\"), exports);\nvar validate_1 = require(\"./validate\");\nObject.defineProperty(exports, \"validate\", { enumerable: true, get: function () { return __importDefault(validate_1).default; } });\nvar generate_fql_1 = require(\"./generate-fql\");\nObject.defineProperty(exports, \"generateFql\", { enumerable: true, get: function () { return __importDefault(generate_fql_1).default; } });\nvar parse_fql_1 = require(\"./parse-fql\");\nObject.defineProperty(exports, \"parseFql\", { enumerable: true, get: function () { return __importDefault(parse_fql_1).default; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst fql_ts_1 = require(\"@segment/fql-ts\");\nconst tokenToConditionType = {\n    type: 'event-type',\n    event: 'event',\n    name: 'name',\n    userId: 'userId',\n    context: 'event-context',\n    properties: 'event-property',\n    traits: 'event-trait'\n};\nconst getTokenValue = (token) => {\n    if (token.type === 'string') {\n        return token.value.replace(/^\"/, '').replace(/\"$/, '');\n    }\n    if (token.type === 'number') {\n        return Number(token.value);\n    }\n    if (token.type === 'ident' && ['true', 'false'].includes(token.value)) {\n        return token.value === 'true';\n    }\n    return String(token.value);\n};\nconst isFqlFunction = (token) => {\n    return token.type === 'ident' && ['contains', 'match'].includes(token.value);\n};\nconst parseFqlFunction = (name, nodes, tokens, { negate } = { negate: false }) => {\n    if (name === 'contains') {\n        tokens.shift();\n        const nameToken = tokens.shift();\n        if (!nameToken) {\n            throw new Error('contains() is missing a 1st argument');\n        }\n        tokens.shift();\n        const valueToken = tokens.shift();\n        if (!valueToken) {\n            throw new Error('contains() is missing a 2nd argument');\n        }\n        tokens.shift();\n        if (['event', 'name', 'userId'].includes(nameToken.value)) {\n            nodes.push({\n                type: nameToken.value,\n                operator: negate ? 'not_contains' : 'contains',\n                value: String(getTokenValue(valueToken))\n            });\n        }\n        if (/^(properties)/.test(nameToken.value)) {\n            nodes.push({\n                type: 'event-property',\n                name: nameToken.value.replace(/^(properties)\\./, ''),\n                operator: negate ? 'not_contains' : 'contains',\n                value: String(getTokenValue(valueToken))\n            });\n        }\n        if (/^(traits)/.test(nameToken.value)) {\n            nodes.push({\n                type: 'event-trait',\n                name: nameToken.value.replace(/^(traits)\\./, ''),\n                operator: negate ? 'not_contains' : 'contains',\n                value: String(getTokenValue(valueToken))\n            });\n        }\n        if (/^(context)/.test(nameToken.value)) {\n            nodes.push({\n                type: 'event-context',\n                name: nameToken.value.replace(/^(context)\\./, ''),\n                operator: negate ? 'not_contains' : 'contains',\n                value: String(getTokenValue(valueToken))\n            });\n        }\n    }\n    if (name === 'match') {\n        tokens.shift();\n        const nameToken = tokens.shift();\n        if (!nameToken) {\n            throw new Error('match() is missing a 1st argument');\n        }\n        tokens.shift();\n        const valueToken = tokens.shift();\n        if (!valueToken) {\n            throw new Error('match() is missing a 2nd argument');\n        }\n        tokens.shift();\n        let operator;\n        let value;\n        if (valueToken.value.endsWith('*\"')) {\n            operator = negate ? 'not_starts_with' : 'starts_with';\n            value = String(getTokenValue(valueToken)).slice(0, -1);\n        }\n        else {\n            operator = negate ? 'not_ends_with' : 'ends_with';\n            value = String(getTokenValue(valueToken)).slice(1);\n        }\n        if (['event', 'name', 'userId'].includes(nameToken.value)) {\n            nodes.push({\n                type: nameToken.value,\n                operator,\n                value\n            });\n        }\n        if (/^(properties)/.test(nameToken.value)) {\n            nodes.push({\n                type: 'event-property',\n                name: nameToken.value.replace(/^(properties)\\./, ''),\n                operator,\n                value\n            });\n        }\n        if (/^(traits)/.test(nameToken.value)) {\n            nodes.push({\n                type: 'event-trait',\n                name: nameToken.value.replace(/^(traits)\\./, ''),\n                operator,\n                value\n            });\n        }\n        if (/^(context)/.test(nameToken.value)) {\n            nodes.push({\n                type: 'event-context',\n                name: nameToken.value.replace(/^(context)\\./, ''),\n                operator,\n                value\n            });\n        }\n    }\n};\nconst parse = (tokens) => {\n    var _a;\n    const nodes = [];\n    let operator = 'and';\n    let token = tokens.shift();\n    while (token && token.type !== 'eos') {\n        if (token.type === 'ident') {\n            const [tokenStart] = ((_a = token.value) !== null && _a !== void 0 ? _a : '').split('.');\n            const conditionType = tokenToConditionType[tokenStart];\n            if (conditionType) {\n                const operatorToken = tokens.shift();\n                if (!operatorToken) {\n                    throw new Error('Operator token is missing');\n                }\n                const valueToken = tokens.shift();\n                if (!valueToken) {\n                    throw new Error('Value token is missing');\n                }\n                const isExists = operatorToken.value === '!=' && valueToken.value === 'null';\n                const isNotExists = operatorToken.value === '=' && valueToken.value === 'null';\n                if (conditionType === 'event') {\n                    nodes.push({\n                        type: 'event',\n                        operator: operatorToken.value,\n                        value: String(getTokenValue(valueToken))\n                    });\n                }\n                else if (conditionType === 'event-type') {\n                    nodes.push({\n                        type: 'event-type',\n                        operator: operatorToken.value,\n                        value: String(getTokenValue(valueToken))\n                    });\n                }\n                else if (conditionType === 'name') {\n                    nodes.push({\n                        type: 'name',\n                        operator: operatorToken.value,\n                        value: String(getTokenValue(valueToken))\n                    });\n                }\n                else if (conditionType === 'userId') {\n                    if (isExists) {\n                        nodes.push({\n                            type: 'userId',\n                            operator: 'exists'\n                        });\n                    }\n                    else if (isNotExists) {\n                        nodes.push({\n                            type: 'userId',\n                            operator: 'not_exists'\n                        });\n                    }\n                    else {\n                        nodes.push({\n                            type: 'userId',\n                            operator: operatorToken.value,\n                            value: String(getTokenValue(valueToken))\n                        });\n                    }\n                }\n                else if (conditionType === 'event-property') {\n                    if (isExists) {\n                        nodes.push({\n                            type: 'event-property',\n                            name: token.value.replace(/^(properties)\\./, ''),\n                            operator: 'exists'\n                        });\n                    }\n                    else if (isNotExists) {\n                        nodes.push({\n                            type: 'event-property',\n                            name: token.value.replace(/^(properties)\\./, ''),\n                            operator: 'not_exists'\n                        });\n                    }\n                    else {\n                        nodes.push({\n                            type: 'event-property',\n                            name: token.value.replace(/^(properties)\\./, ''),\n                            operator: operatorToken.value,\n                            value: getTokenValue(valueToken)\n                        });\n                    }\n                }\n                else if (conditionType === 'event-trait') {\n                    if (isExists) {\n                        nodes.push({\n                            type: 'event-trait',\n                            name: token.value.replace(/^(traits)\\./, ''),\n                            operator: 'exists'\n                        });\n                    }\n                    else if (isNotExists) {\n                        nodes.push({\n                            type: 'event-trait',\n                            name: token.value.replace(/^(traits)\\./, ''),\n                            operator: 'not_exists'\n                        });\n                    }\n                    else {\n                        nodes.push({\n                            type: 'event-trait',\n                            name: token.value.replace(/^(traits)\\./, ''),\n                            operator: operatorToken.value,\n                            value: getTokenValue(valueToken)\n                        });\n                    }\n                }\n                else if (conditionType === 'event-context') {\n                    if (isExists) {\n                        nodes.push({\n                            type: 'event-context',\n                            name: token.value.replace(/^(context)\\./, ''),\n                            operator: 'exists'\n                        });\n                    }\n                    else if (isNotExists) {\n                        nodes.push({\n                            type: 'event-context',\n                            name: token.value.replace(/^(context)\\./, ''),\n                            operator: 'not_exists'\n                        });\n                    }\n                    else {\n                        nodes.push({\n                            type: 'event-context',\n                            name: token.value.replace(/^(context)\\./, ''),\n                            operator: operatorToken.value,\n                            value: getTokenValue(valueToken)\n                        });\n                    }\n                }\n            }\n            if (isFqlFunction(token)) {\n                parseFqlFunction(token.value, nodes, tokens);\n            }\n        }\n        if (token.type === 'operator' && token.value === '!') {\n            if (isFqlFunction(tokens[0])) {\n                const name = tokens[0].value;\n                tokens.shift();\n                parseFqlFunction(name, nodes, tokens, { negate: true });\n            }\n        }\n        if (token.type === 'parenleft') {\n            const groupTokens = [];\n            let groupToken = tokens.shift();\n            while (groupToken.type !== 'parenright') {\n                groupTokens.push(groupToken);\n                groupToken = tokens.shift();\n            }\n            groupTokens.push({ type: fql_ts_1.types.EOS, value: 'eos' });\n            nodes.push(parse(groupTokens));\n        }\n        if (token.type === 'conditional') {\n            operator = token.value;\n        }\n        token = tokens.shift();\n    }\n    if (nodes.length > 1) {\n        return {\n            type: 'group',\n            operator: operator,\n            children: nodes\n        };\n    }\n    return nodes[0];\n};\nconst normalize = (tokens) => {\n    const normalizedTokens = [];\n    let index = 0;\n    while (tokens[index]) {\n        const last = normalizedTokens[normalizedTokens.length - 1];\n        const current = tokens[index];\n        const next = tokens[index + 1];\n        if ((last === null || last === void 0 ? void 0 : last.type) === 'ident' &&\n            current.type === 'dot' &&\n            (next === null || next === void 0 ? void 0 : next.type) === 'ident') {\n            const previous = normalizedTokens.pop();\n            normalizedTokens.push({\n                type: fql_ts_1.types.Ident,\n                value: `${previous === null || previous === void 0 ? void 0 : previous.value}${current.value}${next.value}`\n            });\n            index += 2;\n        }\n        else {\n            normalizedTokens.push(tokens[index]);\n            index++;\n        }\n    }\n    return normalizedTokens;\n};\nconst parseFql = (fql) => {\n    try {\n        const ast = parse(normalize(fql_ts_1.lex(fql).tokens));\n        if (ast.type !== 'group') {\n            return {\n                type: 'group',\n                operator: 'and',\n                children: [ast]\n            };\n        }\n        return ast;\n    }\n    catch (error) {\n        const err = error instanceof Error ? error : new Error(`Error while parsing ${fql}`);\n        return {\n            error: err\n        };\n    }\n};\nexports.default = parseFql;\n//# sourceMappingURL=parse-fql.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst get_1 = require(\"./get\");\nconst validateGroupCondition = (condition, data) => {\n    if (condition.operator === 'and') {\n        return condition.children.every((childCondition) => {\n            return validateCondition(childCondition, data);\n        });\n    }\n    if (condition.operator === 'or') {\n        return condition.children.some((childCondition) => {\n            return validateCondition(childCondition, data);\n        });\n    }\n    return false;\n};\nconst validate = (condition, data) => {\n    if (condition.error || typeof data === 'undefined') {\n        return false;\n    }\n    return validateGroupCondition(condition, data);\n};\nexports.default = validate;\nconst validateCondition = (condition, data) => {\n    if (condition.type === 'event-type') {\n        return validateValue(data.type, condition.operator, condition.value);\n    }\n    if (condition.type === 'event') {\n        return validateValue(data.event, condition.operator, condition.value);\n    }\n    if (condition.type === 'name') {\n        return validateValue(data.name, condition.operator, condition.value);\n    }\n    if (condition.type === 'userId') {\n        return validateValue(data.userId, condition.operator, condition.value);\n    }\n    if (condition.type === 'event-property') {\n        return validateValue(get_1.get(data.properties, condition.name), condition.operator, condition.value);\n    }\n    if (condition.type === 'event-trait') {\n        return validateValue(get_1.get(data.traits, condition.name), condition.operator, condition.value);\n    }\n    if (condition.type === 'event-context') {\n        return validateValue(get_1.get(data.context, condition.name), condition.operator, condition.value);\n    }\n    if (condition.type === 'group') {\n        return validateGroupCondition(condition, data);\n    }\n    return false;\n};\nconst validateValue = (actual, operator, expected) => {\n    switch (operator) {\n        case '=':\n            return String(actual) === String(expected);\n        case '!=':\n            return String(actual) !== String(expected);\n        case '<':\n            return Number(actual) < Number(expected);\n        case '<=':\n            return Number(actual) <= Number(expected);\n        case '>':\n            return Number(actual) > Number(expected);\n        case '>=':\n            return Number(actual) >= Number(expected);\n        case 'contains':\n            return typeof actual === 'string' && actual.includes(String(expected));\n        case 'not_contains':\n            return typeof actual === 'string' && !actual.includes(String(expected));\n        case 'starts_with':\n            return typeof actual === 'string' && actual.startsWith(String(expected));\n        case 'not_starts_with':\n            return typeof actual === 'string' && !actual.startsWith(String(expected));\n        case 'ends_with':\n            return typeof actual === 'string' && actual.endsWith(String(expected));\n        case 'not_ends_with':\n            return typeof actual === 'string' && !actual.endsWith(String(expected));\n        case 'exists':\n            return actual !== undefined && actual !== null;\n        case 'not_exists':\n            return actual === undefined || actual === null;\n        default:\n            return false;\n    }\n};\n//# sourceMappingURL=validate.js.map","function fixProto(target, prototype) {\n  var setPrototypeOf = Object.setPrototypeOf;\n  setPrototypeOf ? setPrototypeOf(target, prototype) : target.__proto__ = prototype;\n}\nfunction fixStack(target, fn) {\n  if (fn === void 0) {\n    fn = target.constructor;\n  }\n\n  var captureStackTrace = Error.captureStackTrace;\n  captureStackTrace && captureStackTrace(target, fn);\n}\n\nvar __extends = undefined && undefined.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) { if (b.hasOwnProperty(p)) { d[p] = b[p]; } }\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar CustomError = function (_super) {\n  __extends(CustomError, _super);\n\n  function CustomError(message) {\n    var _newTarget = this.constructor;\n\n    var _this = _super.call(this, message) || this;\n\n    Object.defineProperty(_this, 'name', {\n      value: _newTarget.name,\n      enumerable: false,\n      configurable: true\n    });\n    fixProto(_this, _newTarget.prototype);\n    fixStack(_this);\n    return _this;\n  }\n\n  return CustomError;\n}(Error);\n\nvar __spreadArrays = undefined && undefined.__spreadArrays || function () {\n  var arguments$1 = arguments;\n\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) { s += arguments$1[i].length; }\n\n  for (var r = Array(s), k = 0, i = 0; i < il; i++) { for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++) { r[k] = a[j]; } }\n\n  return r;\n};\nfunction customErrorFactory(fn, parent) {\n  if (parent === void 0) {\n    parent = Error;\n  }\n\n  function CustomError() {\n    var arguments$1 = arguments;\n\n    var args = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      args[_i] = arguments$1[_i];\n    }\n\n    if (!(this instanceof CustomError)) { return new (CustomError.bind.apply(CustomError, __spreadArrays([void 0], args)))(); }\n    parent.apply(this, args);\n    Object.defineProperty(this, 'name', {\n      value: fn.name || parent.name,\n      enumerable: false,\n      configurable: true\n    });\n    fn.apply(this, args);\n    fixStack(this, CustomError);\n  }\n\n  return Object.defineProperties(CustomError, {\n    prototype: {\n      value: Object.create(parent.prototype, {\n        constructor: {\n          value: CustomError,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  });\n}\n\nexport { CustomError, customErrorFactory };\n//# sourceMappingURL=custom-error.mjs.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \"/\" + \"cccb3a7f892b924f927b\" + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t661: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t} else installedChunks[chunkId] = 0;\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_name_Destination\"] = self[\"webpackChunk_name_Destination\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","import btoa from 'btoa-lite';\nconst addBasicAuthHeader = (options) => {\n    if (options.username || options.password) {\n        const username = options.username || '';\n        const password = options.password || '';\n        const encoded = btoa(`${username}:${password}`);\n        const authorization = `Basic ${encoded}`;\n        return {\n            headers: {\n                Authorization: authorization\n            }\n        };\n    }\n};\nexport default addBasicAuthHeader;\n//# sourceMappingURL=add-basic-auth-header.js.map","const headersToObject = (headers) => {\n    const obj = {};\n    for (const [key, value] of headers.entries()) {\n        obj[key] = value;\n    }\n    return obj;\n};\nconst prepareHeaders = async (_request, _options, response) => {\n    Object.defineProperty(response.headers, 'toJSON', {\n        enumerable: false,\n        value: () => headersToObject(response.headers)\n    });\n    return response;\n};\nexport default prepareHeaders;\n//# sourceMappingURL=prepare-headers.js.map","const prepareResponse = async (_request, _options, response) => {\n    const modifiedResponse = response;\n    const clone = response.clone();\n    const content = await clone.text();\n    let data;\n    try {\n        if (modifiedResponse.headers.get('content-type')?.includes('application/json')) {\n            data = JSON.parse(content);\n        }\n        else {\n            data = content;\n        }\n    }\n    catch (_error) {\n    }\n    modifiedResponse.content = content;\n    modifiedResponse.data = data;\n    return modifiedResponse;\n};\nexport default prepareResponse;\n//# sourceMappingURL=prepare-response.js.map","import fetch, { Headers, Request, Response } from 'cross-fetch';\nexport { Headers, Request, Response };\nexport default fetch;\n//# sourceMappingURL=fetch.js.map","import AbortController from 'abort-controller';\nimport { CustomError } from 'ts-custom-error';\nimport fetch, { Headers, Request, Response } from './fetch';\nimport { isObject } from './real-type-of';\nconst isObjectLike = (value) => {\n    return value !== null && typeof value === 'object';\n};\nfunction mergeHeaders(source1, source2) {\n    const result = new Headers(source1 || {});\n    const source = new Headers(source2 || {});\n    source.forEach((value, key) => {\n        if (value === 'undefined') {\n            result.delete(key);\n        }\n        else {\n            result.set(key, value);\n        }\n    });\n    return result;\n}\nfunction merge(...sources) {\n    let result = {};\n    let headers = {};\n    for (const source of sources) {\n        if (Array.isArray(source)) {\n            if (!Array.isArray(result)) {\n                result = [];\n            }\n            result = [...result, ...source];\n        }\n        else if (isObjectLike(source)) {\n            for (let [key, value] of Object.entries(source)) {\n                if (isObjectLike(value) && key in result) {\n                    value = merge(result[key], value);\n                }\n                result[key] = value;\n            }\n            if (isObjectLike(source.headers)) {\n                headers = mergeHeaders(headers, source.headers);\n            }\n        }\n        result.headers = headers;\n    }\n    return result;\n}\nfunction mergeOptions(...sources) {\n    for (const source of sources) {\n        if (!isObject(source)) {\n            throw new TypeError(`The 'options' argument must be an object`);\n        }\n    }\n    return merge({}, ...sources);\n}\nfunction getRequestMethod(method) {\n    return method.toUpperCase();\n}\nexport class HTTPError extends CustomError {\n    constructor(response, request, options) {\n        super(response.statusText ?? String(response.status ?? 'Unknown response error'));\n        this.response = response;\n        this.request = request;\n        this.options = options;\n    }\n}\nexport class TimeoutError extends CustomError {\n    constructor(request, options) {\n        super(`Request timed out`);\n        this.request = request;\n        this.options = options;\n    }\n}\nfunction timeoutFetch(request, abortController, options) {\n    return new Promise((resolve, reject) => {\n        const timer = setTimeout(() => {\n            if (abortController) {\n                abortController.abort();\n            }\n            reject(new TimeoutError(request, options));\n        }, options.timeout);\n        void fetch(request)\n            .then(resolve)\n            .catch(reject)\n            .then(() => clearTimeout(timer));\n    });\n}\nclass RequestClient {\n    constructor(url, options = {}) {\n        this.setOptions(url, options);\n    }\n    setOptions(url, options) {\n        this.options = {\n            ...options,\n            method: getRequestMethod(options.method ?? 'get'),\n            throwHttpErrors: options.throwHttpErrors !== false,\n            timeout: options.timeout ?? 10000\n        };\n        this.abortController = new AbortController();\n        if (this.options.signal) {\n            this.options.signal.addEventListener('abort', () => {\n                this.abortController.abort();\n            });\n        }\n        this.options.signal = this.abortController.signal;\n        this.request = new Request(url, this.options);\n        if (this.options.searchParams) {\n            const searchParams = new URLSearchParams(this.options.searchParams);\n            const url = new URL(this.request.url);\n            url.search = searchParams.toString();\n            this.request = new Request(new Request(url.toString(), this.request), this.options);\n        }\n        if (this.options.json !== undefined) {\n            this.options.body = JSON.stringify(this.options.json);\n            this.request.headers.set('content-type', 'application/json');\n            this.request = new Request(this.request, { body: this.options.body });\n        }\n    }\n    async executeRequest() {\n        let response = await this.fetch();\n        for (const hook of this.options.afterResponse ?? []) {\n            const modifiedResponse = await hook(this.request, this.options, response);\n            if (modifiedResponse instanceof Response) {\n                response = modifiedResponse;\n            }\n        }\n        if (!response.ok && this.options.throwHttpErrors) {\n            throw new HTTPError(response, this.request, this.options);\n        }\n        return response;\n    }\n    async fetch() {\n        for (const hook of this.options.beforeRequest ?? []) {\n            const newOptions = await hook({ ...this.options });\n            if (newOptions && isObject(newOptions)) {\n                this.setOptions(this.request.url, mergeOptions(this.options, newOptions));\n            }\n        }\n        if (this.options.timeout === false) {\n            return fetch(this.request.clone());\n        }\n        return timeoutFetch(this.request.clone(), this.abortController, this.options);\n    }\n}\nexport default function createInstance(defaults = {}) {\n    const client = (url, options = {}) => new RequestClient(url, mergeOptions(defaults, options)).executeRequest();\n    client.extend = (newDefaults) => createInstance(mergeOptions(defaults, newDefaults));\n    return client;\n}\n//# sourceMappingURL=request-client.js.map","import addBasicAuthHeader from './middleware/before-request/add-basic-auth-header';\nimport prepareHeaders from './middleware/after-response/prepare-headers';\nimport prepareResponse from './middleware/after-response/prepare-response';\nimport createInstance from './request-client';\nconst baseClient = createInstance({\n    timeout: 10000,\n    headers: {\n        'user-agent': 'Segment (Actions)'\n    },\n    beforeRequest: [\n        addBasicAuthHeader\n    ],\n    afterResponse: [prepareResponse, prepareHeaders]\n});\nexport default function createRequestClient(...requestOptions) {\n    let client = baseClient;\n    for (const options of requestOptions ?? []) {\n        client = client.extend(options);\n    }\n    return (url, options) => {\n        return client(url, options);\n    };\n}\n//# sourceMappingURL=create-request-client.js.map","import { AggregateAjvError } from '@segment/ajv-human-errors';\nimport Ajv from 'ajv';\nimport addFormats from 'ajv-formats';\nimport dayjs from 'dayjs';\nimport { arrifyFields } from './arrify';\nconst ajv = addFormats(new Ajv({\n    coerceTypes: 'array',\n    allErrors: true,\n    allowUnionTypes: true,\n    verbose: true,\n    removeAdditional: true\n}));\najv.addFormat('text', true);\najv.addFormat('date-like', (data) => {\n    let date = dayjs(data);\n    if (String(Number(data)) === data) {\n        if (data.length === 13) {\n            date = dayjs(Number(data));\n        }\n        date = dayjs.unix(Number(data));\n    }\n    return date.isValid();\n});\nexport function validateSchema(obj, schema, options) {\n    const { schemaKey, throwIfInvalid = true } = options ?? {};\n    let validate;\n    if (schemaKey) {\n        validate = ajv.getSchema(schemaKey) || ajv.addSchema(schema, schemaKey).getSchema(schemaKey);\n    }\n    else {\n        validate = ajv.compile(schema);\n    }\n    arrifyFields(obj, schema);\n    const isValid = validate(obj);\n    if (throwIfInvalid && !isValid && validate.errors) {\n        throw new AggregateAjvError(validate.errors);\n    }\n    return isValid;\n}\n//# sourceMappingURL=schema-validation.js.map","var IDX=256, HEX=[], BUFFER;\nwhile (IDX--) HEX[IDX] = (IDX + 256).toString(16).substring(1);\n\nexport function v4() {\n\tvar i=0, num, out='';\n\n\tif (!BUFFER || ((IDX + 16) > 256)) {\n\t\tBUFFER = Array(i=256);\n\t\twhile (i--) BUFFER[i] = 256 * Math.random() | 0;\n\t\ti = IDX = 0;\n\t}\n\n\tfor (; i < 16; i++) {\n\t\tnum = BUFFER[IDX + i];\n\t\tif (i==6) out += HEX[num & 15 | 64];\n\t\telse if (i==8) out += HEX[num & 63 | 128];\n\t\telse out += HEX[num];\n\n\t\tif (i & 1 && i > 1 && i < 11) out += '-';\n\t}\n\n\tIDX++;\n\treturn out;\n}\n","export function defaultValues(fields) {\n    const obj = {};\n    for (const field of Object.keys(fields)) {\n        const defaultValue = fields[field].default;\n        if (typeof defaultValue !== 'undefined') {\n            obj[field] = defaultValue;\n        }\n    }\n    return obj;\n}\n//# sourceMappingURL=defaults.js.map","import type { BrowserActionDefinition } from '../../../lib/browser-destinations'\n\nimport type { FriendbuyAPI } from '../types'\nimport type { Settings } from '../generated-types'\nimport type { Payload } from './generated-types'\nimport type { AnalyticsPayload, ConvertFun, EventMap } from '@segment/actions-shared'\n\nimport { COPY, ROOT, mapEvent } from '@segment/actions-shared'\nimport { trackCustomerFields } from '@segment/actions-shared'\nimport { addName, enjoinInteger, enjoinString, parseDate } from '@segment/actions-shared'\n\n// see https://segment.com/docs/config-api/fql/\nexport const trackCustomerDefaultSubscription = 'type = \"identify\"'\n\nconst trackCustomerPub: EventMap = {\n  fields: {\n    customerId: { name: 'id', convert: enjoinString as ConvertFun },\n    anonymousID: COPY,\n    email: COPY,\n    isNewCustomer: COPY,\n    loyaltyStatus: COPY,\n    firstName: COPY,\n    lastName: COPY,\n    name: COPY,\n    age: { convert: enjoinInteger as ConvertFun },\n    // fbt-merchant-api complains about birthday being an object but passes it anyway.\n    birthday: { convert: parseDate as ConvertFun },\n    language: COPY,\n    addressCountry: { name: 'country' },\n    addressState: { name: 'state' },\n    addressCity: { name: 'city' },\n    addressPostalCode: { name: 'zipCode', convert: enjoinString as ConvertFun }\n  },\n  unmappedFieldObject: ROOT\n}\n\nconst action: BrowserActionDefinition<Settings, FriendbuyAPI, Payload> = {\n  title: 'Track Customer',\n  description: 'Create a new customer profile or update an existing customer profile.',\n  defaultSubscription: trackCustomerDefaultSubscription,\n  platform: 'web',\n  fields: trackCustomerFields,\n\n  perform: (friendbuyAPI, { payload }) => {\n    addName(payload)\n    const friendbuyPayload = mapEvent(trackCustomerPub, payload as unknown as AnalyticsPayload)\n    friendbuyAPI.push(['track', 'customer', friendbuyPayload, true])\n  }\n}\n\nexport default action\n","import type { BrowserActionDefinition } from '../../../lib/browser-destinations'\n\nimport type { FriendbuyAPI } from '../types'\nimport type { Settings } from '../generated-types'\nimport type { Payload } from './generated-types'\nimport type { AnalyticsPayload, ConvertFun, EventMap } from '@segment/actions-shared'\n\nimport { COPY, ROOT, mapEvent } from '@segment/actions-shared'\nimport { trackPurchaseFields } from '@segment/actions-shared'\nimport {\n  addName,\n  enjoinInteger,\n  enjoinNumber,\n  enjoinString,\n  parseDate,\n  removeCustomerIfNoId\n} from '@segment/actions-shared'\n\nexport const browserTrackPurchaseFields = trackPurchaseFields({})\n\n// see https://segment.com/docs/config-api/fql/\nexport const trackPurchaseDefaultSubscription = 'event = \"Order Completed\"'\n\nconst trackPurchasePub: EventMap = {\n  fields: {\n    orderId: { name: 'id', convert: enjoinString as ConvertFun },\n    amount: { convert: enjoinNumber as ConvertFun },\n    currency: COPY,\n    coupon: { name: 'couponCode' },\n    attributionId: COPY,\n    referralCode: COPY,\n    giftCardCodes: {\n      type: 'array'\n    },\n\n    products: {\n      type: 'array',\n      defaultObject: { sku: 'unknown', name: 'unknown', quantity: 1 },\n      fields: {\n        sku: { convert: enjoinString as ConvertFun },\n        name: COPY,\n        quantity: { convert: enjoinInteger as ConvertFun },\n        price: { convert: enjoinNumber as ConvertFun },\n        description: COPY,\n        category: COPY,\n        url: COPY,\n        image_url: { name: 'imageUrl' }\n      }\n    },\n\n    // CUSTOMER FIELDS\n    customerId: { name: ['customer', 'id'], convert: enjoinString as ConvertFun },\n    anonymousId: { name: ['customer', 'anonymousId'] },\n    email: { name: ['customer', 'email'] },\n    isNewCustomer: { name: ['customer', 'isNewCustomer'] },\n    loyaltyStatus: { name: ['customer', 'loyaltyStatus'] },\n    firstName: { name: ['customer', 'firstName'] },\n    lastName: { name: ['customer', 'lastName'] },\n    name: { name: ['customer', 'name'] },\n    age: { name: ['customer', 'age'], convert: enjoinInteger as ConvertFun },\n    // fbt-merchant-api complains about birthday being an object but passes it anyway.\n    birthday: { name: ['customer', 'birthday'], convert: parseDate as ConvertFun }\n  },\n  unmappedFieldObject: ROOT,\n  // Documentation of 2021-12-03 claims that both customer.id and\n  // customer.email are required, but experimentation shows only customer.id\n  // is required by pub trackPurchase.\n  finalize: removeCustomerIfNoId\n}\n\nconst action: BrowserActionDefinition<Settings, FriendbuyAPI, Payload> = {\n  title: 'Track Purchase',\n  description: 'Record when a customer makes a purchase.',\n  defaultSubscription: trackPurchaseDefaultSubscription,\n  platform: 'web',\n  fields: browserTrackPurchaseFields,\n\n  perform: (friendbuyAPI, { payload }) => {\n    addName(payload)\n    const friendbuyPayload = mapEvent(trackPurchasePub, payload as unknown as AnalyticsPayload)\n    friendbuyAPI.push(['track', 'purchase', friendbuyPayload, true])\n  }\n}\n\nexport default action\n","import type { BrowserActionDefinition } from '../../../lib/browser-destinations'\n\nimport type { FriendbuyAPI } from '../types'\nimport type { Settings } from '../generated-types'\nimport type { Payload } from './generated-types'\nimport type { AnalyticsPayload, ConvertFun, EventMap } from '@segment/actions-shared'\n\nimport { COPY, ROOT, mapEvent } from '@segment/actions-shared'\nimport { trackSignUpFields } from '@segment/actions-shared'\nimport { addName, enjoinInteger, enjoinString, parseDate } from '@segment/actions-shared'\n\nexport const browserTrackSignUpFields = trackSignUpFields({ requireCustomerId: true, requireEmail: true })\n\n// see https://segment.com/docs/config-api/fql/\nexport const trackSignUpDefaultSubscription = 'event = \"Signed Up\"'\n\nconst trackSignUpPub: EventMap = {\n  fields: {\n    coupon: { name: 'couponCode' },\n    attributionId: COPY,\n    referralCode: COPY,\n\n    // CUSTOMER FIELDS\n    customerId: { name: 'id', convert: enjoinString as ConvertFun },\n    anonymousID: COPY,\n    isNewCustomer: COPY,\n    loyaltyStatus: COPY,\n    email: COPY,\n    firstName: COPY,\n    lastName: COPY,\n    name: COPY,\n    age: { convert: enjoinInteger as ConvertFun },\n    birthday: { convert: parseDate as ConvertFun }\n  },\n  unmappedFieldObject: ROOT\n}\n\nconst action: BrowserActionDefinition<Settings, FriendbuyAPI, Payload> = {\n  title: 'Track Sign Up',\n  description: 'Record when a customer signs up for a service.',\n  defaultSubscription: trackSignUpDefaultSubscription,\n  platform: 'web',\n  fields: browserTrackSignUpFields,\n\n  perform: (friendbuyAPI, { payload }) => {\n    addName(payload)\n    const friendbuyPayload = mapEvent(trackSignUpPub, payload as unknown as AnalyticsPayload)\n    friendbuyAPI.push(['track', 'sign_up', friendbuyPayload, true])\n  }\n}\n\nexport default action\n","import type { InputField } from '@segment/actions-core'\nimport type { BrowserActionDefinition } from '../../../lib/browser-destinations'\n\nimport type { FriendbuyAPI } from '../types'\nimport type { Settings } from '../generated-types'\nimport type { Payload } from './generated-types'\nimport { createFriendbuyPayload } from '@segment/actions-shared'\n\nexport const trackPageDefaultSubscription = 'type = \"page\"'\n\n// https://segment.com/docs/connections/spec/page/\nexport const trackPageFields: Record<string, InputField> = {\n  name: {\n    label: 'Page Name',\n    description: 'The page name.',\n    type: 'string',\n    required: false,\n    default: { '@path': '$.name' }\n  },\n  category: {\n    label: 'Page Category',\n    description: 'The page category.',\n    type: 'string',\n    required: false,\n    default: { '@path': '$.category' }\n  },\n  title: {\n    label: 'Page Title',\n    description: 'The page title.',\n    type: 'string',\n    required: false,\n    default: { '@path': '$.properties.title' }\n  }\n}\n\nconst action: BrowserActionDefinition<Settings, FriendbuyAPI, Payload> = {\n  title: 'Track Page',\n  description:\n    'Record when a customer visits a new page. Allow Friendbuy widget targeting by Page Name instead of URL.',\n  defaultSubscription: trackPageDefaultSubscription,\n  platform: 'web',\n  fields: trackPageFields,\n\n  perform: (friendbuyAPI, data) => {\n    // If the page name is not defined then track the page with the name\n    // \"undefined\".  This is intended to allow merchants to target their widgets\n    // using page names when not all of their `analytics.page` calls include the\n    // page name.\n    const friendbuyPayload = createFriendbuyPayload([\n      ['name', data.payload.name || 'undefined'],\n      ['category', data.payload.category],\n      ['title', data.payload.title]\n    ])\n    friendbuyAPI.push(['track', 'page', friendbuyPayload, true])\n  }\n}\n\nexport default action\n","import type { BrowserActionDefinition } from '../../../lib/browser-destinations'\n\nimport type { FriendbuyAPI } from '../types'\nimport type { Settings } from '../generated-types'\nimport type { Payload } from './generated-types'\nimport type { ConvertFun, EventMap } from '@segment/actions-shared'\n\nimport { AnalyticsPayload, COPY, DROP, ROOT, mapEvent } from '@segment/actions-shared'\nimport { trackCustomEventFields } from '@segment/actions-shared'\nimport { addName, enjoinInteger, enjoinString, moveEventPropertiesToRoot, parseDate } from '@segment/actions-shared'\n\nexport const browserTrackCustomEventFields = trackCustomEventFields({}) // @@ email required?\n\nconst trackCustomEventPub: EventMap = {\n  fields: {\n    eventType: DROP,\n    deduplicationId: COPY,\n\n    // CUSTOMER FIELDS\n    customerId: { name: ['customer', 'id'], convert: enjoinString as ConvertFun },\n    anonymousId: { name: ['customer', 'anonymousId'] },\n    email: { name: ['customer', 'email'] },\n    isNewCustomer: { name: ['customer', 'isNewCustomer'] },\n    loyaltyStatus: { name: ['customer', 'loyaltyStatus'] },\n    firstName: { name: ['customer', 'firstName'] },\n    lastName: { name: ['customer', 'lastName'] },\n    name: { name: ['customer', 'name'] },\n    age: { name: ['customer', 'age'], convert: enjoinInteger as ConvertFun },\n    birthday: { name: ['customer', 'birthday'], convert: parseDate as ConvertFun }\n  },\n  unmappedFieldObject: ROOT\n}\n\nconst action: BrowserActionDefinition<Settings, FriendbuyAPI, Payload> = {\n  title: 'Track Custom Event',\n  description: 'Record when a customer completes any custom event that you define.',\n  // trackCustomEvent has no default subscription.\n  platform: 'web',\n  fields: browserTrackCustomEventFields,\n\n  perform: (friendbuyAPI, { payload }) => {\n    const analyticsPayload = moveEventPropertiesToRoot(payload as unknown as AnalyticsPayload)\n    addName(analyticsPayload)\n    const friendbuyPayload = mapEvent(trackCustomEventPub, analyticsPayload)\n    friendbuyAPI.push(['track', payload.eventType, friendbuyPayload])\n  }\n}\n\nexport default action\n","import type { BrowserDestinationDefinition } from '../../lib/browser-destinations'\nimport type { DestinationDefinition } from '@segment/actions-core'\nimport { browserDestination } from '../../runtime/shim'\nimport { defaultValues } from '@segment/actions-core'\n\nimport type { Settings } from './generated-types'\nimport type { FriendbuyAPI } from './types'\nimport trackCustomer, { trackCustomerDefaultSubscription } from './trackCustomer'\nimport trackPurchase, { browserTrackPurchaseFields, trackPurchaseDefaultSubscription } from './trackPurchase'\nimport trackSignUp, { browserTrackSignUpFields, trackSignUpDefaultSubscription } from './trackSignUp'\nimport trackPage, { trackPageDefaultSubscription, trackPageFields } from './trackPage'\nimport trackCustomEvent from './trackCustomEvent'\nimport { trackCustomerFields } from '@segment/actions-shared'\n\ndeclare global {\n  interface Window {\n    friendbuyAPI?: FriendbuyAPI\n    friendbuyBaseHost?: string\n  }\n}\n\n// Presets are shown in Segment configuration flow as \"Pre-Built Subscriptions\".\nconst presets: DestinationDefinition['presets'] = [\n  {\n    name: 'Track Customer',\n    subscribe: trackCustomerDefaultSubscription,\n    partnerAction: 'trackCustomer',\n    mapping: defaultValues(trackCustomerFields)\n  },\n  {\n    name: 'Track Purchase',\n    subscribe: trackPurchaseDefaultSubscription,\n    partnerAction: 'trackPurchase',\n    mapping: defaultValues(browserTrackPurchaseFields)\n  },\n  {\n    name: 'Track Sign Up',\n    subscribe: trackSignUpDefaultSubscription,\n    partnerAction: 'trackSignUp',\n    mapping: defaultValues(browserTrackSignUpFields)\n  },\n  {\n    name: 'Track Page',\n    subscribe: trackPageDefaultSubscription,\n    partnerAction: 'trackPage',\n    mapping: defaultValues(trackPageFields)\n  }\n]\n\nexport const destination: BrowserDestinationDefinition<Settings, FriendbuyAPI> = {\n  name: 'Friendbuy (Web Destination)',\n  slug: 'actions-friendbuy',\n  mode: 'device',\n\n  settings: {\n    merchantId: {\n      label: 'Friendbuy Merchant ID',\n      description:\n        'Find your Friendbuy Merchant ID by logging in to your [Friendbuy account](https://retailer.friendbuy.io/) and going to Developer Center > Friendbuy Code.',\n      type: 'string',\n      format: 'uuid',\n      required: true\n    }\n  },\n\n  initialize: async ({ settings /* , analytics */ }, dependencies) => {\n    let friendbuyAPI: FriendbuyAPI\n    window.friendbuyAPI = friendbuyAPI = window.friendbuyAPI || ([] as unknown as FriendbuyAPI)\n    const friendbuyBaseHost = window.friendbuyBaseHost ?? 'fbot.me'\n\n    friendbuyAPI.merchantId = settings.merchantId\n    friendbuyAPI.push(['merchant', settings.merchantId])\n\n    // The Friendbuy JavaScript can be loaded asynchronously.\n    void dependencies.loadScript(`https://static.${friendbuyBaseHost}/friendbuy.js`)\n    void dependencies.loadScript(`https://campaign.${friendbuyBaseHost}/${settings.merchantId}/campaigns.js`)\n\n    return friendbuyAPI\n  },\n\n  presets,\n  actions: {\n    trackCustomer,\n    trackPurchase,\n    trackSignUp,\n    trackPage,\n    trackCustomEvent\n  }\n}\n\nexport default browserDestination(destination)\n","import type { BrowserDestinationDefinition, Subscription } from '../lib/browser-destinations'\n\nexport function browserDestination<S, C>(definition: BrowserDestinationDefinition<S, C>) {\n  return async (settings: S & { subscriptions?: Subscription[] }) => {\n    const plugin = await import(\n      /* webpackChunkName: \"actions-plugin\" */\n      /* webpackMode: \"lazy-once\" */\n      './plugin'\n    )\n    return plugin.generatePlugins(definition, settings, settings.subscriptions || [])\n  }\n}\n"],"names":["root","factory","exports","module","define","amd","self","inProgress","dataWebpackPrefix","BUFFER","IDX","HEX","toString","substring","v4","num","i","out","Array","Math","random","EOS_FLAG","AbstractSyntaxType","UnlexerError","Error","constructor","message","super","this","name","stack","unlex","tokens","str","length","token","type","code","error","value","trim","escaped","c","isASTNode","arg","undefined","children","newNode","ParserError","ast","node","Parser","slice","parse","ERR","astToTokens","traverseAstForTokens","push","t","formatToken","astToString","map","join","traverseFunctionNodeForTokens","func","functionIdentifier","operands","operandTokens","operand","array","thing","concat","obj","flattenedOperandTokens","tree","child","moreTokens","queue","ROOT","statement","peek","conditional","STATEMENT","expr","operator","firstChild","FUNC","CONDITIONAL","next","OPERATOR","EXPR","upcoming","pathOrFunc","list","previous","path","PATH","indexOf","leftParens","leftOperand","comma","substringNode","rightParens","shift","Reader","position","forward","char","isEOS","charAt","backward","RangeError","getPosition","LexerError","cursor","lex","Lexer","reader","line","column","nextChar","lexOperatorOrConditional","lexNumber","lexString","openQuote","accept","comingUp","isDecimal","lexIdent","chars","_","backup","count","n","err","isNewLine","isWhitespace","isAlpha","match","isNumber","isNaN","parseFloat","isFinite","parseInt","isIdent","isTerminator","isToken","TokenType","Err","Ident","Dot","Operator","Conditional","String","Number","Null","BrackLeft","BrackRight","ParenLeft","ParenRight","Comma","EOS","AbortController","AbortSignal","window","indentString","cleanStack","AggregateError","errors","isArray","TypeError","Object","assign","replace","defineProperty","Symbol","iterator","_errors","os","extractPathRegex","pathRegex","homeDir","homedir","options","pretty","split","filter","pathMatches","includes","test","m","p1","btoa","global","__self__","F","fetch","DOMException","prototype","support","Blob","e","viewClasses","isArrayBufferView","ArrayBuffer","isView","call","normalizeName","toLowerCase","normalizeValue","iteratorFor","items","done","Headers","headers","forEach","append","header","getOwnPropertyNames","consumed","body","bodyUsed","Promise","reject","fileReaderReady","resolve","onload","result","onerror","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","bufferClone","buf","view","Uint8Array","byteLength","set","buffer","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","get","rejected","arrayBuffer","then","text","readAsText","fromCharCode","readArrayBufferAsText","formData","decode","json","JSON","oldValue","has","hasOwnProperty","callback","thisArg","keys","values","entries","methods","Request","input","method","upcased","url","credentials","mode","signal","toUpperCase","referrer","form","bytes","decodeURIComponent","Response","bodyInit","status","ok","statusText","clone","response","redirectStatuses","redirect","location","create","init","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","parts","key","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","ponyfill","ctx","r","s","u","a","o","f","h","d","$","l","y","M","weekdays","months","g","z","utcOffset","abs","floor","date","year","month","add","ceil","p","w","D","ms","Q","v","S","args","arguments","O","locale","$L","utc","$u","x","$x","$offset","$d","Date","NaN","UTC","$y","getFullYear","$M","getMonth","$D","getDate","$W","getDay","$H","getHours","$m","getMinutes","$s","getSeconds","$ms","getMilliseconds","$utils","isValid","isSame","startOf","endOf","isAfter","isBefore","$g","unix","valueOf","getTime","toDate","apply","$locale","weekStart","$set","min","daysInMonth","round","subtract","format","invalidDate","substr","meridiem","YY","YYYY","MM","MMM","monthsShort","MMMM","DD","dd","weekdaysMin","ddd","weekdaysShort","dddd","H","HH","hh","A","mm","ss","SSS","Z","getTimezoneOffset","diff","toJSON","toISOString","toUTCString","b","extend","$i","isDayjs","en","Ls","ReflectOwnKeys","R","Reflect","ReflectApply","target","receiver","Function","ownKeys","getOwnPropertySymbols","NumberIsNaN","EventEmitter","once","emitter","errorListener","removeListener","resolver","eventTargetAgnosticAddListener","handler","flags","on","addErrorHandlerIfEventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","prepend","events","existing","warning","newListener","emit","unshift","warned","console","warn","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","bind","_listeners","unwrap","evlistener","arr","ret","unwrapListeners","arrayClone","listenerCount","copy","wrapListener","enumerable","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","context","len","listeners","addListener","prependListener","prependOnceListener","originalListener","index","pop","spliceOne","off","removeAllListeners","rawListeners","eventNames","equal","RegExp","source","string","indent","includeEmptyLines","regex","repeat","merge","_len","sets","_key","xl","subexp","typeOf","toArray","setInterval","buildExps","isIRI","ALPHA$$","DIGIT$$","HEXDIG$$","PCT_ENCODED$","SUB_DELIMS$$","RESERVED$$","IPRIVATE$$","UNRESERVED$$","SCHEME$","USERINFO$","DEC_OCTET_RELAXED$","IPV4ADDRESS$","H16$","LS32$","IPV6ADDRESS1$","IPV6ADDRESS2$","IPV6ADDRESS3$","IPV6ADDRESS4$","IPV6ADDRESS5$","IPV6ADDRESS6$","IPV6ADDRESS7$","IPV6ADDRESS8$","IPV6ADDRESS9$","IPV6ADDRESS$","ZONEID$","IPV6ADDRZ_RELAXED$","IPVFUTURE$","IP_LITERAL$","REG_NAME$","HOST$","PORT$","AUTHORITY$","PCHAR$","SEGMENT$","SEGMENT_NZ$","SEGMENT_NZ_NC$","PATH_ABEMPTY$","PATH_ABSOLUTE$","PATH_NOSCHEME$","PATH_ROOTLESS$","PATH_EMPTY$","QUERY$","FRAGMENT$","HIER_PART$","URI$","RELATIVE_PART$","RELATIVE$","NOT_SCHEME","NOT_USERINFO","NOT_HOST","NOT_PATH","NOT_PATH_NOSCHEME","NOT_QUERY","NOT_FRAGMENT","ESCAPE","UNRESERVED","OTHER_CHARS","PCT_ENCODED","IPV4ADDRESS","IPV6ADDRESS","URI_PROTOCOL","IRI_PROTOCOL","slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","toConsumableArray","arr2","from","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","baseMinusTMin","stringFromCharCode","error$1","fn","mapDomain","ucs2decode","output","counter","charCodeAt","extra","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","inputLength","bias","basic","lastIndexOf","j","oldi","baseMinusT","splice","fromCodePoint","encode","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_currentValue2","return","basicLength","handledCPCount","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","currentValue","handledCPCountPlusOne","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_currentValue","q","qMinusT","toUnicode","toASCII","punycode","SCHEMES","pctEncChar","chr","pctDecChars","newStr","il","c2","_c","c3","_normalizeComponentEncoding","components","protocol","decodeUnreserved","decStr","scheme","userinfo","host","query","fragment","_stripLeadingZeros","_normalizeIPv4","matches","address","_normalizeIPv6","_matches2","zone","_address$toLowerCase$","reverse","_address$toLowerCase$2","last","first","firstFields","lastFields","isLastFieldIPv4Address","fieldCount","lastFieldsStart","fields","longestZeroFields","reduce","acc","field","lastLongest","sort","newHost","newFirst","newLast","URI_PARSE","NO_MATCH_IS_UNDEFINED","uriString","iri","reference","port","schemeHandler","unicodeSupport","domainHost","_recomposeAuthority","uriTokens","$1","$2","RDS1","RDS2","RDS3","RDS5","removeDotSegments","im","serialize","authority","absolutePath","resolveComponents","relative","tolerant","baseURI","relativeURI","schemelessOptions","normalize","uri","uriA","uriB","escapeComponent","unescapeComponent","secure","handler$1","isSecure","wsComponents","handler$2","resourceName","_wsComponents$resourc","_wsComponents$resourc2","handler$3","ATEXT$$","VCHAR$$","SOME_DELIMS$$","NOT_LOCAL_PART","NOT_HFNAME","NOT_HFVALUE","handler$4","mailtoComponents","to","unknownHeaders","hfields","hfield","toAddrs","_x","_xl","subject","_x2","_xl2","addr","toAddr","atIdx","localPart","domain","URN_PARSE","handler$5","urnComponents","nid","nss","urnScheme","uriComponents","UUID","handler$6","uuidComponents","uuid","commonCustomerFields","fieldConfig","customerId","label","description","required","Boolean","requireCustomerId","default","exists","else","anonymousId","email","requireEmail","isNewCustomer","loyaltyStatus","firstName","lastName","age","birthday","contextAttributes","contextFields","pageUrl","pageTitle","userAgent","ipAddress","stringify","mapEventHelper","mapEvent","DROP","COPY","actions_core_1","util_1","analyticsPayload","friendbuyAttributes","friendbuyPayload","defaultObject","rawValue","fieldMap","convert","isNonEmpty","unmappedFieldObject","finalize","freeze","IntegrationError","trackCustomEventFields","eventType","eventProperties","deduplicationId","trackCustomerFields","language","addressCountry","addressState","addressCity","addressPostalCode","customerSince","trackPurchaseFields","commonFields_1","orderId","amount","currency","coupon","attributionId","referralCode","giftCardCodes","multiple","products","properties","sku","quantity","price","category","image_url","trackSignUpFields","createFriendbuyPayload","payloadItems","dropEmpty","enjoinString","enjoinNumber","enjoinInteger","parseDate","filterFriendbuyAttributes","moveEventPropertiesToRoot","removeCustomerIfNoId","addName","getName","payload","customer","id","api","filteredAttributes","attribute","dateRecord","dateRegexp","day","exec","integerRegexp","floatRegexp","__createBinding","k2","__exportStar","defaultOpts","fieldLabels","includeOriginalError","includeData","AjvError","ajvErr","redundant","pointer","instancePath","original","data","humanError","AggregateAjvError","ajvErrors","opts","formatLabels","time","hostname","ipv4","ipv6","getMessage","keyword","params","parentSchema","schemaPath","preamble","title","fieldPreamble","errorMessage","allowedValues","expectType","gotType","limit","charsLimit","actual","endsWith","patternLabel","multipleOf","allowed","additionalProperty","missingProperty","propertyName","prop","property","capitalize","pluralize","jsonPath","indefiniteArticle","humanizeTypeOf","raw","humanizeList","conjunction","arrifyFields","arrify","real_type_of_1","treatNullAsEmpty","schema","isObject","fieldSchema","__importDefault","mod","__esModule","add_basic_auth_header_1","prepare_headers_1","prepare_response_1","baseClient","timeout","beforeRequest","afterResponse","requestOptions","client","createTestEvent","uuid_1","event","ip","library","version","city","country","latitude","longitude","speed","page","search","timezone","messageId","receivedAt","sentAt","timestamp","traits","userId","createTestIntegration","create_test_event_1","destination_kit_1","map_values_1","TestDestination","Destination","destination","responses","async","action","mapping","settings","useDefaultMappings","auth","definition","actions","mapValues","executeAction","executeBatch","defaultValues","defaultValue","Action","events_1","create_request_client_1","mapping_kit_1","fields_to_jsonschema_1","fetch_1","schema_validation_1","errors_1","remove_empty_values_1","destinationName","extendRequest","hasBatchSupport","performBatch","fieldsToJsonSchema","bundle","results","transform","removeEmptyValues","schemaKey","validateSchema","dataBundle","rawData","rawMapping","performRequest","perform","payloads","transformBatch","validationOptions","throwIfInvalid","executeDynamicField","dynamicFields","pagination","requestFn","requestClient","createRequestClient","parseResponse","modifiedResponse","content","toJsonSchemaType","schemaType","tsType","choices","enum","choice","allowNull","isMulti","additionalProperties","$schema","destination_subscriptions_1","action_1","time_1","parse_settings_1","retry_1","OAUTH2_SCHEME","authentication","onDelete","_onDelete","settingsSchema","partnerAction","validateSettings","destinationSettings","getDestinationSettings","getAuthData","testAuthentication","refreshAccessToken","oauthData","slug","actionSlug","execute","subscription","onComplete","subscriptionStartedAt","subscribe","parsedSubscription","parseFql","isBatch","subscribedEvents","validate","subscriptionEndedAt","duration","onEvent","onSubscriptions","onBatch","retry","retries","onFailedAttempt","oauthSettings","getOAuth2Data","newTokens","InvalidAuthenticationError","updateOAuthSettings","onTokenRefresh","subscriptions","getSubscriptions","authData","promises","onSubscription","all","parsedSubscriptions","subcription","oauth","otherSettings","accessToken","access_token","refreshToken","refresh_token","clientId","clientSecret","newOauth","RetryableError","ts_custom_error_1","CustomError","__setModuleDefault","__importStar","cross_fetch_1","prevObj","HTTPError","isString","realTypeOf","removeUndefined","omit","create_test_integration_1","defaults_1","get_1","omit_1","remove_undefined_1","request_client_1","agg","is_directive_1","placeholders_1","validate_1","arrify_1","directives","directiveRegExp","registerDirective","registerStringDirective","isDirective","find","startsWith","directiveFn","runDirective","resolved","condition","itemShape","item","template","render","realType","some","entityMap","replacer","escape","escapeHtml","aggregate_error_1","ValidationError","flatAggregate","realTypeOrDirective","validateDirective","directiveKeys","directiveKey","validateDirectiveOrRaw","validateDirectiveOrString","validateObject","validateArray","directive","names","optional","validateObjectWithFields","_request","_options","headersToObject","_error","btoa_lite_1","username","password","Authorization","newObject","isRoot","newObj","cleaned","TimeoutError","abort_controller_1","isObjectLike","mergeHeaders","source1","source2","delete","sources","mergeOptions","RequestClient","setOptions","throwHttpErrors","abortController","searchParams","URL","hook","newOptions","timer","setTimeout","catch","clearTimeout","createInstance","defaults","executeRequest","newDefaults","attemptCount","ajv_human_errors_1","ajv_1","ajv_formats_1","dayjs_1","ajv","coerceTypes","allErrors","allowUnionTypes","verbose","removeAdditional","addFormat","getSchema","addSchema","compile","process","hrtime","bigint","start","stop","fmtDef","compare","formatNames","fastFormats","fullFormats","compareDate","compareTime","dateTime","DATE_TIME_SEPARATOR","compareDateTime","NOT_URI_FRAGMENT","URI","Z_ANCHOR","byte","BYTE","lastIndex","int32","isInteger","int64","float","validateNumber","double","binary","DATE","DAYS","isLeapYear","d1","d2","TIME","withTimeZone","hour","minute","second","timeZone","t1","t2","a1","a2","dt1","dt2","res","formats_1","limit_1","codegen_1","fullName","Name","fastName","formatsPlugin","keywords","addFormats","formats","exportName","fs","_a","_b","formatLimitDefinition","ops","operators","KWDs","formatMaximum","okStr","LTE","fail","GT","formatMinimum","GTE","LT","formatExclusiveMaximum","formatExclusiveMinimum","schemaCode","$data","cxt","gen","it","validateFormats","fCxt","KeywordCxt","RULES","compareCode","fmt","fmts","scopeValue","ref","const","fail$data","or","validate$DataFormat","getProperty","validateFormat","dependencies","addKeyword","CodeGen","nil","core_1","draft7_1","discriminator_1","draft7MetaSchema","META_SUPPORT_DATA","META_SCHEMA_ID","Ajv","_addVocabularies","addVocabulary","discriminator","_addDefaultMetaSchema","meta","metaSchema","$dataMetaSchema","addMetaSchema","refs","defaultMeta","regexpCode","safeStringify","strConcat","addCodeArg","_Code","IDENTIFIER","_CodeOrName","emptyStr","_items","_str","_names","strs","plus","mergeExprItems","optimize","c1","rx","and","not","varKinds","ValueScopeName","ValueScope","Scope","code_1","scope_1","code_2","scope_2","EQ","NEQ","NOT","OR","AND","ADD","Node","optimizeNodes","optimizeNames","_constants","Def","varKind","rhs","es5","var","constants","optimizeExpr","Assign","lhs","sideEffects","addExprNames","AssignOp","op","Label","Break","Throw","AnyCode","ParentNode","nodes","subtractNames","addNames","BlockNode","Root","Else","kind","If","cond","ns","For","ForLoop","iteration","ForRange","ForIter","loop","iterable","Func","Return","Try","finally","Catch","Finally","replaceName","par","extScope","_values","_blockStarts","lines","_extScope","_scope","parent","_nodes","_root","prefix","scopeName","prefixOrName","Set","getScopeValue","keyOrRef","getValue","scopeRefs","scopeCode","_def","nameOrPrefix","constant","toName","_leafNode","_constant","let","object","keyValues","if","thenBody","elseBody","_blockNode","endIf","elseIf","_elseNode","_endBlockNode","_for","forBody","endFor","for","forRange","forOf","forIn","ownProperties","break","try","tryBody","catchCode","finallyCode","_currNode","throw","block","nodeCount","endBlock","toClose","funcBody","endFunc","N1","N2","andCode","mappend","orCode","UsedValueState","ValueError","prefixes","_prefixes","_parent","_newName","_nameGroup","nameStr","setValue","itemIndex","scopePath","scope","valueKey","vs","_name","Map","_reduceValues","usedValues","getCode","valueCode","nameSet","Started","def","Completed","extendErrors","resetErrorsCount","reportExtraError","reportError","keyword$DataError","keywordError","names_1","addError","errObj","vErrors","returnErrors","errs","validateName","schemaEnv","$async","errorPaths","overrideAllErrors","compositeRule","errorObjectCode","errsCount","schemaValue","errorPath","errSchemaPath","E","createErrors","errorInstancePath","errorSchemaPath","topSchemaRef","messages","extraErrorProps","errorObject","instPath","getErrorPath","Type","Str","schPath","resolveSchema","getCompilingSchema","resolveRef","compileSchema","SchemaEnv","validation_error_1","resolve_1","env","dynamicAnchors","schemaId","baseId","normalizeId","localRefs","sch","_sch","rootId","getFullPath","_ValidationError","schemaCxt","parentData","parentDataProperty","dataNames","dataPathArr","dataLevel","dataTypes","definedProperties","jtd","sourceCode","_compilations","validateFunctionCode","validateCode","makeValidate","scopeValues","unevaluated","props","evaluated","dynamicProps","dynamicItems","logger","inlineOrCompile","inlineRef","inlineRefs","schEnv","s2","s1","schemas","refPath","_getFullPath","getJsonPointer","schOrRef","schId","resolveUrl","schOrFunc","PREVENT_SCOPE_CHANGE","parsedRef","part","partSchema","unescapeFragment","$ref","schemaHasRulesButRef","valCxt","rootData","jsonPos","jsonLen","jsonPart","MissingRefError","msg","missingRef","missingSchema","getSchemaRefs","traverse","SIMPLE_INLINED","hasRef","countKeys","REF_KEYWORDS","Infinity","eachItem","TRAILING_SLASH_HASH","ANCHOR","baseIds","pathPrefix","schemaRefs","allKeys","jsonPtr","parentJsonPtr","fullPath","addRef","ambiguos","checkAmbiguosRef","addAnchor","anchor","$anchor","$dynamicAnchor","sch1","sch2","getRules","isJSONType","jsonTypes","groups","number","rules","types","integer","boolean","null","post","checkStrictMode","useFunc","setEvaluated","evaluatedPropsToName","mergeEvaluated","unescapeJsonPointer","escapeJsonPointer","escapeFragment","schemaRefOrVal","schemaHasRules","checkUnknownRules","alwaysValidSchema","toHash","strictSchema","makeMergeEvaluated","mergeNames","mergeToName","mergeValues","resultToName","ps","hash","encodeURIComponent","xs","max","snippets","dataProp","dataPropType","jsPropertySyntax","Num","shouldUseGroup","group","rule","shouldUseRule","implements","kwd","schemaHasRulesForType","boolOrEmptySchema","topBoolOrEmptySchema","boolError","falseSchemaError","valid","reportTypeError","checkDataTypes","checkDataType","coerceAndCheckDataType","getJSONTypes","getSchemaTypes","DataType","rules_1","applicability_1","ts","every","nullable","coerceTo","COERCIBLE","coerceToTypes","checkTypes","wrongType","strictNumbers","Wrong","dataType","coerced","coerceSpecificType","assignParentData","coerceData","strictNums","correct","Correct","numCond","_cond","notObj","typeError","getTypeErrorContext","assignDefaults","assignDefault","childData","useDefaults","ty","getData","boolSchema_1","dataType_1","dataType_2","keyword_1","subschema_1","validateFunction","funcSourceUrl","dynamicRef","destructureValCxtES5","destructureValCxt","subschemaCode","isSchemaObj","checkKeywords","schemaCxtHasRules","$comment","commentKeyword","updateContext","checkAsyncSchema","typeAndKeywords","subSchemaObjCode","ignoreKeywordsWithRef","checkRefsAndKeywords","schemaKeywords","rootName","typeErrors","groupKeywords","iterateKeywords","strictTypes","includesType","strictTypesError","checkContextTypes","checkMultipleTypes","hasApplicableType","checkKeywordTypes","checkStrictTypes","keywordCode","schTs","kwdT","checkNoDefault","resetEvaluated","assignEvaluated","returnResults","topSchemaObjCode","validateKeywordUsage","validSchemaType","allowUndefined","trackErrors","successAction","failAction","failResult","pass","invalid$data","errorParams","setParams","$dataError","reset","block$data","codeBlock","$dataValid","check$data","st","wrong$DataType","validateSchemaRef","invalid$DataSchema","subschema","appl","getSubschema","extendSubschemaData","extendSubschemaMode","nextContext","mergeValidEvaluated","ruleType","funcKeywordCode","macroKeywordCode","JSON_POINTER","RELATIVE_JSON_POINTER","jsonPointer","up","errorMsg","segments","segment","pointerType","modifyData","useKeyword","macroSchema","macro","schemaRef","checkAsyncKeyword","validateRef","assignValid","_await","passCxt","passContext","passSchema","callValidateCode","modifying","reportErrs","ruleErrs","validateAsync","validateErrs","validateSync","addErrs","deps","errorsText","schemaProp","dpType","dataContextProps","_nextData","jtdDiscriminator","jtdMetadata","ref_error_1","compile_1","codegen_2","$dataRefSchema","META_IGNORE_OPTIONS","EXT_SCOPE_NAMES","removedOptions","errorDataPath","jsonPointers","extendRefs","missingRefs","processCode","strictDefaults","strictKeywords","uniqueItems","unknownFormats","cache","deprecatedOptions","unicode","requiredOptions","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_t","_u","_v","_w","strict","_optz","strictTuples","strictRequired","loopRequired","loopEnum","addUsedSchema","unicodeRegExp","int32range","_loading","_cache","noLogs","log","getLogger","formatOpt","checkOptions","_metaOpts","getMetaSchemaOptions","addInitialFormats","addInitialKeywords","addInitialSchemas","_dataRefSchema","$id","schemaKeyRef","_meta","_addSchema","_compileSchemaEnv","compileAsync","loadSchema","runCompileAsync","_schema","loadMetaSchema","_compileAsync","checkLoaded","loadMissingSchema","_loadSchema","_validateSchema","_checkUnique","throwOrLogError","keyRef","getSchEnv","removeSchema","_removeAllSchemas","clear","cacheKey","definitions","kwdOrDef","checkKeyword","addRule","keywordMetaschema","getKeyword","removeKeyword","findIndex","separator","dataVar","keywordsJsonPointers","seg","schemaOrData","_compileMetaSchema","currentOpts","checkOpts","opt","optsSchemas","defs","metaOpts","KEYWORD_NAME","ruleGroup","before","addBeforeRule","_rule","$dataRef","anyOf","ucs2length","pos","validation","validateAdditionalItems","validateItems","allSchemaProperties","patProps","patternProperties","deleteAdditional","additionalPropertyCode","applyAdditionalSchema","definedProp","propsSchema","isOwnProperty","usePattern","isAdditional","schCxt","validateUnion","minContains","maxContains","schValid","checkLimits","_valid","validateSchemaDeps","validatePropertyDeps","depsCount","property_ies","propDeps","schDeps","propertyDeps","schemaDeps","splitDependencies","missing","hasProperty","propertyInData","depProp","checkReportMissingProp","checkMissingProp","reportMissingProp","ifClause","hasThen","hasSchema","hasElse","validateIf","validateClause","additionalItems_1","prefixItems_1","items_1","items2020_1","contains_1","dependencies_1","propertyNames_1","additionalProperties_1","properties_1","patternProperties_1","not_1","anyOf_1","oneOf_1","allOf_1","if_1","thenElse_1","draft2020","applicator","validateTuple","extraItems","schArr","fullTuple","minItems","maxItems","checkStrictTuple","prefixItems","passing","util_2","patterns","alwaysValidPatterns","checkProperties","allowMatchingProperties","checkMatchingProperties","pat","validateProperties","alwaysValid","validatePatternProperties","allProps","hasDefault","applyPropertySchema","schemaProperties","noPropertyInData","hasPropFunc","schemaMap","dataAndSchema","pattern","validArr","notValid","id_1","ref_1","core","callRef","getValidate","callRootRef","schOrEnv","callValidate","schName","inlineRefSchema","addErrorsFrom","addEvaluatedFrom","schEvaluated","callAsyncRef","types_1","discrError","tagName","DiscrError","Tag","tag","oneOf","applyTagSchema","oneOfMapping","topRequired","hasRequired","tagRequired","propSch","addMappings","addMapping","tagValue","getMapping","Mapping","validateMapping","validation_1","applicator_1","format_1","metadata_1","draft7Vocabularies","metadataVocabulary","contentVocabulary","fDef","fType","callFormat","validData","invalidFmt","formatDef","unknownMsg","unknownFormat","fmtType","fmtRef","getFormat","validCondition","equal_1","useLoop","eql","vSchema","equalCode","limitNumber_1","multipleOf_1","limitLength_1","pattern_1","limitProperties_1","required_1","limitItems_1","uniqueItems_1","const_1","enum_1","comp","ucs2length_1","maximum","minimum","exclusiveMaximum","exclusiveMinimum","prec","multipleOfPrecision","invalid","regExp","loopAllRequired","allErrorsMode","loopUntilMissing","exitOnErrorMode","requiredKey","itemTypes","loopN","indices","loopN2","outer","cb","_traverse","pre","rootSchema","parentKeyword","keyIndex","arrayKeywords","propsKeywords","skipKeywords","additionalItems","contains","propertyNames","allOf","$defs","maxLength","minLength","maxProperties","minProperties","stringifyValue","fqlExpression","stringifyGroupNode","childNode","stringifyChildNode","fql","parens","numberOfParens","defValue","previousObject","generateFql","generate_fql_1","parse_fql_1","fql_ts_1","tokenToConditionType","getTokenValue","isFqlFunction","parseFqlFunction","negate","nameToken","valueToken","tokenStart","conditionType","operatorToken","isExists","isNotExists","groupTokens","groupToken","normalizedTokens","current","validateGroupCondition","childCondition","validateCondition","validateValue","expected","fixStack","captureStackTrace","extendStatics","__extends","setPrototypeOf","__proto__","__","_super","_newTarget","_this","configurable","__spreadArrays","arguments$1","jl","customErrorFactory","defineProperties","writable","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","chunkId","globalThis","script","needAttach","scripts","document","getElementsByTagName","getAttribute","createElement","charset","nc","setAttribute","src","onScriptComplete","prev","doneFns","parentNode","removeChild","head","appendChild","toStringTag","scriptUrl","importScripts","currentScript","installedChunks","installedChunkData","errorType","realSrc","webpackJsonpCallback","parentChunkLoadingFunction","chunkIds","moreModules","runtime","chunkLoadingGlobal","trackCustomerDefaultSubscription","trackCustomerPub","anonymousID","defaultSubscription","platform","friendbuyAPI","browserTrackPurchaseFields","trackPurchaseDefaultSubscription","trackPurchasePub","browserTrackSignUpFields","trackSignUpDefaultSubscription","trackSignUpPub","trackPageDefaultSubscription","trackPageFields","browserTrackCustomEventFields","trackCustomEventPub","presets","merchantId","initialize","friendbuyBaseHost","loadScript","trackCustomer","trackPurchase","trackSignUp","trackPage","trackCustomEvent","generatePlugins"],"sourceRoot":""}